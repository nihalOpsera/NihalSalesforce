"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){e.extend(e.fn,{validate:function(t){if(this.length){var i=e.data(this[0],"validator");return i||(this.attr("novalidate","novalidate"),i=new e.validator(t,this[0]),e.data(this[0],"validator",i),i.settings.onsubmit&&(this.validateDelegate(":submit","click",function(t){i.settings.submitHandler&&(i.submitButton=t.target),e(t.target).hasClass("cancel")&&(i.cancelSubmit=!0),void 0!==e(t.target).attr("formnovalidate")&&(i.cancelSubmit=!0)}),this.submit(function(t){function n(){var n,r;return!i.settings.submitHandler||(i.submitButton&&(n=e("<input type='hidden'/>").attr("name",i.submitButton.name).val(e(i.submitButton).val()).appendTo(i.currentForm)),r=i.settings.submitHandler.call(i,i.currentForm,t),i.submitButton&&n.remove(),void 0!==r&&r)}return i.settings.debug&&t.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,n()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):n():(i.focusInvalid(),!1)})),i)}t&&t.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.")},valid:function(){var t,i;return e(this[0]).is("form")?t=this.validate().form():(t=!0,i=e(this[0].form).validate(),this.each(function(){t=i.element(this)&&t})),t},removeAttrs:function(t){var i={},n=this;return e.each(t.split(/\s/),function(e,t){i[t]=n.attr(t),n.removeAttr(t)}),i},rules:function(t,i){var n,r,a,s,o,l,u=this[0];if(t)switch(r=(n=e.data(u.form,"validator").settings).rules,a=e.validator.staticRules(u),t){case"add":e.extend(a,e.validator.normalizeRule(i)),delete a.messages,r[u.name]=a,i.messages&&(n.messages[u.name]=e.extend(n.messages[u.name],i.messages));break;case"remove":return i?(l={},e.each(i.split(/\s/),function(t,i){l[i]=a[i],delete a[i],"required"===i&&e(u).removeAttr("aria-required")}),l):(delete r[u.name],a)}return(s=e.validator.normalizeRules(e.extend({},e.validator.classRules(u),e.validator.attributeRules(u),e.validator.dataRules(u),e.validator.staticRules(u)),u)).required&&(o=s.required,delete s.required,s=e.extend({required:o},s),e(u).attr("aria-required","true")),s.remote&&(o=s.remote,delete s.remote,s=e.extend(s,{remote:o})),s}}),e.extend(e.expr[":"],{blank:function(t){return!e.trim(""+e(t).val())},filled:function(t){return!!e.trim(""+e(t).val())},unchecked:function(t){return!e(t).prop("checked")}}),e.validator=function(t,i){this.settings=e.extend(!0,{},e.validator.defaults,t),this.currentForm=i,this.init()},e.validator.format=function(t,i){return 1===arguments.length?function(){var i=e.makeArray(arguments);return i.unshift(t),e.validator.format.apply(this,i)}:(arguments.length>2&&i.constructor!==Array&&(i=e.makeArray(arguments).slice(1)),i.constructor!==Array&&(i=[i]),e.each(i,function(e,i){t=t.replace(new RegExp("\\{"+e+"\\}","g"),function(){return i})}),t)},e.extend(e.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:e([]),errorLabelContainer:e([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e){this.lastActive=e,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(e)))},onfocusout:function(e){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(e,t){9===t.which&&""===this.elementValue(e)||(e.name in this.submitted||e===this.lastElement)&&this.element(e)},onclick:function(e){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(t,i,n){"radio"===t.type?this.findByName(t.name).addClass(i).removeClass(n):e(t).addClass(i).removeClass(n)},unhighlight:function(t,i,n){"radio"===t.type?this.findByName(t.name).removeClass(i).addClass(n):e(t).removeClass(i).addClass(n)}},setDefaults:function(t){e.extend(e.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:e.validator.format("Please enter no more than {0} characters."),minlength:e.validator.format("Please enter at least {0} characters."),rangelength:e.validator.format("Please enter a value between {0} and {1} characters long."),range:e.validator.format("Please enter a value between {0} and {1}."),max:e.validator.format("Please enter a value less than or equal to {0}."),min:e.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){this.labelContainer=e(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||e(this.currentForm),this.containers=e(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var t,i=this.groups={};function n(t){var i=e.data(this[0].form,"validator"),n="on"+t.type.replace(/^validate/,""),r=i.settings;r[n]&&!this.is(r.ignore)&&r[n].call(i,this[0],t)}e.each(this.settings.groups,function(t,n){"string"==typeof n&&(n=n.split(/\s/)),e.each(n,function(e,n){i[n]=t})}),t=this.settings.rules,e.each(t,function(i,n){t[i]=e.validator.normalizeRule(n)}),e(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox']","focusin focusout keyup",n).validateDelegate("select, option, [type='radio'], [type='checkbox']","click",n),this.settings.invalidHandler&&e(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler),e(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),e.extend(this.submitted,this.errorMap),this.invalid=e.extend({},this.errorMap),this.valid()||e(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(t){var i=this.clean(t),n=this.validationTargetFor(i),r=!0;return this.lastElement=n,void 0===n?delete this.invalid[i.name]:(this.prepareElement(n),this.currentElements=e(n),(r=!1!==this.check(n))?delete this.invalid[n.name]:this.invalid[n.name]=!0),e(t).attr("aria-invalid",!r),this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),r},showErrors:function(t){if(t){for(var i in e.extend(this.errorMap,t),this.errorList=[],t)this.errorList.push({message:t[i],element:this.findByName(i)[0]});this.successList=e.grep(this.successList,function(e){return!(e.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){e.fn.resetForm&&e(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue").removeAttr("aria-invalid")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t,i=0;for(t in e)i++;return i},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(e){e.not(this.containers).text(""),this.addWrapper(e).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{e(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},findLastActive:function(){var t=this.lastActive;return t&&1===e.grep(this.errorList,function(e){return e.element.name===t.name}).length&&t},elements:function(){var t=this,i={};return e(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled], [readonly]").not(this.settings.ignore).filter(function(){return!this.name&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),!(this.name in i||!t.objectLength(e(this).rules()))&&(i[this.name]=!0,!0)})},clean:function(t){return e(t)[0]},errors:function(){var t=this.settings.errorClass.split(" ").join(".");return e(this.settings.errorElement+"."+t,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=e([]),this.toHide=e([]),this.currentElements=e([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(t){var i,n=e(t),r=t.type;return"radio"===r||"checkbox"===r?e("input[name='"+t.name+"']:checked").val():"number"===r&&void 0!==t.validity?!t.validity.badInput&&n.val():"string"==typeof(i=n.val())?i.replace(/\r/g,""):i},check:function(t){t=this.validationTargetFor(this.clean(t));var i,n,r,a=e(t).rules(),s=e.map(a,function(e,t){return t}).length,o=!1,l=this.elementValue(t);for(n in a){r={method:n,parameters:a[n]};try{if("dependency-mismatch"===(i=e.validator.methods[n].call(this,l,t,r.parameters))&&1===s){o=!0;continue}if(o=!1,"pending"===i)return void(this.toHide=this.toHide.not(this.errorsFor(t)));if(!i)return this.formatAndAdd(t,r),!1}catch(e){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+t.id+", check the '"+r.method+"' method.",e),e}}if(!o)return this.objectLength(a)&&this.successList.push(t),!0},customDataMessage:function(t,i){return e(t).data("msg"+i.charAt(0).toUpperCase()+i.substring(1).toLowerCase())||e(t).data("msg")},customMessage:function(e,t){var i=this.settings.messages[e];return i&&(i.constructor===String?i:i[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]},defaultMessage:function(t,i){return this.findDefined(this.customMessage(t.name,i),this.customDataMessage(t,i),!this.settings.ignoreTitle&&t.title||void 0,e.validator.messages[i],"<strong>Warning: No message defined for "+t.name+"</strong>")},formatAndAdd:function(t,i){var n=this.defaultMessage(t,i.method),r=/\$?\{(\d+)\}/g;"function"==typeof n?n=n.call(this,i.parameters,t):r.test(n)&&(n=e.validator.format(n.replace(r,"{$1}"),i.parameters)),this.errorList.push({message:n,element:t,method:i.method}),this.errorMap[t.name]=n,this.submitted[t.name]=n},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){var e,t,i;for(e=0;this.errorList[e];e++)i=this.errorList[e],this.settings.highlight&&this.settings.highlight.call(this,i.element,this.settings.errorClass,this.settings.validClass),this.showLabel(i.element,i.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(e=0;this.successList[e];e++)this.showLabel(this.successList[e]);if(this.settings.unhighlight)for(e=0,t=this.validElements();t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return e(this.errorList).map(function(){return this.element})},showLabel:function(t,i){var n,r,a,s=this.errorsFor(t),o=this.idOrName(t),l=e(t).attr("aria-describedby");s.length?(s.removeClass(this.settings.validClass).addClass(this.settings.errorClass),s.html(i)):(n=s=e("<"+this.settings.errorElement+">").attr("id",o+"-error").addClass(this.settings.errorClass).html(i||""),this.settings.wrapper&&(n=s.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(n):this.settings.errorPlacement?this.settings.errorPlacement(n,e(t)):n.insertAfter(t),s.is("label")?s.attr("for",o):0===s.parents("label[for='"+o+"']").length&&(a=s.attr("id").replace(/(:|\.|\[|\])/g,"\\$1"),l?l.match(new RegExp("\\b"+a+"\\b"))||(l+=" "+a):l=a,e(t).attr("aria-describedby",l),(r=this.groups[t.name])&&e.each(this.groups,function(t,i){i===r&&e("[name='"+t+"']",this.currentForm).attr("aria-describedby",s.attr("id"))}))),!i&&this.settings.success&&(s.text(""),"string"==typeof this.settings.success?s.addClass(this.settings.success):this.settings.success(s,t)),this.toShow=this.toShow.add(s)},errorsFor:function(t){var i=this.idOrName(t),n=e(t).attr("aria-describedby"),r="label[for='"+i+"'], label[for='"+i+"'] *";return n&&(r=r+", #"+n.replace(/\s+/g,", #")),this.errors().filter(r)},idOrName:function(e){return this.groups[e.name]||(this.checkable(e)?e.name:e.id||e.name)},validationTargetFor:function(t){return this.checkable(t)&&(t=this.findByName(t.name)),e(t).not(this.settings.ignore)[0]},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(t){return e(this.currentForm).find("[name='"+t+"']")},getLength:function(t,i){switch(i.nodeName.toLowerCase()){case"select":return e("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return t.length},depend:function(e,t){return!this.dependTypes[_typeof(e)]||this.dependTypes[_typeof(e)](e,t)},dependTypes:{boolean:function(e){return e},string:function(t,i){return!!e(t,i.form).length},function:function(e,t){return e(t)}},optional:function(t){var i=this.elementValue(t);return!e.validator.methods.required.call(this,i,t)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,this.pending[e.name]=!0)},stopRequest:function(t,i){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[t.name],i&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(e(this.currentForm).submit(),this.formSubmitted=!1):!i&&0===this.pendingRequest&&this.formSubmitted&&(e(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t){return e.data(t,"previousValue")||e.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,i){t.constructor===String?this.classRuleSettings[t]=i:e.extend(this.classRuleSettings,t)},classRules:function(t){var i={},n=e(t).attr("class");return n&&e.each(n.split(" "),function(){this in e.validator.classRuleSettings&&e.extend(i,e.validator.classRuleSettings[this])}),i},attributeRules:function(t){var i,n,r={},a=e(t),s=t.getAttribute("type");for(i in e.validator.methods)"required"===i?(""===(n=t.getAttribute(i))&&(n=!0),n=!!n):n=a.attr(i),/min|max/.test(i)&&(null===s||/number|range|text/.test(s))&&(n=Number(n)),n||0===n?r[i]=n:s===i&&"range"!==s&&(r[i]=!0);return r.maxlength&&/-1|2147483647|524288/.test(r.maxlength)&&delete r.maxlength,r},dataRules:function(t){var i,n,r={},a=e(t);for(i in e.validator.methods)void 0!==(n=a.data("rule"+i.charAt(0).toUpperCase()+i.substring(1).toLowerCase()))&&(r[i]=n);return r},staticRules:function(t){var i={},n=e.data(t.form,"validator");return n.settings.rules&&(i=e.validator.normalizeRule(n.settings.rules[t.name])||{}),i},normalizeRules:function(t,i){return e.each(t,function(n,r){if(!1!==r){if(r.param||r.depends){var a=!0;switch(_typeof(r.depends)){case"string":a=!!e(r.depends,i.form).length;break;case"function":a=r.depends.call(i,i)}a?t[n]=void 0===r.param||r.param:delete t[n]}}else delete t[n]}),e.each(t,function(n,r){t[n]=e.isFunction(r)?r(i):r}),e.each(["minlength","maxlength"],function(){t[this]&&(t[this]=Number(t[this]))}),e.each(["rangelength","range"],function(){var i;t[this]&&(e.isArray(t[this])?t[this]=[Number(t[this][0]),Number(t[this][1])]:"string"==typeof t[this]&&(i=t[this].replace(/[\[\]]/g,"").split(/[\s,]+/),t[this]=[Number(i[0]),Number(i[1])]))}),e.validator.autoCreateRanges&&(null!=t.min&&null!=t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),null!=t.minlength&&null!=t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t},normalizeRule:function(t){if("string"==typeof t){var i={};e.each(t.split(/\s/),function(){i[this]=!0}),t=i}return t},addMethod:function(t,i,n){e.validator.methods[t]=i,e.validator.messages[t]=void 0!==n?n:e.validator.messages[t],i.length<3&&e.validator.addClassRules(t,e.validator.normalizeRule(t))},methods:{required:function(t,i,n){if(!this.depend(n,i))return"dependency-mismatch";if("select"===i.nodeName.toLowerCase()){var r=e(i).val();return r&&r.length>0}return this.checkable(i)?this.getLength(t,i)>0:e.trim(t).length>0},email:function(e,t){return this.optional(t)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)},url:function(e,t){return this.optional(t)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},date:function(e,t){return this.optional(t)||!/Invalid|NaN/.test(new Date(e).toString())},dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(e)},number:function(e,t){return this.optional(t)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},creditcard:function(e,t){if(this.optional(t))return"dependency-mismatch";if(/[^0-9 \-]+/.test(e))return!1;var i,n,r=0,a=0,s=!1;if((e=e.replace(/\D/g,"")).length<13||e.length>19)return!1;for(i=e.length-1;i>=0;i--)n=e.charAt(i),a=parseInt(n,10),s&&(a*=2)>9&&(a-=9),r+=a,s=!s;return r%10==0},minlength:function(t,i,n){var r=e.isArray(t)?t.length:this.getLength(t,i);return this.optional(i)||r>=n},maxlength:function(t,i,n){var r=e.isArray(t)?t.length:this.getLength(t,i);return this.optional(i)||r<=n},rangelength:function(t,i,n){var r=e.isArray(t)?t.length:this.getLength(t,i);return this.optional(i)||r>=n[0]&&r<=n[1]},min:function(e,t,i){return this.optional(t)||e>=i},max:function(e,t,i){return this.optional(t)||e<=i},range:function(e,t,i){return this.optional(t)||e>=i[0]&&e<=i[1]},equalTo:function(t,i,n){var r=e(n);return this.settings.onfocusout&&r.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){e(i).valid()}),t===r.val()},remote:function(t,i,n){if(this.optional(i))return"dependency-mismatch";var r,a,s=this.previousValue(i);return this.settings.messages[i.name]||(this.settings.messages[i.name]={}),s.originalMessage=this.settings.messages[i.name].remote,this.settings.messages[i.name].remote=s.message,n="string"==typeof n&&{url:n}||n,s.old===t?s.valid:(s.old=t,r=this,this.startRequest(i),(a={})[i.name]=t,e.ajax(e.extend(!0,{url:n,mode:"abort",port:"validate"+i.name,dataType:"json",data:a,context:r.currentForm,success:function(n){var a,o,l,u=!0===n||"true"===n;r.settings.messages[i.name].remote=s.originalMessage,u?(l=r.formSubmitted,r.prepareElement(i),r.formSubmitted=l,r.successList.push(i),delete r.invalid[i.name],r.showErrors()):(a={},o=n||r.defaultMessage(i,"remote"),a[i.name]=s.message=e.isFunction(o)?o(t):o,r.invalid[i.name]=!0,r.showErrors(a)),s.valid=u,r.stopRequest(i,u)}},n)),"pending")}}}),e.format=function(){throw"$.format has been deprecated. Please use $.validator.format instead."};var t,i={};e.ajaxPrefilter?e.ajaxPrefilter(function(e,t,n){var r=e.port;"abort"===e.mode&&(i[r]&&i[r].abort(),i[r]=n)}):(t=e.ajax,e.ajax=function(n){var r=("mode"in n?n:e.ajaxSettings).mode,a=("port"in n?n:e.ajaxSettings).port;return"abort"===r?(i[a]&&i[a].abort(),i[a]=t.apply(this,arguments),i[a]):t.apply(this,arguments)}),e.extend(e.fn,{validateDelegate:function(t,i,n){return this.bind(i,function(i){var r=e(i.target);if(r.is(t))return n.apply(r,arguments)})}})});var ckEditorAPI=null,isBriefingPage=window.isBriefingVFPage||-1!==window.location.pathname.indexOf("briefing/list_briefings");function FormBuilder(){var e={fieldCollection:{},formElements:{},currentUserRoleUuid:{},init:function(e,t){this.formElements=t,this.fieldCollection=e,this.currentUserRoleUuid=envDetails.role_uuid},applyRoleRule:function(e){var t=this.fieldCollection[e.attr("name")],i=_.head(t.rules_with_values);if(i&&"role"==i.type){var n=i.conditions;this.processRuleConditions(n,e,this.currentUserRoleUuid,t)}},showElem:function(e,t){e.closest(".form-group").removeClass("hide");var i=e.val();if((!i||"-"===i||_.isArray(i)&&""==_.head(i))&&e.data("previous-value")){var n=e.data("previous-value");e.val(n).trigger("change")}t&&e.attr("required",!0)},hideElem:function(e){var t=e.attr("name");e.closest(".form-group").addClass("hide"),e.removeAttr("required"),!e.val()||"-"===e.val()||_.isArray(e.val())&&""==_.head(e.val())||e.data("previous-value",e.val()),e.val("").trigger("change"),this.applyFieldRule({source:t,action:"cancelRule"})},handleRulesAfterFormLoad:function(){this.formElements.map(function(e,t){var i=$(t);if(this.applyRoleRule(i),!i.hasClass("hide")){var n=i.is("input, select")?i.val():i.html();this.applyFieldRule({source:i.attr("name"),value:n})}else this.applyFieldRule({source:i.attr("name"),action:"cancelRule"})}.bind(this))},setupListenersForRule:function(){var e=this;this.formElements.on("change",function(t){var i=$(this),n=i.is("input, select")?i.val():i.html();e.applyFieldRule({source:i.attr("name"),value:n})})},applyFieldRule:function(e){this.formElements.map(function(t,i){var n=$(i),r=this.fieldCollection[n.attr("name")],a=_.head(r.rules_with_values);if(a&&e.source==a.source){var s=a.conditions,o=$('[name="'+e.source+'"]').parent(".form-group").hasClass("hide");e.action&&"cancelRule"==e.action||o?this.hideElem(n):this.processRuleConditions(s,n,e.value,r)}}.bind(this))},processRuleConditions:function(e,t,i,n){var r=!1;e.forEach(function(e){r||(r=this.processRuleCondition(e,t,i,n))}.bind(this)),0==r&&this.hideElem(t)},processRuleCondition:function(e,t,i,n){var r=!1;return this.evalOperator(e.operator,i,e.values_to_check)&&("show"==e.action?this.processShowAction(t,n,e):this.processHideAction(t),r=!0),r},processShowAction:function(e,t,i){if(e.is("select")&&!_.isEmpty(i.values_to_display)){var n=e.val();e.html(this.fieldCollection.getFieldTemplate(t,i.values_to_display));var r="#"+t.field_name,a=$(r).data("previous-value");a&&(a=_.flatten([a]),$(r).data("previous-value",a.filter(function(e){return i.values_to_display.includes(e)}))),this.handleAllowingAddingNewTextOption(e,t,n),e.val(n).trigger("change")}this.showElem(e,t.required)},handleAllowingAddingNewTextOption:function(e,t,i){var n=_.isArray(i)?i:[i],r=_.filter(n,function(e){return!1===_.includes(t.values,e)&&!_.isNull(e)});t.canSelectOthers&&e.select2({tags:r})},processHideAction:function(e){this.hideElem(e)},evalOperator:function(e,t,i){return"is"==e?this.handle_is(t,i):this.handle_is_not(t,i)},inOperator:function(e,t){return _.isArray(t)&&-1!=t.indexOf(e)},handle_is:function(e,t){return this.inOperator(e,t)},handle_is_not:function(e,t){return!this.inOperator(e,t)}};_.assign(this,e)}function getCkEditorAPI(e){return{CKEDITOR_CONFIGS:{toolbarGroups:[{name:"basicstyles",groups:["basicstyles"]},{name:"styles",groups:["styles"]},{name:"links",groups:["links"]},{name:"clipboard",groups:["undo"]},{name:"forms",groups:["list"]}],removeButtons:"Subscript,Superscript,Anchor,PasteFromWord,PasteText,Paste,Copy,Cut,Styles",format_tags:"p;h1;h2;h3;pre",removeDialogTabs:"image:advanced;link:advanced",removePlugins:"elementspath,a11yHelp,about,paste,magicline",linkShowTargetTab:!1,linkShowAdvancedTab:!1,resize_enabled:!0,enterMode:e.ENTER_BR,height:72,resize_dir:"both"},onChange:function(t,i){e.instances[t].on("change",i)},setupEditorConfigs:function(){var t=envDetails.isMultiEventSummit?"/assets/ckeditor/":envDetails.urlPrefix+"/assets/ckeditor/";e.basePath=window.CKEDITOR_BASEPATH||t,e.on("dialogDefinition",function(t){t.data.definition.resizable=e.DIALOG_RESIZE_NONE}),e.on("instanceReady",function(e){var t=e.editor;if(void 0!==t){(t.dataProcessor&&t.dataProcessor.htmlFilter).addRules({elements:{a:function(e){_extends(e.attributes,{target:"_blank",rel:"noopener noreferrer"})}}});var i=t.document.getBody(),n=t.createRange();n&&(n.moveToElementEditablePosition(i,!1),n.select())}})},initialiseCKEditor:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.onChange,r=i.placeholder;this.CKEDITOR_CONFIGS.editorplaceholder=r,e.replace(t,this.CKEDITOR_CONFIGS),this.setupEditorConfigs(),n&&this.onChange(t,n)},getData:function(t){return e.instances[t].getData()},setData:function(t,i){e.instances[t].setData(i)},setReadOnly:function(t,i){e.instances[t].setReadOnly(i)}}}ckEditorAPI=getCkEditorAPI(window.CKEDITOR),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){e.validator.setDefaults({ignore:":hidden:not(.chosen-select)",highlight:function(t){e(t).closest(".form-group").addClass("has-error")},unhighlight:function(t){e(t).closest(".form-group").removeClass("has-error")},errorElement:"span",errorClass:"help-block error-class",errorPlacement:function(t,i){e(i).hasClass("chosen-select")?i.parent().append(t):i.parent(".input-group").length?t.insertAfter(i.parent()):t.insertAfter(i)}})}),function(e){"function"==typeof define&&define.amd?define(["handlebars/runtime"],e):e(Handlebars)}(function(e){e.registerHelper("isTrue",function(e,t){return e&&e.toBoolean()?t.fn(this):t.inverse(this)}),e.registerHelper("isFalse",function(e,t){return e&&e.toBoolean()?t.inverse(this):t.fn(this)}),e.registerHelper("ifObject",function(e,t){return"object"===_typeof(e)?t.fn(this):t.inverse(this)}),e.registerHelper("compare_text",function(e,t,i){return e===t?i.fn(this):i.inverse(this)}),e.registerHelper("t",function(t,i){var n=i18n.t(t,{label:i});return new e.SafeString(n)}),e.registerHelper("check_multiselects",function(e,t){return"multiselect_dropdown"==e?t.fn(this):t.inverse(this)})}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){var t={default_options:"custom_form",autoTriggerRules:!0},i=function(t,i){this.settings=i;var n=new FormBuilder;function r(e,t,i){var n=_.cloneDeep(t);_.isEmpty(i)||(n.values=i);var r=n.type||"textfield",a=e[r],s=HandlebarsTemplates[r];n.currencyType=a.currencyType&&a.currencyType(),n.isSolidElement=!0,n.isEbc=isBriefingPage;var o=s(n);return a.postInstantiate&&a.postInstantiate(n),o}function a(){return e("input:not(.js-disabled-by-default), select:not(.js-disabled-by-default), textarea:not(.js-disabled-by-default)",t)}var s={textfield:{tag_name:"input",trigger:!1},numberfield:{tag_name:"input",trigger:!1},textarea:{tag_name:"textarea",trigger:!1},dropdown:{tag_name:"select",trigger:!0},multiselect_dropdown:{tag_name:"select",trigger:!0},datefield:{tag_name:"input",trigger:!1},timefield:{tag_name:"input",trigger:!1},checkbox:{tag_name:"input",trigger:!1}};return{init:function(a){var s={};i.fieldCollection&&(t.empty(),i.fieldCollection.map(function(e){if(!a||function(e,t){var i=window.envDetails.custom_form_field_tags[t].show_untagged_fields;return e.tags&&e.tags.length&&!!_.includes(e.tags,t)||i}(e,a)){var n=r(defaults[i.default_options],e);t.append(n),"textarea"!==e.type||isBriefingPage||ckEditorAPI.initialiseCKEditor(e.field_name,{placeholder:e.placeholder}),s[e.field_name]=e,s.getFieldTemplate=_.partial(r,defaults[i.default_options])}}),window.formElements=t.find("input:not(.js-conference-type,.checkbox-group-option), select,.js-textarea, .header_section, .page-break, .group-checkbox"),n.init(s,window.formElements),n.setupListenersForRule(),e(".duplicate-remove-btn").addClass("hide"),i.autoTriggerRules&&n.handleRulesAfterFormLoad())},setValue:function(t,i){var n=e('[name="'+t+'"]'),r=n.parent();r.hasClass("checkbox")?"true"===i&&n.prop("checked","checked"):r.hasClass("conference-container")?n.html(i):(n.val(i),"undefined"!=typeof jiffle&&"meeting_with"===t&&n.prop("disabled",""!==i))},getValues:function(){var i={};return e("input:not(.js-conference-type, .checkbox-group-option),select,.js-textarea,textarea,.group-checkbox",t).each(function(t,n){var r,a=e(n),s=a.parent(),o=e(n).attr("name");void 0!==o&&(s.hasClass("checkbox")?r=a.prop("checked")?a.val():null:s.hasClass("checkbox-group")?(r=[],e('input[type="checkbox"]:checked',a).each(function(){r.push(e(this).val())}),r=r.length?r:[""]):s.hasClass("conference-container")?r=a.html():a.hasClass("js-textarea")&&!isBriefingPage?r=ckEditorAPI.getData(o):(r=a.val(),(a.is("input")||a.is("textarea")&&isBriefingPage)&&(r=n.hasAttribute("number_field")&&isNaN(r)?"":r)),i[o]=r)}),i},setValues:function(n){n.hasOwnProperty("meeting_with")&&(_.isEmpty(n.custom_fields)&&(n.custom_fields={}),n.custom_fields.meeting_with=n.meeting_with),n.custom_fields&&n.custom_fields.currency_field&&"undefined"==typeof jiffle&&(n.custom_fields.currency_field=window.defaults.custom_form.currencyfield.getFormattedCurrency(n.custom_fields.currency_field));var r=n.custom_fields||{};e("input:not(.js-conference-type, .checkbox-group-option),select,textarea,.js-textarea,.group-checkbox",t).each(function(t,n){var a=e(n),s=a.parent(),o=a.attr("name"),l=r[o];if(a.data("previous-value",""),void 0===l&&(l=a.data("default-value")),a.hasClass("js-textarea")&&!isBriefingPage&&ckEditorAPI.setData(o,l),s.hasClass("conference-container")&&(l?(s.find(".js-conference-type").trigger("click"),"edit"===window.mode&&s.find(".form-control").removeClass("hide")):(s.find(".js-conference-type").prop("checked",!1),s.find(".form-control").addClass("hide")),a.html(l)),s.hasClass("checkbox"))void 0!==l&&l.toBoolean()&&a.prop("checked",!!l);else if(s.hasClass("checkbox-group"))void 0!==l&&(e('input[type="checkbox"][name="option-'.concat(o,'"]'),a).prop("checked",!1),"string"==typeof l&&""!==l?e('input[type="checkbox"][value="'.concat(l,'"]'),a).prop("checked",!0):Array.isArray(l)&&l.forEach(function(t){e('input[type="checkbox"][value="'.concat(t,'"]'),a).prop("checked",!0)}));else{if(a.is("select")){var u=!0;l instanceof Array||(l=[l],u=!1);var d=i.fieldCollection,c=!!(_.find(d,{field_name:a.attr("id")})||{}).pleaseSelect;l.forEach(function(t){var i=t;t&&t.constructor===String&&(i=t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')),i&&0===a.find('option[value="'+i+'"]').length?a.append(e("<option data-select2-tag='true' />").val(t).text(t)):_.isUndefined(t)&&!1===c&&(u=!0,l=a.find("option:first-child").val())}),a.val((u?l:l[0])||void 0),a.trigger("change")}else l=n.hasAttribute("number_field")&&isNaN(l)?"":l,a.val(l),a.trigger("change");"undefined"!=typeof jiffle&&"meeting_with"===o&&a.prop("disabled",""!==l)}})},afterLoad:function(){n.handleRulesAfterFormLoad()},setFormToReadOnly:function(){a().each(function(t,i){(i=e(i)).prop("disabled",i.val()||!i.prop("required"))})},resetFormToReadOnly:function(){a().prop("disabled",!1)},isFormValid:function(i){return e(".form-group select",t).each(function(t,i){var n,r=e(i);r.parent(),void 0!==e(i).attr("name")&&((n=r.val())instanceof Array?n.forEach(function(e,t){"-"===e&&(n[t]="")}):n="-"===n?"":n,r.val(n))}),i.valid()},clearValues:function(){e("input:not(.js-conference-type),select,textarea, .js-textarea",t).each(function(t,i){var n=e(i),r=n.parent();void 0!==e(i).attr("name")&&(r.hasClass("checkbox")?n.prop("checked",!1):"multiselect_dropdown"===n.attr("type")||"dropdown"===n.attr("type")?n.val(null).trigger("change"):r.hasClass("conference-container")?n.html(""):n.val(""))})},copyValues:function(i){_.forEach(i,function(i){!function(i,n){var r=n.value instanceof Array,a=r?n.value:[n.value];if("checkbox"===n.type)r?a.forEach(function(i){e(t).find('input[name="option-'.concat(n.field_id,'"][value="').concat(i,'"]')).prop("checked",!0)}):e(t).find('input[id="'.concat(n.field_id,'"][value="').concat(a,'"]')).prop("checked",!0);else{var s=e(t).find(i.tag_name+"#"+n.field_id).val(n.value);"dropdown"!==n.type&&"multiselect_dropdown"!==n.type||!s.data("remote-call")||(a.forEach(function(t){t&&0===s.find('option[value="'+t+'"]').length&&s.append(e("<option data-select2-tag='true' />").val(t).text(t))}),s.val((r?a:a[0])||null)),i.trigger&&s.trigger("change")}}(s[i.type]||{},i)})}}};e.fn.formRenderer=function(n){var r=e.extend({},n,t);return new i(e(this),r)}}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){var t={default_options:"custom_form"};e.fn.formViewRenderer=function(i){var n=e.extend({},i,t);return new function(t,i){var n=new FormBuilder;return{init:function(){var r={},a=defaults[i.default_options];if(i.fieldCollection){t.empty(),i.fieldCollection.map(function(e){var i=e.type||"textfield";a[i],e.showAsHtmlContent="header"===e.widget;var n=(0,HandlebarsTemplates.view_field)(e);t.append(n),r[e.field_name]=e}),e(".duplicate-remove-btn").addClass("hide");var s=t.find(".field-value-label, .field-value-list");n.init(r,s),n.setupListenersForRule()}},getValues:function(){var i={};return e("input:not(.js-conference-type),select,textarea,.js-textarea",t).each(function(t,n){var r=e(n).parent(),a=e(n).attr("name");if(void 0!==a){var s=e(n).val()||"";r.hasClass("checkbox")?s=n.prop("checked"):r.hasClass("conference-container")&&(s=n.text());var o=e("<div>").text(s).html();i[a]=o}}),i},setValues:function(i){i.custom_fields.meeting_with=i.meeting_with||"";var n=i.custom_fields||{};i.custom_fields&&i.custom_fields.currency_field&&"undefined"==typeof jiffle&&(i.custom_fields.currency_field=window.defaults.custom_form.currencyfield.getFormattedCurrency(i.custom_fields.currency_field)),e(".field-value-label",t).each(function(t,i){var r=(i=e(i)).attr("name"),a=i.parent().data("field-type"),s=n[r]||"",o="";o="conference"===a?s=(s=s.split("<br>")).length&&s.map(function(t,i){var n=e("<div>").text(t).html();return 0===i?"<a href="+n+" target=_blank>"+n+"</a>":n}).join("<br>"):e("<div>").text(s).html(),e(i).html(o)}),e(".field-value-list",t).each(function(t,i){var r=(i=e(i)).attr("name"),a="",s=n[r];s=s instanceof Array?s:[s],_.forEach(s,function(t,i){var n=e("<div>").text(t).html();a+="<li>"+n+"</li>"}),i.html(a)})},afterLoad:function(){n.handleRulesAfterFormLoad()}}}(e(this),n)}}),function(e){var t=[],i=!1,n=!1,r={interval:250,force_process:!1},a=e(window),s=[];function o(){n=!1;for(var i=0,r=t.length;i<r;i++){var a=(l=t[i],e(l).filter(function(){return e(this).is(":appeared")}));if(a.trigger("appear",[a]),s[i]){var o=s[i].not(a);o.trigger("disappear",[o])}s[i]=a}var l}e.expr[":"].appeared=function(t){var i=e(t);if(!i.is(":visible"))return!1;var n=a.scrollLeft(),r=a.scrollTop(),s=i.offset(),o=s.left,l=s.top;return l+i.height()>=r&&l-(i.data("appear-top-offset")||0)<=r+a.height()&&o+i.width()>=n&&o-(i.data("appear-left-offset")||0)<=n+a.width()},e.fn.extend({appear:function(a){var l=e.extend({},r,a||{}),u=this.selector||this;if(!i){var d=function(){n||(n=!0,setTimeout(o,l.interval))};e(window).scroll(d).resize(d),i=!0}return l.force_process&&setTimeout(o,l.interval),function(e){t.push(e),s.push()}(u),e(u)}}),e.extend({force_appear:function(){return!!i&&(o(),!0)}})}("undefined"!=typeof module?require("jquery"):jQuery);