{"version":3,"sources":["webpack:///webpack/bootstrap 1c620c80e17b918674e8?5b6d","webpack:///delegated ./node_modules/angular/index.js from dll-reference vendor_lib?ee8b","webpack:///external \"vendor_lib\"?188e","webpack:///./app/app.module.js","webpack:///./app/styles.scss","webpack:///delegated ./app/vendor.js from dll-reference vendor_lib","webpack:///./app/common/directives/docGenCommonDirectives.module.js","webpack:///./app/common/directives/attachments/attachments.directive.js","webpack:///./app/common/directives/attachments/attachments.listNADialog.tpl.html","webpack:///./app/common/directives/attachments/attachments.addUrlDialog.tpl.html","webpack:///./app/common/directives/attachments/attachments.tpl.html","webpack:///./app/common/directives/contenteditable/contenteditable.directive.js","webpack:///./app/common/directives/contextMenu/contextMenu.directive.js","webpack:///./app/common/directives/contextMenu/contextMenu.tpl.html","webpack:///./app/common/directives/editableTextField/editableTextField.directive.js","webpack:///./app/common/directives/editableTextField/editableTextField.tpl.html","webpack:///./app/common/directives/email/email.directive.js","webpack:///./app/common/directives/email/email.listNADialog.tpl.html","webpack:///./app/common/directives/email/email.tpl.html","webpack:///./app/common/directives/focusAndSelect/focusAndSelect.directive.js","webpack:///./app/common/directives/globalHeader/globalHeader.directive.js","webpack:///./app/common/directives/globalHeader/globalHeader.tpl.html","webpack:///./app/common/directives/globalSubHeader/globalSubHeader.directive.js","webpack:///./app/common/directives/globalSubHeader/globalSubHeader.tpl.html","webpack:///./app/common/directives/pageContainer/pageContainer.directive.js","webpack:///./app/common/directives/pageContainer/pageContainer.tpl.html","webpack:///./app/common/directives/pageNotification/pageNotification.directive.js","webpack:///./app/common/directives/pageNotification/pageNotification.tpl.html","webpack:///./app/common/directives/proposalsList/proposalsList.directive.js","webpack:///./app/common/directives/proposalsList/proposalsList.dialog.tpl.html","webpack:///./app/common/directives/proposalsList/proposalsList.tpl.html","webpack:///./app/common/directives/preview/preview.directive.js","webpack:///./app/common/directives/preview/preview.html","webpack:///./app/common/directives/docGenCommonServices.module.js","webpack:///./app/common/services/globalService.js","webpack:///./app/common/assets/images/doc.png","webpack:///./app/common/assets/images/merged-doc.png","webpack:///./app/common/assets/images/merged-pdf.png","webpack:///./app/common/assets/images/pdf.png","webpack:///./app/common/assets/images/xls.png","webpack:///./app/common/assets/images/misc-info.png","webpack:///./app/common/services/uploadService.js","webpack:///./app/common/services/utilitiesService.js","webpack:///./app/common/directives/pageContainer/pageContainer.service.js","webpack:///./app/common/directives/proposalsList/proposalsList.service.js","webpack:///./app/common/directives/preview/preview.service.js","webpack:///./app/common/directives/email/email.service.js","webpack:///./app/common/directives/pageNotification/pageNotification.service.js","webpack:///./app/common/filters/docGen.common.filters.module.js","webpack:///./app/common/filters/reverseFilter.js","webpack:///./app/app.config.js","webpack:///./app/fileNotfound/404.html","webpack:///./app/app.constant.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;;;;;;ACtCA,8C;;;;;;ACAA,6B;;;;;;;;;;;ACAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,EAAC;;;;;;;AC9BD,0C;;;;;;;;;;;;;;;;;;ACAA,8C;;;;;;ACAA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,EAAC;;;;;;;AClBD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,wDAAuD;AACvD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,0BAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;;AAEN;AACA;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,6EAA4E;AAC5E;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,QAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAM;;AAEN;AACA;AACA;AACA;AACA,+BAA8B;AAC9B;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,sBAAqB,8BAA8B;AACnD;AACA;AACA;AACA;AACA,wCAAuC;AACvC;AACA;;AAEA;AACA;AACA;AACA;;AAEA,wBAAuB,qBAAqB;AAC5C;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAM;;AAEN;AACA;AACA;;AAEA;AACA;AACA,OAAM;;AAEN;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;;AAEN,mCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA,yCAAwC;AACxC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,4BAA2B;;AAE3B;AACA;AACA,OAAM;AACN,MAAK;AACL;;AAEA,gDAA+C;;AAE/C;AACA;AACA;;AAEA;AACA,OAAM;AACN;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;;AAEP;AACA,uCAAsC;AACtC,2BAA0B;;AAE1B;AACA;AACA,SAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,OAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAY;AACZ,wBAAuB;AACvB;AACA;AACA,GAAE;AACF,EAAC;;;;;;;AC3mBD,6FAA4F,yBAAyB,yoBAAyoB,eAAe,iMAAiM,qBAAqB,sQAAsQ,qBAAqB,4QAA4Q,eAAe,uUAAuU,+BAA+B,0LAA0L,WAAW,0KAA0K,qBAAqB,4PAA4P,uBAAuB,wB;;;;;;ACAthF,mgBAAkgB,YAAY,yMAAyM,sBAAsB,iKAAiK,cAAc,0UAA0U,gEAAgE,mBAAmB,iCAAiC,GAAG,mBAAmB,4LAA4L,aAAa,2DAA2D,aAAa,uF;;;;;;ACAjoD,6JAA4J,+BAA+B,qNAAqN,wBAAwB,uOAAuO,kBAAkB,8HAA8H,+BAA+B,qyBAAqyB,0CAA0C,udAAud,6BAA6B,+DAA+D,WAAW,+FAA+F,WAAW,0kBAA0kB,uBAAuB,0lBAA0lB,4BAA4B,wD;;;;;;ACA5gH;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,MAAK;AACL;AACA;AACA,GAAE;AACF,EAAC;;;;;;;ACvBD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA,KAAI;AACJ;AACA;;AAEA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA,MAAK;AACL;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,kCAAiC,yBAAyB,EAAE;AAC5D;;AAEA;;AAEA;AACA;AACA;AACA,OAAM;;AAEN;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAM;;AAEN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAsB,sBAAsB;AAC5C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA,SAAQ;AACR;AACA,iCAAgC,SAAS;AACzC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,SAAQ;AACR;;AAEA,sBAAqB,4BAA4B;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,uBAAsB,4BAA4B;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;;AAEA,GAAE;AACF,EAAC,I;;;;;;AC3SD,yGAAwG,iIAAiI,mGAAmG,yBAAyB,KAAK,uBAAuB,e;;;;;;ACAjY;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,GAAE;AACF,EAAC,I;;;;;;ACpED,8GAA6G,OAAO,2EAA2E,OAAO,6GAA6G,wCAAwC,wcAAwc,mBAAmB,mB;;;;;;ACAtzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,oBAAmB,oDAAoD;AACvE;AACA;AACA;AACA;AACA;AACA,iCAAgC,uBAAuB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,mCAAmC;AAChF;AACA;AACA;AACA,OAAM;;AAEN;AACA;AACA;AACA,OAAM;;AAEN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA,gEAA+D,6BAA6B;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,Q;AACA;AACA;;AAEA;AACA;AACA;AACA,Q;AACA;AACA;;AAEA;AACA;AACA,kCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;;AAEA;AACA;AACA;AACA,+CAA8C;AAC9C;AACA,QAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAc;AACd;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,uCAAsC;AACtC;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA,mCAAkC,yBAAyB,6BAA6B,IAAI,QAAQ,IAAI,QAAQ,IAAI,QAAQ,IAAI,gCAAgC,GAAG;;AAEnK;;AAEA;AACA;;AAEA,0BAAyB;AACzB,kCAAiC;AACjC,QAAO;AACP;AACA;;AAEA,sBAAqB,sBAAsB;AAC3C;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,wC;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA,2EAA0E;AAC1E,QAAO;AACP;;AAEA;AACA,gDAA+C,aAAa;AAC5D;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,4CAA2C;AAC3C,oEAAmE;AACnE,uEAAsE;AACtE;AACA;AACA;AACA,SAAQ;AACR;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,SAAQ;AACR;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,U;AACA;AACA,QAAO;AACP;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAU;AACV;AACA;AACA;AACA;AACA,kD;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA,QAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA4C;AAC5C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;;AAEA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAI;;AAEJ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAY;AACZ,wBAAuB;AACvB;AACA;AACA,GAAE;AACF,EAAC;;;;;;;ACvkBD,6FAA4F,yBAAyB,opBAAopB,eAAe,iMAAiM,qBAAqB,sQAAsQ,qBAAqB,4QAA4Q,eAAe,uUAAuU,+BAA+B,8JAA8J,WAAW,0KAA0K,qBAAqB,4PAA4P,sBAAsB,wB;;;;;;ACApgF,6FAA4F,kBAAkB,4cAA4c,WAAW,yUAAyU,WAAW,uFAAuF,YAAY,yjBAAyjB,yBAAyB,8JAA8J,qBAAqB,qFAAqF,qBAAqB,sPAAsP,0BAA0B,2uBAA2uB,4BAA4B,4xBAA4xB,mHAAmH,wDAAwD,6LAA6L,gBAAgB,gaAAga,WAAW,wYAAwY,YAAY,2XAA2X,gCAAgC,8dAA8d,4BAA4B,4EAA4E,qBAAqB,+vBAA+vB,IAAI,oBAAoB,yKAAyK,oBAAoB,4OAA4O,sCAAsC,+DAA+D,YAAY,+PAA+P,4BAA4B,uOAAuO,+BAA+B,+DAA+D,WAAW,grBAAgrB,IAAI,aAAa,wB;;;;;;ACAx6Q;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA,OAAM;AACN;AACA;;AAEA,IAAG;AACH,EAAC,I;;;;;;AC7BD;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,2C;AACA,KAAI;AACJ;AACA;AACA;AACA,MAAK;AACL,K;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAY;AACZ,wBAAuB;AACvB;AACA;;AAEA,GAAE;AACF,EAAC,I;;;;;;ACxCD,4OAA2O,wBAAwB,wD;;;;;;ACAnQ;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAY;AACZ,wBAAuB;AACvB;AACA;;AAEA,GAAE;AACF,EAAC;;;;;;;AC7FD,2WAA0W,cAAc,8C;;;;;;ACAxX;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAY;AACZ,wBAAuB;AACvB;AACA;;AAEA,GAAE;AACF,EAAC,I;;;;;;ACvBD,4V;;;;;;ACAA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAI;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAY;AACZ,wBAAuB;AACvB;AACA;;AAEA,GAAE;AACF,EAAC;;;;;;;ACtED,0CAAyC,eAAe,iEAAiE,kBAAkB,4BAA4B,kBAAkB,wIAAwI,wBAAwB,e;;;;;;ACAzV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,qFAAoF,EAAE;AACtF;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAM;AACN,MAAK;AACL;AACA;AACA,KAAI;;AAEJ;AACA;AACA;;AAEA,6DAA4D;;AAE5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAO;AACP;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP,OAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA,OAAM;;AAEN;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA,QAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ;;AAER;AACA;AACA,OAAM;;AAEN;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB;;AAEvB;AACA;AACA;AACA,6BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;;AAEP;AACA;AACA;AACA,6BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;;AAEP;AACA;AACA,OAAM;AACN,MAAK;AACL;AACA;AACA,2BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA,8EAA6E;AAC7E;AACA;AACA,mDAAkD;AAClD,qDAAoD;AACpD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,sEAAqE,sCAAsC,EAAE;AAC7G;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW;AACX;AACA;AACA,WAAU;AACV;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAU;AACV;AACA;AACA;AACA,YAAW;;AAEX;AACA;AACA;;AAEA;AACA,UAAS;AACT;AACA;;AAEA,sBAAqB,8CAA8C;AACnE,4D;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA,WAAU;AACV,WAAU;AACV;AACA;AACA;AACA,WAAU;AACV;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAI;;AAEJ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAY;AACZ,wBAAuB;AACvB;AACA;AACA,GAAE;AACF,EAAC;;;;;;;ACnlBD,gVAA+U,aAAa,iGAAiG,4BAA4B,iNAAiN,WAAW,oVAAoV,2BAA2B,q0BAAq0B,yBAAyB,8yBAA8yB,eAAe,6SAA6S,2BAA2B,6WAA6W,oBAAoB,0WAA0W,iBAAiB,6WAA6W,oBAAoB,6fAA6f,UAAU,+CAA+C,4BAA4B,+CAA+C,yBAAyB,+CAA+C,4BAA4B,oZAAoZ,0BAA0B,yIAAyI,iBAAiB,yHAAyH,cAAc,wB;;;;;;ACAxjL,oZAAmZ,+BAA+B,qKAAqK,0BAA0B,gHAAgH,6BAA6B,qLAAqL,2BAA2B,sIAAsI,eAAe,kJAAkJ,6CAA6C,4QAA4Q,kCAAkC,gfAAgf,qCAAqC,2MAA2M,6FAA6F,kD;;;;;;ACA74E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA,aAAY;AACZ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAM;AACN;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,2CAA0C;AAC1C;AACA;AACA;AACA;AACA;;AAEA;AACA,+GAA8G,EAAE;AAChH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,yEAAwE;;AAExE;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,2CAA0C;AAC1C;AACA;AACA;AACA;;AAEA;AACA;AACA,2CAA0C;AAC1C;AACA;AACA;AACA;;AAEA;AACA;AACA,2CAA0C;AAC1C;AACA;AACA;AACA;;AAEA;AACA;AACA,2CAA0C;AAC1C;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;;;;;;ACpPD,gMAA+L,gBAAgB,+BAA+B,OAAO,2KAA2K,kFAAkF,cAAc,2HAA2H,gCAAgC,4BAA4B,6BAA6B,yKAAyK,6CAA6C,oKAAoK,YAAY,sKAAsK,mCAAmC,WAAW,YAAY,IAAI,aAAa,uNAAuN,4BAA4B,GAAG,oBAAoB,YAAY,KAAK,IAAI,aAAa,OAAO,qBAAqB,kQAAkQ,uBAAuB,sPAAsP,4BAA4B,oK;;;;;;ACA9rE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,EAAC;;;;;;;ACbD;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,cAAa;AACb;AACA,cAAa;AACb;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,2F;AACA,U;;AAEA;AACA;AACA;AACA,4BAA2B,iBAAiB;AAC5C,+C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,EAAC;;;;;;;ACrFD,6E;;;;;;ACAA,oF;;;;;;ACAA,oF;;;;;;ACAA,6E;;;;;;ACAA,6E;;;;;;ACAA,mF;;;;;;ACAA;AACA;;AAEA,8BAA6B;AAC7B,4BAA2B;AAC3B,yBAAwB;;AAExB;AACA;AACA,6GAA4G;AAC5G;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA,8BAA6B;AAC7B;;AAEA,MAAK;AACL;AACA;AACA;AACA,6BAA4B;AAC5B;AACA;;AAEA;AACA;AACA;AACA;AACA,4BAA2B;AAC3B;;AAEA;AACA;AACA;AACA;AACA,4BAA2B;AAC3B;;AAEA,iDAAgD;AAChD;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,OAAM;AACN,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA,KAAI;AACJ;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,EAAC;;;;;;;ACzGD;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,kCAAiC,GAAG,QAAQ,GAAG;AAC/C;AACA;AACA;AACA;AACA,0CAAyC,GAAG,QAAQ,GAAG;AACvD;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,4DAA2D;AAC3D;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iDAAgD,aAAa;AAC7D;AACA;;AAEA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;;AAEA;AACA;;AAEA;AACA,EAAC;;;;;;;AC1FD;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,EAAC;;;;;;;AC7BD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAa;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,EAAC;;;;;;;ACpCD;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA,cAAa;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,EAAC;;;;;;;ACxCD;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,EAAC;;;;;;;ACrBD;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,EAAC;;;;;;;ACtBD;AACA;;AAEA;AACA;;AAEA,EAAC,I;;;;;;ACND;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;;AAEL,EAAC;;;;;;;ACVD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA,KAAI;;AAEJ;AACA;;AAEA;;AAEA,kCAAiC;AACjC,GAAE;AACF,EAAC,I;;;;;;ACtBD,6e;;;;;;ACAA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA,EAAC,I","file":"app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 1c620c80e17b918674e8","module.exports = (__webpack_require__(3))(2);\n\n\n//////////////////\n// WEBPACK FOOTER\n// delegated ./node_modules/angular/index.js from dll-reference vendor_lib\n// module id = 2\n// module chunks = 0 1","module.exports = vendor_lib;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"vendor_lib\"\n// module id = 3\n// module chunks = 0 1","(function() {\r\n\t'use strict';\r\n\r\n\t//Entry point for all the scss files to this application\r\n\trequire('./styles.scss');\r\n\r\n\trequire('./vendor')();\r\n\trequire('./common/directives/docGenCommonDirectives.module.js');\r\n\trequire('./common/directives/docGenCommonServices.module.js');\r\n\trequire('./common/filters/docGen.common.filters.module.js');\r\n\r\n\tmodule.exports = angular.module('docGen', [\r\n\t\t\t'DocGenSetting',\r\n\t\t\t'docGen.adminServices',\r\n\t\t\t'docGen.commonFilters',\r\n\t\t\t'docGenCommonDirectives',\r\n\t\t\t'docGenCommonServices',\r\n\t\t\t'ui.router',\r\n\t\t\t'ui.bootstrap',\r\n\t\t\t'ngLodash',\r\n\t\t\t'ngSanitize',\r\n\t\t\t'smart-table',\r\n\t\t\t'ngFileUpload',\r\n\t\t\t'dndLists',\r\n\t\t\t'ngMaterial'\t\t\r\n\t\t])\r\n\t\t.config(require('./app.config.js'))\r\n\t\t// .service('docGenC', require('./common/directives/pageContainer/services/pageContainerService.js'))\t\t\r\n\t\t.constant('docGenConstants', require('./app.constant.js'));\r\n\r\n})();\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/app.module.js\n// module id = 9\n// module chunks = 1","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/styles.scss\n// module id = 10\n// module chunks = 1","module.exports = (__webpack_require__(3))(1);\n\n\n//////////////////\n// WEBPACK FOOTER\n// delegated ./app/vendor.js from dll-reference vendor_lib\n// module id = 23\n// module chunks = 1","(function() {\r\n\t'use strict';\r\n\r\n\tmodule.exports = angular.module('docGenCommonDirectives', [])\r\n\r\n\t\t.directive('attachments', require('./attachments/attachments.directive.js'))\r\n\t\t.directive('contenteditable', require('./contenteditable/contenteditable.directive.js'))\r\n\t\t.directive('contextMenu', require('./contextMenu/contextMenu.directive.js'))\r\n\t\t.directive('editableTextField', require('./editableTextField/editableTextField.directive.js'))\r\n\t\t.directive('email', require('./email/email.directive.js'))\r\n\t\t.directive('focusAndSelect', require('./focusAndSelect/focusAndSelect.directive.js'))\r\n\t\t.directive('globalHeader', require('./globalHeader/globalHeader.directive.js'))\r\n\t\t.directive('globalSubHeader', require('./globalSubHeader/globalSubHeader.directive.js'))\r\n\t\t.directive('pageContainer', require('./pageContainer/pageContainer.directive.js'))\r\n\t\t.directive('pageNotification', require('./pageNotification/pageNotification.directive.js'))\r\n\t\t.directive('proposalsList', require('./proposalsList/proposalsList.directive.js'))\r\n\t\t.directive('preview', require('./preview/preview.directive.js'));\r\n\r\n})();\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/common/directives/docGenCommonDirectives.module.js\n// module id = 24\n// module chunks = 1","(function() {\r\n\t'use strict';\r\n\tmodule.exports = [function() {\r\n\t\tvar attachmentsController;\r\n\r\n\t\tattachmentsController = function(systemConstants,\r\n\t\t\t\t\t\t\t\t\t\t\t$scope,\r\n\t\t\t\t\t\t\t\t\t\t\t$uibModal,\r\n\t\t\t\t\t\t\t\t\t\t\t_,\r\n\t\t\t\t\t\t\t\t\t\t\tRemoteService,\r\n\t\t\t\t\t\t\t\t\t\t\ti18nService,\r\n\t\t\t\t\t\t\t\t\t\t\tProposalsListService,\r\n\t\t\t\t\t\t\t\t\t\t\tPageContainerService,\r\n\t\t\t\t\t\t\t\t\t\t\tPageNotificationService,\r\n\t\t\t\t\t\t\t\t\t\t\tGlobalService,\r\n\t\t\t\t\t\t\t\t\t\t\tPreviewService,\r\n                                            UploadService,\r\n                                            UtilitiesService) {\r\n\t\t\tvar vm = this;\r\n\t\t\tvar tplDialogSize = 'lg';\r\n\t\t\tvar urlDialogSize = 'md';\r\n\t\t\tvar currentProposalId = GlobalService.currentProposalId;\r\n\t\t\tvar notificationTimeout = 5000;\r\n\t\t\tvar isFileEnabled = systemConstants.docGenCustomSettings.isFileEnabled;\r\n\r\n\t\t\tvm.labels = i18nService.CustomLabel;\r\n\t\t\tvm.mergeFiles = [];\r\n\t\t\tvm.attachFiles = [];\r\n\t\t\tvm.invalidFiles = [];\r\n\t\t\tvm.selectedNAFiles = [];\r\n\t\t\tvm.fileValidity = true;\r\n\t\t\tvm.collatedDocs = false;\r\n\t\t\tvm.selectionIsNotPdf = false;\r\n\t\t\tvm.noGeneratedDocYet = true;\r\n\t\t\tvm.fileUploadSupport = UtilitiesService.deviceInfo.isFileInputSupported;\r\n\t\t\tvm.isMobileIos = UtilitiesService.deviceInfo.isMobileIos;\r\n\t\t\t\r\n\t\t\tvar _addAttachmentInfo = function(attachmentInfo, bucket) {\r\n\t\t\t\tvar fileSize = attachmentInfo.BodyLength / 1000000; // MBs\r\n\t\t\t\tvar fileType = attachmentInfo.ContentType;\r\n\r\n\t\t\t\tif (fileSize > 4 || !GlobalService.isAcceptedFileType(fileType))\r\n\t\t\t\t{\r\n\t\t\t\t\tPageNotificationService.hasPageNotification = true;\r\n\t\t\t\t\tPageNotificationService.alert = {\r\n\t\t\t\t\t\ttype: 'danger',\r\n\t\t\t\t\t\tmessage: vm.labels.AcceptedDocgenFileFormats,\r\n\t\t\t\t\t\ttimeout: undefined\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tPreviewService.attemptToMerge = true;\r\n\t\t\t\t\tvar obj = {\r\n\t\t\t\t\t\tRecordId: attachmentInfo.RecordId,\r\n\t\t\t\t\t\tTitle: attachmentInfo.Title,\r\n\t\t\t\t\t\tisCollated: attachmentInfo.isCollated\r\n\t\t\t\t\t};\r\n\t\t\t\t\tPageContainerService.mergeFilesAttachmentInfo.push(obj);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (PreviewService.selectionIsNotPdf && !PreviewService.goForPDF && (attachmentInfo.ContentType === \"application/pdf\" || attachmentInfo.ContentType === \"PDF\"))\r\n\t\t\t\t{\r\n\t\t\t\t\tPreviewService.goForPDF = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar object = {\r\n\t\t\t\t\tlastModified: '',\r\n\t\t\t\t\tlastModifiedDate: {},\r\n\t\t\t\t\tname: attachmentInfo.Title,\r\n\t\t\t\t\tsize: attachmentInfo.BodyLength,\r\n\t\t\t\t\ttype: attachmentInfo.ContentType,\r\n\t\t\t\t\twebkitRelativePath: '',\r\n\t\t\t\t\tuuid: UtilitiesService.generateUuid()\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif (bucket == 'merge') {\r\n\t\t\t\t\tvm.mergeFiles.push(object);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvm.attachFiles.push(object);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tif(ProposalsListService.proposalListLength > 0) {\r\n\t\t\t\tvm.noGeneratedDocYet = false;\r\n\t\t\t}\r\n\r\n\t\t\tvm.getFileTypeIconClass = function(type) {\r\n\t\t\t\tif (type === 'application/pdf' || type === 'PDF') {\r\n\t\t\t\t\treturn 'fa-file-pdf-o';\r\n\t\t\t\t} else if (type === 'application/msword' || type === 'application/vnd.openxmlformats-officedocument.wordprocessingml.document') {\r\n\t\t\t\t\treturn 'fa-file-word-o';\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn 'fa-file-text-o';\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tvm.getFileTypeIconUrl = function(file) {\r\n\t\t\t\treturn GlobalService.getFileTypeIconUrl(file);\r\n\t\t\t};\r\n\r\n\t\t\tvm.openNADialog = function() {\r\n\t\t\t\tPreviewService.dialogIsOpen = true;\r\n\r\n\t\t\t\taddFromQuoteDialogController.$inject = ['$scope', '$uibModalInstance'];\r\n\r\n\t\t\t\tfunction addFromQuoteDialogController($scope, $uibModalInstance) {\r\n\t\t\t\t\t// The following is the scope of the select template popup\r\n\t\t\t\t\t$scope.displayedCollection = [];\r\n\t\t\t\t\t$scope.labels = i18nService.CustomLabel;\r\n\t\t\t\t\tRemoteService.getAttachments(currentProposalId).then(function(response) {\r\n\t\t\t\t\t\t$scope.rowCollection = response;\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t$scope.getFileTypeIconClass = function(type) {\r\n\t\t\t\t\t\tif (type === 'application/pdf' || type === 'PDF') {\r\n\t\t\t\t\t\t\treturn 'fa-file-pdf-o';\r\n\t\t\t\t\t\t} else if (type === 'application/msword' || type === 'application/vnd.openxmlformats-officedocument.wordprocessingml.document') {\r\n\t\t\t\t\t\t\treturn 'fa-file-word-o';\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn 'fa-file-text-o';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t$scope.dismiss = function() {\r\n\t\t\t\t\t\t$uibModalInstance.dismiss('cancel');\r\n\t\t\t\t\t\tPreviewService.dialogIsOpen = false;\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t$scope.addToMerge = function() {\r\n\t\t\t\t\t\tPreviewService.attemptToMerge = false;\r\n\r\n\t\t\t\t\t\t_.map($scope.displayedCollection, function(row) {\r\n\t\t\t\t\t\t\tif (row.isSelected) {\r\n\t\t\t\t\t\t\t\tif (row.ContentType === \"\" || !angular.isDefined(row.ContentType)) { // derive file type from file name if none found\r\n\t\t\t\t\t\t\t\t\tvar re = /(?:\\.([^.]+))?$/;\r\n\t\t\t\t\t\t\t\t\tvar fileType = re.exec(row.Title)[1];\r\n\r\n\t\t\t\t\t\t\t\t\trow.ContentType = \"application/\" + fileType;\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t_addAttachmentInfo(row, 'merge');\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tif (PreviewService.goForPDF) {\r\n\t\t\t\t\t\t\tPageNotificationService.hasPageNotification = true;\r\n\t\t\t\t\t\t\tPageNotificationService.alert = {\r\n\t\t\t\t\t\t\t\ttype: 'danger',\r\n\t\t\t\t\t\t\t\tmessage: vm.labels.OutputWillBePDF,\r\n\t\t\t\t\t\t\t\ttimeout: notificationTimeout\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tPageContainerService.mergeFilesAttachmentInfo = _.uniq(PageContainerService.mergeFilesAttachmentInfo, 'Title');\r\n\t\t\t\t\t\tvm.mergeFiles = _.uniq(vm.mergeFiles, 'name');\r\n\r\n\t\t\t\t\t\t$uibModalInstance.close(true);\r\n\t\t\t\t\t\tPreviewService.dialogIsOpen = false;\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar dialogInstance = $uibModal.open({\r\n\t\t\t\t\tbackdrop: 'static',\r\n\t\t\t\t\tanimation: true,\r\n\t\t\t\t\ttemplate: require('./attachments.listNADialog.tpl.html'),\r\n\t\t\t\t\tsize: tplDialogSize,\r\n\t\t\t\t\tkeyboard: false,\r\n\t\t\t\t\tcontroller: addFromQuoteDialogController\r\n\t\t\t\t});\r\n\r\n\t\t\t};\r\n\r\n\t\t\tvm.openUrlDialog = function() {\r\n\t\t\t\tPreviewService.dialogIsOpen = true;\r\n\r\n\t\t\t\taddUrlDialogCtrl.$inject = ['$scope', '$uibModalInstance', 'RemoteService'];\r\n\r\n\t\t\t\tfunction addUrlDialogCtrl($scope, $uibModalInstance, RemoteService) {\r\n\t\t\t\t\t// The following is the scope of the select template popup\r\n\t\t\t\t\t$scope.labels = i18nService.CustomLabel;\r\n\r\n\t\t\t\t\t// default to show one linked URL\r\n\t\t\t\t\t$scope.linkedUrls = [{\r\n\t\t\t\t\t\taddedUrl: '',\r\n\t\t\t\t\t\turlTitle: ''\r\n\t\t\t\t\t}];\r\n\r\n\t\t\t\t\t$scope.addLinkedUrl = function() {\r\n\t\t\t\t\t\t$scope.linkedUrls.push({\r\n\t\t\t\t\t\t\t                       addedUrl: '',\r\n\t\t\t\t\t\t\t                       urlTitle: ''\r\n\t\t\t\t\t\t                       });\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t$scope.dismiss = function() {\r\n\t\t\t\t\t\t$uibModalInstance.dismiss('cancel');\r\n\t\t\t\t\t\tPreviewService.dialogIsOpen = false;\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t$scope.done = function() {\r\n\t\t\t\t\t\tvar requestObj = {\r\n\t\t\t\t\t\t\tproposalId: currentProposalId,\r\n\t\t\t\t\t\t\thyperlinkList: [],\r\n\t\t\t\t\t\t\toutputFormat: \"PDF\" // currently we only support PDF format\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t// add linked URLs to request object\r\n\t\t\t\t\t\tfor (var i = 0; i < $scope.linkedUrls.length; i++) {\r\n\t\t\t\t\t\t\tif($scope.linkedUrls[i].addedUrl && $scope.linkedUrls[i].addedUrl !== ''){\r\n\t\t\t\t\t\t\t\trequestObj.hyperlinkList.push({\r\n\t\t\t\t\t\t\t\t\t                              Title: $scope.linkedUrls[i].urlTitle,\r\n\t\t\t\t\t\t\t\t\t                              URL: $scope.linkedUrls[i].addedUrl\r\n\t\t\t\t\t\t\t\t                              });\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tRemoteService.getURLContent(requestObj).then(\r\n\t\t\t\t\t\t\tfunction(response) {\r\n\t\t\t\t\t\t\t\t// success\r\n\t\t\t\t\t\t\t\tPreviewService.attemptToMerge = false;\r\n\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < response.length; i++) {\r\n\t\t\t\t\t\t\t\t\tvar row = response[i];\r\n\r\n\t\t\t\t\t\t\t\t\t_addAttachmentInfo(row, 'merge');\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tif (PreviewService.goForPDF) {\r\n\t\t\t\t\t\t\t\t\tPageNotificationService.hasPageNotification = true;\r\n\t\t\t\t\t\t\t\t\tPageNotificationService.alert = {\r\n\t\t\t\t\t\t\t\t\t\ttype: 'danger',\r\n\t\t\t\t\t\t\t\t\t\tmessage: vm.labels.OutputWillBePDF,\r\n\t\t\t\t\t\t\t\t\t\ttimeout: notificationTimeout\r\n\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t// TODO is this necessary? If attachments have same Title this does not necessarily mean it is the same document contents\r\n\t\t\t\t\t\t\t\tPageContainerService.mergeFilesAttachmentInfo = _.uniq(PageContainerService.mergeFilesAttachmentInfo, 'Title');\r\n\r\n\t\t\t\t\t\t\t\t$uibModalInstance.close(true);\r\n\t\t\t\t\t\t\t\tPreviewService.dialogIsOpen = false;\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfunction(reason) {\r\n\t\t\t\t\t\t\t\t// failure\r\n\t\t\t\t\t\t\t\t// TODO: feed it to the page error service with appropriate error level\r\n\t\t\t\t\t\t\t\tconsole.log(reason);\r\n\t\t\t\t\t\t\t\t$scope.loading = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar urlDialogInstance = $uibModal.open({\r\n\t\t\t\t\tbackdrop: 'static',\r\n\t\t\t\t\tanimation: true,\r\n\t\t\t\t\ttemplate: require('./attachments.addUrlDialog.tpl.html'),\r\n\t\t\t\t\tsize: urlDialogSize,\r\n\t\t\t\t\tkeyboard: false,\r\n\t\t\t\t\tcontroller: addUrlDialogCtrl\r\n\t\t\t\t});\r\n\t\t\t};\r\n\r\n\t\t\t// Remove file\r\n\t\t\tvm.removeFile = function(file, idx, bucket) {\r\n\r\n\t\t\t\tif (bucket === 'mergeBucket') {\r\n\t\t\t\t\t// Remove from the view\r\n\t\t\t\t\t_.remove(vm.mergeFiles, function(obj) {\r\n\t\t\t\t\t\treturn obj.name === file.name;\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tif(vm.mergeFiles.length == 1) {\r\n\t\t\t\t\t\tPreviewService.attemptToMerge = false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t_.remove(PageContainerService.mergeFilesAttachmentInfo, function(obj) {\r\n\t\t\t\t\t\treturn (obj.Title === file.name);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t// this file pending upload and others also pending completion?\r\n\t\t\t\t\tif(file.uploadStatus === \"pending\" && vm.filesForUpload > 0) {\r\n\t\t\t\t\t\t// decrement number of pending uploads\r\n\t\t\t\t\t\tvm.filesForUpload--;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Check for a non-word file after removing any file if the generated file is a word file\r\n\t\t\t\t\t_.map(vm.mergeFiles, function(file, idx) {\r\n\t\t\t\t\t\tvar re = /(?:\\.([^.]+))?$/;\r\n\t\t\t\t\t\tvar fileType = re.exec(file.name)[1];\r\n\t\t\t\t\t\tif (idx !== 0 &&\r\n\t\t\t\t\t\t\t\tPreviewService.selectionIsNotPdf &&\r\n\t\t\t\t\t\t\t\tfileType !== 'doc' &&\r\n\t\t\t\t\t\t\t\tfileType !== 'docx')\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tPreviewService.goForPDF = true;\r\n\t\t\t\t\t\t\tPageNotificationService.hasPageNotification = true;\r\n\t\t\t\t\t\t\tPageNotificationService.alert = {\r\n\t\t\t\t\t\t\t\ttype: 'danger',\r\n\t\t\t\t\t\t\t\tmessage: vm.labels.OutputWillBePDF,\r\n\t\t\t\t\t\t\t\ttimeout: notificationTimeout\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tPreviewService.goForPDF = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tif(vm.filesForUpload === 0) { // no more files pending upload?\r\n\t\t\t\t\t\t// re-enable merge button\r\n\t\t\t\t\t\tPreviewService.disableMerge = false;\r\n\t\t\t\t\t\tPageNotificationService.hasPageNotification = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tvm.dragoverCallback = function(event, index, external, type) {\r\n\t\t\t\treturn index > 0;\r\n\t\t\t};\r\n\r\n\t\t\t// Re-order files to be merged after drag and drop shuffle\r\n\t\t\tvm.reOrderFiles = function(index, bucket) {\r\n\t\t\t\tvar dummyArr = [];\r\n\t\t\t\tif (bucket === 'merge') {\r\n\t\t\t\t\tvm.mergeFiles.splice(index, 1);\r\n\t\t\t\t\t_.map(vm.mergeFiles, function(file, index) {\r\n\t\t\t\t\t\tif (index !== 0) {\r\n\t\t\t\t\t\t\tdummyArr.push(_.find(PageContainerService.mergeFilesAttachmentInfo, _.matchesProperty('Title', file.name)));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tPageContainerService.mergeFilesAttachmentInfo = dummyArr;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\t// Being called before the file upload happens\r\n\t\t\tvm.beforeFileUpload = function(files) {\r\n\t\t\t\t_.map(files, function(file) {\r\n\t\t\t\t\tvar fileSize = file.size / 1000000; //MB\r\n\t\t\t\t\tvar fileType = file.type;\r\n\r\n\t\t\t\t\tif (fileSize > 4 || !GlobalService.isAcceptedFileType(fileType))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tPageNotificationService.hasPageNotification = true;\r\n\t\t\t\t\t\tPageNotificationService.alert = {\r\n\t\t\t\t\t\t\ttype: 'danger',\r\n\t\t\t\t\t\t\tmessage: vm.labels.AcceptedDocgenFileFormats,\r\n\t\t\t\t\t\t\ttimeout: undefined\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (PreviewService.selectionIsNotPdf && !PreviewService.goForPDF && (fileType === 'application/pdf' || fileType === 'PDF'))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tPreviewService.goForPDF = true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(!angular.isDefined(file.uuid)) {\r\n\t\t\t\t\t\tfile.uuid = UtilitiesService.generateUuid();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (PreviewService.goForPDF) {\r\n\t\t\t\t\tPageNotificationService.hasPageNotification = true;\r\n\t\t\t\t\tPageNotificationService.alert = {\r\n\t\t\t\t\t\ttype: 'danger',\r\n\t\t\t\t\t\tmessage: 'Output format will be PDF if you merge these chosen files',\r\n\t\t\t\t\t\ttimeout: notificationTimeout\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t};\r\n\r\n\t\t\tvm.uploadLocalFiles = function(bucket) {\r\n\t\t\t\tvm.filesForUpload = 0;\r\n\t\t\t\tvm.filesUploaded = 0;\r\n\r\n\t\t\t\tPreviewService.attemptToMerge = true;\r\n\r\n\t\t\t\tif (bucket === 'mergeBucket') {\r\n\t\t\t\t\t_.map(vm.mergeFiles, function(file, index) {\r\n\t\t\t\t\t\tif (index !== 0 && file instanceof File && file.uploadStatus !== \"complete\") {\r\n\t\t\t\t\t\t\t// disable merge button till all files uploaded\r\n\t\t\t\t\t\t\tPreviewService.disableMerge = true;\r\n\r\n\t\t\t\t\t\t\tvm.filesForUpload++; // increment number of files pending upload\r\n\r\n\t\t\t\t\t\t\tencodeAndUploadFileAttachment(vm.mergeFiles[index], bucket, index);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tPreviewService.disableMerge = true;\r\n\r\n\t\t\t\t\tvm.filesForUpload = vm.attachFiles.length; // all files in list should be uploaded\r\n\r\n\t\t\t\t\t_.map(vm.attachFiles, function(file, index) {\r\n\t\t\t\t\t\t// if file is defined set to upload status of pending\r\n\t\t\t\t\t\tif (vm.attachFiles[index]) vm.attachFiles[index].uploadStatus = \"pending\";\r\n\r\n\t\t\t\t\t\tencodeAndUploadFileAttachment(vm.attachFiles[index]);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t};\r\n\r\n\t\t\t// This function will be called per file\r\n\t\t\tfunction encodeAndUploadFileAttachment(file, bucket, index) {\r\n\t\t\t\tif(file.uploadStatus == \"pending\") return;\r\n\r\n\t\t\t\tfile.uploadStatus = \"pending\";\r\n\t\t\t\tfile.percentComplete = 0;\r\n\r\n\t\t\t\t\t// display message indicating files being uploaded\r\n\t\t\t\tPageNotificationService.hasPageNotification = true;\r\n\t\t\t\tPageNotificationService.alert = {\r\n\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\tmessage: vm.labels.PleaseWaitWhileDocumentUploaded\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar uploadRequest = {\r\n\t\t\t\t\tfile: file,\r\n\t\t\t\t\tparentId: currentProposalId,\r\n\t\t\t\t\tonerror: function(e) {\r\n\t\t\t\t\t\tfile.uploadStatus = \"error\";\r\n\r\n\t\t\t\t\t\t// unkown error occurred\r\n\t\t\t\t\t\tPageNotificationService.hasPageNotification = true;\r\n\t\t\t\t\t\tPageNotificationService.alert = {\r\n\t\t\t\t\t\t\ttype: 'danger',\r\n\t\t\t\t\t\t\tmessage: vm.labels.GenericServiceFailureError\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t},\r\n\t\t\t\t\toncomplete: function(e) {\r\n\t\t\t\t\t\tfile.uploadStatus = \"complete\";\r\n\t\t\t\t\t\tfile.percentComplete = 100;\r\n\r\n\t\t\t\t\t\t// file still in list?\r\n\t\t\t\t\t\tvar fileExists = _.some((bucket === 'mergeBucket' ? vm.mergeFiles : vm.attachFiles), function (listFile) {\r\n\t\t\t\t\t\t\treturn file.uuid === listFile.uuid;\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tif(fileExists) {\r\n\t\t\t\t\t\t\tfile.uploadStatus = \"complete\"; // flag file as uploaded\r\n\t\t\t\t\t\t\tvm.filesUploaded++; // increment number of files uploaded\r\n\r\n\t\t\t\t\t\t\tif (bucket === 'mergeBucket') {\r\n\t\t\t\t\t\t\t\tPageContainerService.mergeFilesAttachmentInfo.push(e.result);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tPageContainerService.attachFilesAttachmentInfo.push(e.result);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// if files uploaded greater than or equal to pending files for upload\r\n\t\t\t\t\t\t// then remove notification message and re-enable merge button\r\n\t\t\t\t\t\tif(vm.filesUploaded >= vm.filesForUpload) {\r\n\t\t\t\t\t\t\tPageNotificationService.hasPageNotification = false;\r\n\t\t\t\t\t\t\tPreviewService.disableMerge = false;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// need to create simple JSON copy of File object otherwise when drag/drop occurs properties\r\n\t\t\t\t\t\t// from the File object are not properly copied.\r\n\t\t\t\t\t\tvar _tmpFile = {\r\n\t\t\t\t\t\t\tname: file.name,\r\n\t\t\t\t\t\t\tuuid: file.uuid,\r\n\t\t\t\t\t\t\tlastModified: file.lastModified,\r\n\t\t\t\t\t\t\tlastModifiedDate: file.lastModifiedDate,\r\n\t\t\t\t\t\t\tsize: file.size,\r\n\t\t\t\t\t\t\ttype: file.type,\r\n\t\t\t\t\t\t\tuploadStatus: file.uploadStatus,\r\n\t\t\t\t\t\t\twebkitRelativePath: file.webkitRelativePath\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\tvm.mergeFiles[index] = _tmpFile;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonchunkcomplete: function(e) {\r\n\t\t\t\t\t\t// upload file upload status\r\n\t\t\t\t\t\tfile.percentComplete = Math.floor(e.percentComplete * 100);\r\n\r\n\t\t\t\t\t\t// in case file removed mid-upload\r\n\t\t\t\t\t\tif(vm.filesUploaded >= vm.filesForUpload) {\r\n\t\t\t\t\t\t\te.stopUploading = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tUploadService.uploadAttachment(uploadRequest);\r\n\t\t\t}\r\n\r\n\t\t\tfunction clearBuckets() {\r\n\t\t\t\tvm.mergeFiles = [];\r\n\t\t\t\tvm.attachFiles = [];\r\n\t\t\t\tPageContainerService.attachNAFilesAttachmentInfo = [];\r\n\t\t\t}\r\n\r\n\t\t\tvar deRegisterWatch1 = $scope.$watch(function() {\r\n\t\t\t\t\treturn GlobalService.clearAttachmentsBuckets;\r\n\t\t\t\t},\r\n\t\t\t\tfunction(newVal, oldVal) {\r\n\t\t\t\t\tif (newVal === true) {\r\n\t\t\t\t\t\tclearBuckets();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t\tvar deRegisterWatch2 = $scope.$watch(function() {\r\n\t\t\t\t\treturn ProposalsListService.mergedSourceDocs;\r\n\t\t\t\t},\r\n\t\t\t\tfunction(newVal, oldVal) {\r\n\t\t\t\t\tif (newVal) {\r\n\t\t\t\t\t\tvm.mergeFiles = ProposalsListService.mergedSourceDocs;\r\n\r\n\t\t\t\t\t\t_.map(vm.mergeFiles, function(file, index) {\r\n\t\t\t\t\t\t\tif(!angular.isDefined(file.uuid)) {\r\n\t\t\t\t\t\t\t\tfile.uuid = UtilitiesService.generateUuid();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t\tvar deRegisterWatch3 = $scope.$watch(function() {\r\n\t\t\t\t\treturn ProposalsListService.attachments;\r\n\t\t\t\t},\r\n\t\t\t\tfunction(newVal, oldVal) {\r\n\t\t\t\t\tif (newVal) {\r\n\t\t\t\t\t\tvm.attachFiles = ProposalsListService.attachments;\r\n\r\n\t\t\t\t\t\t_.map(vm.attachFiles, function(file, index) {\r\n\t\t\t\t\t\t\tif(!angular.isDefined(file.uuid)) {\r\n\t\t\t\t\t\t\t\tfile.uuid = UtilitiesService.generateUuid();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t\tvar deRegisterWatch4 = $scope.$watch(function() {\r\n\t\t\t\t\treturn ProposalsListService.proposalDoc;\r\n\t\t\t\t},\r\n\t\t\t\tfunction(newVal, oldVal) {\r\n\t\t\t\t\tif (newVal) {\r\n\t\t\t\t\t\tclearBuckets();\r\n\t\t\t\t\t\t// make sure is valid file object before adding\r\n\t\t\t\t\t\tif(ProposalsListService.proposalDoc.hasOwnProperty('name')) {\r\n\t\t\t\t\t\t\tvm.mergeFiles.push(ProposalsListService.proposalDoc);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t\tvar deRegisterWatch5 = $scope.$watch(function() {\r\n\t\t\t\t\treturn ProposalsListService.selectionIsACollatedDoc;\r\n\t\t\t\t},\r\n\t\t\t\tfunction(newVal) {\r\n\t\t\t\t\tif (newVal) {\r\n\t\t\t\t\t\tvm.collatedDocs = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!newVal) {\r\n\t\t\t\t\t\tvm.collatedDocs = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t\tvar deRegisterWatch6 = $scope.$watch(function() {\r\n\t\t\t\t\treturn PreviewService.selectionIsNotPdf;\r\n\t\t\t\t},\r\n\t\t\t\tfunction(newVal, oldVal) {\r\n\t\t\t\t\tvm.selectionIsNotPdf = PreviewService.selectionIsNotPdf;\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t\tvar deRegisterWatch7 = $scope.$watch(function() {\r\n\t\t\t\t\treturn ProposalsListService.proposalList;\r\n\t\t\t\t},\r\n\t\t\t\tfunction(newVal, oldVal) {\r\n\t\t\t\t\tif (newVal && newVal.length > 0) {\r\n\t\t\t\t\t\t\tvm.noGeneratedDocYet = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tvm.noGeneratedDocYet = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t\t$scope.$on('$destroy', function() {\r\n\t\t\t\tderegisterWatch1();\r\n\t\t\t\tdeRegisterWatch2();\r\n\t\t\t\tdeRegisterWatch3();\r\n\t\t\t\tdeRegisterWatch4();\r\n\t\t\t\tdeRegisterWatch5();\r\n\t\t\t\tdeRegisterWatch6();\r\n\t\t\t\tdeRegisterWatch7();\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\tattachmentsController.$inject = ['systemConstants',\r\n\t\t\t\t\t\t\t\t\t\t\t'$scope',\r\n\t\t\t\t\t\t\t\t\t\t\t'$uibModal',\r\n\t\t\t\t\t\t\t\t\t\t\t'lodash',\r\n\t\t\t\t\t\t\t\t\t\t\t'RemoteService',\r\n\t\t\t\t\t\t\t\t\t\t\t'i18nService',\r\n\t\t\t\t\t\t\t\t\t\t\t'ProposalsListService',\r\n\t\t\t\t\t\t\t\t\t\t\t'PageContainerService',\r\n\t\t\t\t\t\t\t\t\t\t\t'PageNotificationService',\r\n\t\t\t\t\t\t\t\t\t\t\t'GlobalService',\r\n\t\t\t\t\t\t\t\t\t\t\t'PreviewService',\r\n\t\t\t\t\t\t\t\t\t\t\t'UploadService',\r\n                                            'UtilitiesService'\r\n\t\t\t\t\t\t\t\t\t\t];\r\n\r\n\t\treturn {\r\n\t\t\trestrict: 'E',\r\n\t\t\treplace: true,\r\n\t\t\tcontroller: attachmentsController,\r\n\t\t\tcontrollerAs: 'vm',\r\n\t\t\tscope: {},\r\n\t\t\tbindToController: {},\r\n\t\t\ttemplate: require('./attachments.tpl.html')\r\n\t\t};\r\n\t}];\r\n})();\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/common/directives/attachments/attachments.directive.js\n// module id = 25\n// module chunks = 1","module.exports = \"<div class='modal-header list-na__header'>\\r\\n\\t<h3 class='modal-title'>{{labels.QuoteAttachments}}</h3>\\r\\n\\t<i class='fa fa-times list-na__close' ng-click='dismiss()' aria-hidden='true'></i>\\r\\n</div>\\r\\n<div class=\\\"modal-body list-na__body\\\">\\r\\n\\t<div class='templates'>\\r\\n\\t\\t<!-- <div class='templates__search'></div> -->\\r\\n\\t\\t<div class='templates__table'>\\r\\n\\t\\t\\t<div>\\r\\n\\t\\t\\t\\t<table st-table=\\\"displayedCollection\\\" st-safe-src='rowCollection' class='table'>\\r\\n\\t\\t\\t\\t\\t<thead>\\r\\n\\t\\t\\t\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t<th colspan=\\\"2\\\" class='searchable'>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class='searchbar'>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"fa fa-search\\\"></i>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<input st-search='' class=\\\"form-control\\\" placeholder=\\\"{{labels.Search}}\\\" type=\\\"text\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</th>\\r\\n\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t<th st-sort=\\\"Name\\\" class='sortable'>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<span>{{labels.DocumentName}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"fa fa-caret-down\\\" aria-hidden=\\\"true\\\"></i>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"fa fa-caret-up\\\" aria-hidden=\\\"true\\\"></i>\\r\\n\\t\\t\\t\\t\\t\\t\\t</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t<th st-sort=\\\"Name\\\" class='sortable'>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<span>{{labels.DocumentType}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"fa fa-caret-down\\\" aria-hidden=\\\"true\\\"></i>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"fa fa-caret-up\\\" aria-hidden=\\\"true\\\"></i>\\r\\n\\t\\t\\t\\t\\t\\t\\t</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t<th st-sort=\\\"BodyLength\\\" class='sortable'>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<span>{{labels.SizeKB}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"fa fa-caret-down\\\" aria-hidden=\\\"true\\\"></i>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"fa fa-caret-up\\\" aria-hidden=\\\"true\\\"></i>\\r\\n\\t\\t\\t\\t\\t\\t\\t</th>\\r\\n\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t</thead>\\r\\n\\t\\t\\t\\t\\t<tbody>\\r\\n\\t\\t\\t\\t\\t\\t<tr ng-if='displayedCollection.length === 0'>\\r\\n\\t\\t\\t\\t\\t\\t\\t<td>{{labels.NoAttachmentsToDisplay}}</td>\\r\\n\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t<tr st-select-row=\\\"row\\\" st-select-mode=\\\"multi\\\" ng-repeat=\\\"row in displayedCollection\\\">                            \\r\\n\\t\\t\\t\\t\\t\\t\\t<td>{{row.Title}}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t<td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<i class='fa fileIcon' ng-class='getFileTypeIconClass(row.ContentType)'></i>\\r\\n\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t<td>{{row.BodyLength/1000}}</td>\\r\\n\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</div>\\r\\n<div class=\\\"modal-footer list-na__footer\\\">\\r\\n\\t<button class=\\\"btn btn-primary\\\" type=\\\"button\\\" ng-click=\\\"addToMerge()\\\">{{labels.AddToMergeDocs}}</button>\\r\\n</div>\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/common/directives/attachments/attachments.listNADialog.tpl.html\n// module id = 26\n// module chunks = 1","module.exports = \"<div class='modal-header list-na__header'>\\r\\n\\t<h3 class='modal-title'>Add Urls</h3>\\r\\n\\t<i class='fa fa-times list-na__close' ng-click='dismiss()' aria-hidden='true'></i>\\r\\n</div>\\r\\n<div class=\\\"modal-body list-na__body\\\">\\r\\n  <form class='form-horizontal'>\\r\\n      <div class='form-group'>\\r\\n\\t\\t\\t\\t<ul class=\\\"url-list\\\">\\r\\n\\t\\t\\t\\t\\t<li ng-repeat=\\\"linkedUrl in linkedUrls\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"row-cont\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<label for='url' class='col-sm-2 control-label'>{{labels.Url}}</label>\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class='col-sm-10'>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<input type='text' class='form-control' id='url' ng-model='linkedUrl.addedUrl'>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"email__warning\\\">{{labels.AddURLWarning}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"row-cont\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<label for='url' class='col-sm-2 control-label'>{{labels.Title}}</label>\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class='col-sm-10'>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<input type='text' class='form-control' id='url' ng-model='linkedUrl.urlTitle'>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t</ul>\\r\\n\\t      <div class=\\\"secondary-action-container\\\">\\r\\n\\t\\t      <label class=\\\"col-sm-2\\\">&nbsp;</label>\\r\\n\\t\\t      <div class=\\\"col-sm-10\\\"><a href title='{{labels.AddAnother}}' ng-click='addLinkedUrl()'>&#43; {{labels.AddAnother}}</a></div>\\r\\n\\t      </div>\\r\\n\\t      <div class=\\\"primary-btn-container\\\">\\r\\n\\t\\t      <button class='btn btn-primary'\\r\\n\\t\\t              type='submit'\\r\\n\\t\\t              title='{{labels.Done}}'\\r\\n\\t\\t              ng-click='done()'>\\r\\n\\t\\t\\t      {{labels.Done}}\\r\\n\\t\\t      </button>\\r\\n\\t      </div>\\r\\n      </div>\\r\\n    </form>\\r\\n</div>\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/common/directives/attachments/attachments.addUrlDialog.tpl.html\n// module id = 27\n// module chunks = 1","module.exports = \"<div layout='column' class='attachments__content'>\\r\\n\\r\\n\\t<div layout='row' class='attachments__header'>\\r\\n\\t\\t<span class=\\\"title\\\">{{vm.labels.AdditionalDocuments}}</span>\\r\\n\\t\\t<button ng-disabled='vm.collatedDocs || vm.noGeneratedDocYet' class=\\\"btn btn-default btn-action\\\" type=\\\"submit\\\" ng-click='vm.openNADialog()'>\\r\\n\\t\\t\\t<i class='fa fa-plus'></i>\\r\\n\\t\\t\\t<span>{{vm.labels.AddFromQuote}}</span>\\r\\n\\t\\t</button>\\r\\n\\t\\t<button ng-disabled='vm.collatedDocs || vm.noGeneratedDocYet' class=\\\"btn btn-default btn-action\\\" type=\\\"submit\\\" ng-click='vm.openUrlDialog()'>\\r\\n\\t\\t\\t<i class='fa fa-plus'></i>\\r\\n\\t\\t\\t<span>{{vm.labels.AddUrl}}</span>\\r\\n\\t\\t</button>\\r\\n\\t</div>\\r\\n\\t<div class='mergeDoc__header'>\\r\\n\\t\\t<span class='title-with-sidelines subtitle'>{{vm.labels.DocumentsToBeMerged}}</span>\\r\\n\\t</div>\\r\\n\\t<!-- Merge Files Drag and Drop Container -->\\r\\n\\t<div flex ngf-drag-over-class=\\\"'dragover'\\\" class='mergeDoc__content drop-box'\\r\\n\\t     ngf-change=\\\"vm.uploadLocalFiles('mergeBucket')\\\"\\r\\n\\t     ng-model='vm.mergeFiles' name='files'\\r\\n\\t     ngf-pattern=\\\"'.pdf,.doc,.docx'\\\"\\r\\n\\t     ngf-model-invalid=\\\"vm.invalidFiles\\\"\\r\\n\\t     ngf-before-model-change=\\\"vm.beforeFileUpload($files)\\\"\\r\\n\\t     ngf-drop\\r\\n\\t     ngf-keep=\\\"'distinct'\\\"\\r\\n\\t     ngf-drag-over-class=\\\"'dragover'\\\"\\r\\n\\t     ngf-multiple=\\\"true\\\"\\r\\n\\t     ngf-max-size=\\\"4MB\\\"\\r\\n\\t     ngf-drop-disabled='vm.collatedDocs || vm.noGeneratedDocYet || !vm.fileUploadSupport || vm.isMobileIos'\\r\\n\\t>\\r\\n\\t\\t<ul dnd-list='vm.mergeFiles'\\r\\n\\t\\t    class='filelist mergefiles-list'\\r\\n\\t\\t    ng-class=\\\"{'collated-list': vm.collatedDocs === true}\\\"\\r\\n\\t\\t    dnd-dragover='vm.dragoverCallback(event, index, external, type)'\\r\\n\\t\\t    dnd-horizontal-list='true'\\r\\n\\t\\t>\\r\\n\\t\\t\\t<li ng-repeat='file in vm.mergeFiles'\\r\\n\\t\\t\\t    ng-if='vm.mergeFiles.length > 0'\\r\\n\\t\\t\\t    dnd-draggable='file'\\r\\n\\t\\t\\t    dnd-disable-if='$index === 0 || vm.collatedDocs'\\r\\n\\t\\t\\t    dnd-moved='vm.reOrderFiles($index, \\\"merge\\\")'\\r\\n\\t\\t\\t    dnd-effect-allowed='move'\\r\\n\\t\\t\\t>\\r\\n\\t\\t\\t\\t<img class=\\\"fileIcon\\\" ng-src=\\\"{{vm.getFileTypeIconUrl(file)}}\\\" />\\r\\n\\t\\t\\t\\t<span class='fileTitle'>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t{{file.name}}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<md-tooltip md-direction=\\\"right\\\" md-delay='1000'>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t  {{file.name}}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</md-tooltip>\\r\\n\\t\\t\\t\\t\\t\\t\\t</span>\\r\\n\\t\\t\\t\\t<md-progress-linear ng-if=\\\"file.uploadStatus == 'pending'\\\" class='upload-progressBar' md-mode=\\\"determinate\\\" ng-value=\\\"file.percentComplete\\\"></md-progress-linear>\\r\\n\\t\\t\\t\\t<i class=\\\"fa fa-times-circle rm-file-btn\\\" aria-hidden=\\\"true\\\" ng-if='$index > 0' ng-click='vm.removeFile(file, $index, \\\"mergeBucket\\\")'></i>\\r\\n\\t\\t\\t</li>\\r\\n\\t\\t</ul>\\r\\n\\t</div>\\r\\n\\r\\n\\t<div layout='column' class='browse' ng-if=\\\"vm.fileUploadSupport && !vm.isMobileIos\\\">\\r\\n\\t\\t<div>\\r\\n\\t\\t\\t<span class='browse__drag-drop'>{{vm.labels.DragAndDrop}}</span>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div>\\r\\n\\t\\t\\t<span>Or</span>\\r\\n\\t\\t\\t<button type=\\\"button\\\" class=\\\"btn btn-link browse__btn\\\"\\r\\n\\t\\t\\t        ngf-select\\r\\n\\t\\t\\t        ngf-change=\\\"vm.uploadLocalFiles('mergeBucket')\\\"\\r\\n\\t\\t\\t        ng-model='vm.mergeFiles'\\r\\n\\t\\t\\t        ngf-pattern=\\\"'.pdf,.doc,.docx'\\\"\\r\\n\\t\\t\\t        ngf-before-model-change=\\\"vm.beforeFileUpload($files)\\\"\\r\\n\\t\\t\\t        ngf-keep=\\\"'distinct'\\\"\\r\\n\\t\\t\\t        ngf-multiple=\\\"true\\\"\\r\\n\\t\\t\\t        ngf-max-size=\\\"4MB\\\"\\r\\n\\t\\t\\t        ng-disabled='vm.collatedDocs || vm.noGeneratedDocYet'\\r\\n\\t\\t\\t>\\r\\n\\t\\t\\t\\t{{vm.labels.BrowseToComputer}}\\r\\n\\t\\t\\t</button>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</div>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/common/directives/attachments/attachments.tpl.html\n// module id = 28\n// module chunks = 1","(function() {\r\n\t'use strict';\r\n\r\n\tmodule.exports = [function() {\r\n\t\treturn {\r\n\t\t\trestrict: \"A\",\r\n\t\t\trequire: \"ngModel\",\r\n\t\t\tlink: function(scope, element, attrs, ngModel) {\r\n\r\n\t\t\t\tfunction read() {\r\n\t\t\t\t\tngModel.$setViewValue(element.text());\r\n\t\t\t\t}\r\n\r\n\t\t\t\tngModel.$render = function() {\r\n\t\t\t\t\treturn ngModel.$viewValue || \"\";\r\n\t\t\t\t};\r\n\r\n\t\t\t\telement.bind(\"blur keyup change\", function() {\r\n\t\t\t\t\tscope.$apply(read);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\t}];\r\n})();\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/common/directives/contenteditable/contenteditable.directive.js\n// module id = 29\n// module chunks = 1","(function() {\r\n\t'use strict';\r\n\tmodule.exports = ['$window',\r\n\t                  '$document',\r\n\t                  '$timeout',\r\n\t                  'systemConstants', function($window, $document, $timeout, systemConstants) {\r\n\r\n\t\tfunction _getElementOffset(elem) {\r\n\t\t\tvar documentElement;\r\n\t\t\tvar window;\r\n\t\t\tvar clientRectangle;\r\n\t\t\tvar document;\r\n\r\n\t\t\tif (!elem) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tclientRectangle = elem.getBoundingClientRect();\r\n\r\n\t\t\t// Make sure element is not hidden (display: none) or disconnected\r\n\t\t\tif (clientRectangle.width || clientRectangle.height || elem.getClientRects().length) {\r\n\t\t\t\twindow = $window;\r\n\t\t\t\tdocument = elem.ownerDocument;\r\n\t\t\t\tdocumentElement = document.documentElement;\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttop: clientRectangle.top + window.pageYOffset - documentElement.clientTop,\r\n\t\t\t\t\tleft: clientRectangle.left + window.pageXOffset - documentElement.clientLeft,\r\n\t\t\t\t\twidth: clientRectangle.width,\r\n\t\t\t\t\theight: clientRectangle.height\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction _getNewMenuPosition($scope, menuEl) {\r\n\t\t\tvar contextElPosition;\r\n\t\t\tvar newPosition;\r\n\t\t\tvar clientVpHeight;\r\n\t\t\tvar calculatedTop;\r\n\t\t\tvar menuOffsetHeight;\r\n\t\t\tvar contextEl = $scope.settings.contextElem[0];\r\n\r\n\t\t\tclientVpHeight = (window.innerHeight || document.documentElement.clientHeight);\r\n\r\n\t\t\tcontextElPosition = _getElementOffset(contextEl);\r\n\r\n\t\t\t// set ideal new position of menu\r\n\t\t\tnewPosition = {\r\n\t\t\t\tyBoundReached: false\r\n\t\t\t};\r\n\r\n\t\t\tif($scope.settings.verticalOrientation === \"TopTop\") {\r\n\t\t\t\tnewPosition.top = contextElPosition.top;\r\n\t\t\t} else {\r\n\t\t\t\tnewPosition.top = contextElPosition.top + contextEl.offsetHeight;\r\n\t\t\t}\r\n\r\n\t\t\tif($scope.settings.horizontalOrientation === \"LeftRight\") {\r\n\t\t\t\t// align left side of menu to right side of context element\r\n\t\t\t\tnewPosition.left = contextElPosition.left + contextEl.offsetWidth;\r\n\t\t\t} else if($scope.settings.horizontalOrientation === \"RightRight\") {\r\n\t\t\t\t// align right side of menu to right side of context element\r\n\t\t\t\tnewPosition.left = (contextElPosition.left - menuEl.offsetWidth) + contextEl.offsetWidth;\r\n\t\t\t} else {\r\n\t\t\t\tnewPosition.left = contextElPosition.left;\r\n\t\t\t}\r\n\r\n\t\t\tmenuOffsetHeight = menuEl.offsetHeight;\r\n\t\t\tnewPosition.bottom = newPosition.top + menuOffsetHeight;\r\n\r\n\r\n\t\t\t// menu goes beyond bottom bound of viewport\r\n\t\t\tif (newPosition.bottom > clientVpHeight) {\r\n\r\n\t\t\t\tif($scope.settings.verticalOrientation === \"TopTop\") {\r\n\t\t\t\t\tcalculatedTop = (contextElPosition.top - menuOffsetHeight) + contextEl.offsetHeight;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcalculatedTop = (contextElPosition.top - menuOffsetHeight);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tnewPosition.yBoundReached = true;\r\n\r\n\t\t\t\t// subtract difference effectively moving menu up, if goes beyond upward bound then set to 0\r\n\t\t\t\tnewPosition.top = (calculatedTop < 0 ? 0 : calculatedTop);\r\n\t\t\t}\r\n\r\n\t\t\treturn newPosition;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\trestrict: 'EA',\r\n\t\t\tscope: {\r\n\t\t\t\tsettings: '='\r\n\t\t\t},\r\n\t\t\ttemplate: require('./contextMenu.tpl.html'),\r\n\t\t\tlink: {\r\n\t\t\t\tpost: function($scope, elem, attr) {\r\n\t\t\t\t\tvar menuUl;\r\n\t\t\t\t\tvar windowChangeFn;\r\n\t\t\t\t\tvar updateViewModel;\r\n\r\n\t\t\t\t\t$scope.settings.contextElem = elem;\r\n\r\n\t\t\t\t\t$scope.settings.menuPosition = {\r\n\t\t\t\t\t\ttop: 0,\r\n\t\t\t\t\t\tleft: 0\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t$scope.settings.boxShadow = \"3px 3px 5px #999\";\r\n\r\n\t\t\t\t\t$scope.itemClicked = function (eventMethod) {\r\n\t\t\t\t\t\t// hide menu\r\n\t\t\t\t\t\t$scope.settings.expanded = false;\r\n\r\n\t\t\t\t\t\teventMethod();\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tmenuUl = elem[0].childNodes[0];\r\n\r\n\t\t\t\t\tvar eElement = $document[0].body;\r\n\r\n\t\t\t\t\t// move menu UL to body\r\n\t\t\t\t\teElement.insertBefore(menuUl, eElement.firstChild);\r\n\r\n\t\t\t\t\tupdateViewModel = function (newPos) {\r\n\t\t\t\t\t\t$scope.settings.menuPosition.top = (newPos.top > 0 ? newPos.top + \"px\" : 0);\r\n\t\t\t\t\t\t$scope.settings.menuPosition.left = (newPos.left > 0 ? newPos.left + \"px\" : 0);\r\n\t\t\t\t\t\t$scope.settings.boxShadow = \"3px \" + (newPos.yBoundReached ? \"-3px\" : \"3px\") + \" 5px #999\";\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\twindowChangeFn = function () {\r\n\t\t\t\t\t\tif (!$scope.settings.expanded) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar newPos = _getNewMenuPosition($scope,\r\n\t\t\t\t\t\t                                 menuUl);\r\n\r\n\t\t\t\t\t\t// call $apply to notify angular of model change\r\n\t\t\t\t\t\t$scope.$apply(function () { updateViewModel(newPos); });\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tangular.element($window).on('DOMContentLoaded load resize', windowChangeFn);\r\n\r\n\t\t\t\t\t// remove events upon destruction of directive\r\n\t\t\t\t\t$scope.$on('$destroy', function () {\r\n\t\t\t\t\t\tangular.element($window).off('DOMContentLoaded load resize', windowChangeFn);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t$scope.$watch('settings.expanded', function (newVal) {\r\n\t\t\t\t\t\tif (newVal) {\r\n\t\t\t\t\t\t\tangular.element(menuUl).removeClass('ng-hide');\r\n\t\t\t\t\t\t\tvar newPos = _getNewMenuPosition($scope, menuUl);\r\n\r\n\t\t\t\t\t\t\tupdateViewModel(newPos);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tvar _idOrClassMatch = function(element, classList) {\r\n\t\t\t\t\t\t// now we have done the initial checks, start gathering id's and classes\r\n\t\t\t\t\t\tvar id = element.id;\r\n\t\t\t\t\t\tvar classNames = element.className;\r\n\r\n\t\t\t\t\t\t// Unwrap SVGAnimatedString classes\r\n\t\t\t\t\t\tif (angular.isDefined(classNames) && angular.isDefined(classNames.baseVal)) {\r\n\t\t\t\t\t\t\tclassNames = classNames.baseVal;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// if there are no class names on the element clicked, skip the check\r\n\t\t\t\t\t\tif (classNames || id) {\r\n\t\t\t\t\t\t\t// loop through the elements id's and classnames looking for exceptions\r\n\t\t\t\t\t\t\tfor (var i = 0; i < classList.length; i++) {\r\n\t\t\t\t\t\t\t\t//prepare regex for class word matching\r\n\t\t\t\t\t\t\t\tvar classIdMatchingRegexExpr = new RegExp('\\\\b' + classList[i] + '\\\\b');\r\n\r\n\t\t\t\t\t\t\t\t// check for exact matches on id's or classes, but only if they exist in the first place\r\n\t\t\t\t\t\t\t\tif ((angular.isDefined(id) && id === classList[i]) || (classNames && classIdMatchingRegexExpr.test(\r\n\t\t\t\t\t\t\t\t\t\tclassNames))) {\r\n\t\t\t\t\t\t\t\t\t// now let's exit out as it is an element that has been defined as being ignored for clicking outside\r\n\t\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t// postpone linking to next digest to allow for unique id generation\r\n\t\t\t\t\t$timeout(function () {\r\n\t\t\t\t\t\tvar classList = [];\r\n\r\n\t\t\t\t\t\t// default close menu events\r\n\t\t\t\t\t\tvar closeEventsList = [\"touchstart\", \"click\"];\r\n\r\n\t\t\t\t\t\t// unique identifiers of elements that should be ignored when clicked\r\n\t\t\t\t\t\tif(angular.isDefined($scope.settings.closeEventsList)) {\r\n\t\t\t\t\t\t\tcloseEventsList = $scope.settings.closeEventsList;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// unique identifiers of elements that should be ignored when clicked\r\n\t\t\t\t\t\tif(angular.isDefined($scope.settings.classList)) {\r\n\t\t\t\t\t\t\tclassList = $scope.settings.classList;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tfunction eventHandler(e) {\r\n\t\t\t\t\t\t\tvar element;\r\n\r\n\t\t\t\t\t\t\t// check if our element already hidden and abort if so\r\n\t\t\t\t\t\t\tif (angular.element(elem).hasClass(\"ng-hide\")) {\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// if there is no click target, no point going on\r\n\t\t\t\t\t\t\tif (!e || !e.target) {\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\t\tif(e.type === \"mouseout\") {\r\n\t\t\t\t\t\t\t\telement = (angular.isDefined(e.relatedTarget) && e.relatedTarget !== null ? e.relatedTarget : e.toElement);\r\n\r\n\t\t\t\t\t\t\t\tif(angular.isDefined(element) && element !== null && _idOrClassMatch(element, classList)) {\r\n\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t// loop through the available elements, looking for classes in the class list that might match and so will eat\r\n\t\t\t\t\t\t\t\tfor (element = e.target; element; element = element.parentNode) {\r\n\t\t\t\t\t\t\t\t\t// check if the element is the same element the directive is attached to and exit if so (props @CosticaPuntaru)\r\n\t\t\t\t\t\t\t\t\tif (element === elem[0]) {\r\n\t\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\tif(_idOrClassMatch(element, classList)) {\r\n\t\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\t\t// use apply to make angular aware of model change\r\n\t\t\t\t\t\t\t$scope.$apply(function () {\r\n\t\t\t\t\t\t\t\t// wrapped this within $apply\r\n\t\t\t\t\t\t\t\t$scope.settings.expanded = false;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tfor (var i = 0; i < closeEventsList.length; i++) {\r\n\t\t\t\t\t\t\tswitch(closeEventsList[i]) {\r\n\t\t\t\t\t\t\t\tcase \"touchstart\":\r\n\t\t\t\t\t\t\t\t\t// if the devices has a touchscreen, listen for this event\r\n\t\t\t\t\t\t\t\t\tif (_hasTouch()) {\r\n\t\t\t\t\t\t\t\t\t\t$document.on('touchstart', eventHandler);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase \"mouseleave\":\r\n\t\t\t\t\t\t\t\t\t// mouse leave event for context element and menu\r\n\t\t\t\t\t\t\t\t\t$scope.settings.contextElem.on('mouseleave', eventHandler);\r\n\t\t\t\t\t\t\t\t\tangular.element(menuUl).on('mouseleave', eventHandler);\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase \"click\":\r\n\t\t\t\t\t\t\t\t\t// still listen for the click event even if there is touch to cater for touchscreen laptops\r\n\t\t\t\t\t\t\t\t\t$document.on('click', eventHandler);\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// when the scope is destroyed, clean up the documents event handlers as we don't want it hanging around\r\n\t\t\t\t\t\t$scope.$on('$destroy', function () {\r\n\t\t\t\t\t\t\tfor (var i = 0; i < closeEventsList.length; i++) {\r\n\t\t\t\t\t\t\t\tswitch(closeEventsList[i]) {\r\n\t\t\t\t\t\t\t\t\tcase \"touchstart\":\r\n\t\t\t\t\t\t\t\t\t\tif (_hasTouch()) {\r\n\t\t\t\t\t\t\t\t\t\t\t$document.off('touchstart', eventHandler);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\tcase \"mouseleave\":\r\n\t\t\t\t\t\t\t\t\t\tangular.element(menuUl).off('mouseleave', eventHandler);\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\tcase \"click\":\r\n\t\t\t\t\t\t\t\t\t\t$document.off('click', eventHandler);\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * @description Private function to attempt to figure out if we are on a touch device\r\n\t\t\t\t\t\t * @private\r\n\t\t\t\t\t\t **/\r\n\t\t\t\t\t\tfunction _hasTouch() {\r\n\t\t\t\t\t\t\t// works on most browsers, IE10/11 and Surface\r\n\t\t\t\t\t\t\treturn 'ontouchstart' in window || navigator.maxTouchPoints;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t}];\r\n})();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/common/directives/contextMenu/contextMenu.directive.js\n// module id = 30\n// module chunks = 1","module.exports = \"<ul class=\\\"context-menu-container\\\" ng-show=\\\"settings.expanded\\\"\\r\\n    ng-style=\\\"{left:settings.menuPosition.left,\\r\\n               top:settings.menuPosition.top,\\r\\n               boxShadow:settings.boxShadow}\\\">\\r\\n\\t<li ng-repeat=\\\"menuItem in settings.menuItems\\\" ng-click=\\\"itemClicked(menuItem.onClick);$event.stopPropagation();\\\">{{menuItem.displayLabel}}</li>\\r\\n</ul>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/common/directives/contextMenu/contextMenu.tpl.html\n// module id = 31\n// module chunks = 1","(function() {\r\n\t'use strict';\r\n\tmodule.exports = [function() {\r\n\t\treturn {\r\n\t\t\trestrict: 'E',\r\n\t\t\tscope: {\r\n\t\t\t\tsettings: \"=\",\r\n\t\t\t\tvalue: \"=\",\r\n\t\t\t\tmaxLength: \"@\",\r\n\t\t\t\tmaxLengthErrorMsg: \"@\"\r\n\t\t\t},\r\n\t\t\ttemplate: require('./editableTextField.tpl.html'),\r\n\t\t\tlink: function(scope) {\r\n\t\t\t\tvar originalValue = scope.value;\r\n\r\n\t\t\t\tvar _userAction = function(currentValue, action) {\r\n\t\t\t\t\t// if validation error exists and user clicks accept trigger no action\r\n\t\t\t\t\tif(action === \"accept\" && scope.hasValidationError()) return;\r\n\r\n\t\t\t\t\t// reset value to original\r\n\t\t\t\t\tif(action == \"cancel\") {\r\n\t\t\t\t\t\tcurrentValue = originalValue;\r\n\t\t\t\t\t\tscope.value = originalValue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar userEditEventInfo = {\r\n\t\t\t\t\t\tvalueChanged: (currentValue !== originalValue),\r\n\t\t\t\t\t\tnewValue: currentValue,\r\n\t\t\t\t\t\torigValue: originalValue,\r\n\t\t\t\t\t\taction: action\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t// if value changed update original\r\n\t\t\t\t\tif(action == \"accept\" && currentValue !== originalValue) {\r\n\t\t\t\t\t\toriginalValue = currentValue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn userEditEventInfo;\r\n\t\t\t\t};\r\n\r\n\t\t\t\tscope.maxLength = -1;\r\n\r\n\t\t\t\tif(angular.isDefined(scope.maxLength)) {\r\n\t\t\t\t\tscope.maxLength = parseInt(scope.maxLength);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscope.onAccept = function() {\r\n\t\t\t\t\tscope.settings.onUserAction(_userAction(scope.value, \"accept\"));\r\n\t\t\t\t};\r\n\r\n\t\t\t\tscope.onCancel = function() {\r\n\t\t\t\t\tscope.settings.onUserAction(_userAction(scope.value, \"cancel\"));\r\n\r\n\t\t\t\t\t// stop editing value\r\n\t\t\t\t\tscope.settings.editMode = false;\r\n\t\t\t\t};\r\n\r\n\t\t\t\tscope.hasValidationError = function() {\r\n\t\t\t\t\tif (angular.isDefined(scope.maxLength) && angular.isDefined(scope.value) && scope.maxLength > -1 && scope.value.length > scope.maxLength) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t}];\r\n})();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/common/directives/editableTextField/editableTextField.directive.js\n// module id = 32\n// module chunks = 1","module.exports = \"<span class=\\\"editable-text-field\\\">\\r\\n\\t<span ng-show=\\\"!settings.editMode\\\">\\r\\n      {{value}}\\r\\n      <md-tooltip md-direction=\\\"right\\\" md-delay='1000'>\\r\\n        {{value}}\\r\\n      </md-tooltip>\\r\\n  </span>\\r\\n\\t<div class=\\\"edit-view\\\" ng-show=\\\"settings.editMode\\\" ng-class=\\\"{'txt-input-error': hasValidationError()}\\\">\\r\\n\\t\\t<input type=\\\"text\\\"\\r\\n\\t\\t       ng-model=\\\"value\\\"\\r\\n\\t\\t       ng-keyup=\\\"$event.keyCode == 13 && onAccept()\\\"\\r\\n\\t\\t       focus-and-select=\\\"settings.editMode\\\" />\\r\\n\\t\\t<i class=\\\"fa fa-check\\\" aria-hidden=\\\"true\\\" ng-click=\\\"onAccept()\\\"></i>\\r\\n\\t\\t<i class=\\\"fa fa-times\\\" aria-hidden=\\\"true\\\" ng-click=\\\"onCancel()\\\"></i>\\r\\n\\t</div>\\r\\n\\t<span class=\\\"validation-error-msg\\\" ng-if=\\\"maxLength > -1 && value.length > maxLength\\\">{{maxLengthErrorMsg}}</span>\\r\\n</span>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/common/directives/editableTextField/editableTextField.tpl.html\n// module id = 33\n// module chunks = 1","(function() {\r\n\tmodule.exports = [function() {\r\n\t\tvar proposalsListController;\r\n\t\temailController = function($scope,\r\n\t\t\t$uibModal,\r\n\t\t\t_,\r\n\t\t\tRemoteService,\r\n\t\t\ti18nService,\r\n\t\t\tsystemConstants,\r\n\t\t\tEmailService,\r\n\t\t\tPageContainerService,\r\n\t\t\tProposalsListService,\r\n\t\t\tPageNotificationService,\r\n\t\t\tGlobalService,\r\n\t\t\tPreviewService,\r\n\t\t\tUtilitiesService\r\n\t\t) {\r\n\t\t\tvar vm = this;\r\n\t\t\tvar tplDialogSize = 'lg';\r\n\t\t\tvm.wantToEmail = false;\r\n\t\t\tvm.showDialog = false;\r\n\r\n\t\t\tvm.openDialog = function() {\r\n\t\t\t\tPreviewService.dialogIsOpen = true;\r\n\r\n\t\t\t\temailDialogCtrl.$inject = ['$q', '$scope', '$sce', '$uibModalInstance'];\r\n\r\n\t\t\t\tfunction emailDialogCtrl($q, $scope, $sce, $uibModalInstance) {\r\n\r\n\t\t\t\t\t$scope.emailTo = '';\r\n\t\t\t\t\t$scope.emailCC = '';\r\n\t\t\t\t\t$scope.emailBcc = '';\r\n\t\t\t\t\t$scope.subject = '';\r\n\t\t\t\t\t$scope.emailBody = '';\r\n\t\t\t\t\t$scope.mergedDocuments = [];\r\n\r\n\t\t\t\t\tif(EmailService.mergedDocInfo.length > 0) {\r\n\t\t\t\t\t\t$scope.mergedDocuments = [ EmailService.mergedDocInfo[0] ];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor(var i = 0; i < EmailService.mergedSourceDocsAttachInfo.length; i++) {\r\n\t\t\t\t\t\t$scope.mergedDocuments.push(EmailService.mergedSourceDocsAttachInfo[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$scope.extraAttachments = [];\r\n\t\t\t\t\t$scope.noRecipient__added = false;\r\n\t\t\t\t\t$scope.emailTemplates = [];\r\n\t\t\t\t\t$scope.selectedEmailTpl = {TemplateType : 'text'}; // Default template type\r\n\t\t\t\t\t$scope.emailFolderList = [];\r\n\t\t\t\t\t$scope.selectedEmailFolder = {};\r\n\t\t\t\t\t$scope.isTemplateMerged = false;\r\n\t\t\t\t\t$scope.labels = i18nService.CustomLabel;\r\n\t\t\t\t\t$scope.displayedCollection = [];\r\n\t\t\t\t\t$scope.fileIsFromQA = false;\r\n\t\t\t\t\t$scope.proposalAlreadyPresented = false;\r\n\t\t\t\t\t$scope.approvalStatus = true;\r\n\t\t\t\t\t$scope.fileUploadSupport = UtilitiesService.deviceInfo.isFileInputSupported;\r\n\t\t\t\t\t$scope.isMobileIos = UtilitiesService.deviceInfo.isMobileIos;\r\n\t\t\t\t\t$scope.isProposalEmailEditingEnabled = systemConstants.docGenCustomSettings.IsProposalEmailEditingEnabled;\r\n\t\t\t\t\t$scope.origEmailSubject = '';\r\n\t\t\t\t\t$scope.origEmailBody = '';\r\n\t\t\t\t\t$scope.isActionInProgress = false;\r\n\r\n\t\t\t\t\tvar emailSentNotificationTimeout = 5000;\r\n\t\t\t\t\tvar currentProposalId = GlobalService.currentProposalId;\r\n\t\t\t\t\tvar emailAttachmentsArr = EmailService.mergedDocInfo.length ?\r\n\t\t\t\t\t\tEmailService.mergedDocInfo :\r\n\t\t\t\t\t\tEmailService.mergedSourceDocsAttachInfo;\r\n\t\t\t\t\tvar quoteDialogInstance = {};\r\n\t\t\t\t\tvar attachExtraAttachments = [];\r\n\t\t\t\t\tvar allEmailTemplates = [];\r\n\t\t\t\t\tvar folderIdToEmailTemplatesMap = {};\r\n\t\t\t\t\tvar emailTemplateMap = {};\r\n\t\t\t\t\tvar defaultEmailTemplate = GlobalService.defaultEmailTemplate;\r\n\t\t\t\t\t$scope.proposalAlreadyPresented = GlobalService.proposalInfo.Approval_Stage__c === $scope.labels.PresentedApprovalStage;\r\n\t\t\t\t\tRemoteService.getEmailFolders().then(function(response) {\r\n\t\t\t\t\t\t$scope.emailFolderList = response;\r\n\t\t\t\t\t\tif (defaultEmailTemplate) {\r\n\t\t\t\t\t\t\tlet defaultFolder = _.find(response, {Id : defaultEmailTemplate.FolderId});\r\n\t\t\t\t\t\t\t$scope.selectedEmailFolder = defaultFolder;\r\n\t\t\t\t\t\t\t_selectFolder(defaultFolder);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t// Get the attachments for the currently selected document\r\n\t\t\t\t\tRemoteService.getAttachments(currentProposalId).then(function(response) {\r\n\t\t\t\t\t\t$scope.rowCollection = response;\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t$scope.addToMerge = function () {\r\n\t\t\t\t\t\t$scope.fileIsFromQA = true;\r\n\t\t\t\t\t\t_.map($scope.rowCollection, function(row) {\r\n\t\t\t\t\t\t\tif (row.isSelected) {\r\n\t\t\t\t\t\t\t\tdelete row.isSelected;\r\n\t\t\t\t\t\t\t\tif(angular.isDefined(attachExtraAttachments)) attachExtraAttachments.push(angular.fromJson(angular.toJson(row)));\r\n\t\t\t\t\t\t\t\tvar object = {\r\n\t\t\t\t\t\t\t\t\tlastModified: '',\r\n\t\t\t\t\t\t\t\t\tlastModifiedDate: {},\r\n\t\t\t\t\t\t\t\t\tname: row.Title,\r\n\t\t\t\t\t\t\t\t\tsize: row.BodyLength,\r\n\t\t\t\t\t\t\t\t\ttype: row.ContentType,\r\n\t\t\t\t\t\t\t\t\twebkitRelativePath: ''\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\tif(angular.isDefined($scope.extraAttachments)) $scope.extraAttachments.push(object);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t$scope.dismissQuoteDialog();\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tvar _selectDefaultEmailTemplate = function() {\r\n\t\t\t\t\t\t$scope.selectedEmailTpl = $scope.emailTemplates[0];\r\n\t\t\t\t\t\t// pre-select default email template if available\r\n\t\t\t\t\t\tif (defaultEmailTemplate) {\r\n\t\t\t\t\t\t\tconst existingTemplate = _.find($scope.emailTemplates, {Id : defaultEmailTemplate.Id});\r\n\t\t\t\t\t\t\tif (existingTemplate) {\r\n\t\t\t\t\t\t\t\t$scope.selectedEmailTpl = existingTemplate;\r\n\t\t\t\t\t\t\t\t$scope.emailTemplates.unshift(existingTemplate);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t_selectTemplate($scope.selectedEmailTpl);\r\n\t\t\t\t\t\t$scope.emailTemplates = _.uniq($scope.emailTemplates);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar _serviceFailure = function(reason) {\r\n\t\t\t\t\t\t// unkown error occurred\r\n\t\t\t\t\t\tPageNotificationService.hasPageNotification = true;\r\n\t\t\t\t\t\tPageNotificationService.alert = {\r\n\t\t\t\t\t\t\ttype: 'danger',\r\n\t\t\t\t\t\t\tmessage: vm.labels.GenericServiceFailureError\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tfunction getEmailTemplates(folderId) {\r\n\t\t\t\t\t\tif (folderIdToEmailTemplatesMap[folderId]) {\r\n\t\t\t\t\t\t\treturn $q.when(folderIdToEmailTemplatesMap[folderId]);\r\n\t\t\t\t\t\t} \r\n\t\t\t\t\t\treturn RemoteService.getEmailTemplates(folderId);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfunction getEmailTemplate(templateId) {\r\n\t\t\t\t\t\tif (emailTemplateMap[templateId]) {\r\n\t\t\t\t\t\t\treturn $q.when(emailTemplateMap[templateId]);\r\n\t\t\t\t\t\t} \r\n\t\t\t\t\t\treturn RemoteService.getEmailTemplate(templateId);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar _selectFolder = function(folder) {\r\n\t\t\t\t\t\t// clear selection\r\n\t\t\t\t\t\t$scope.selectedEmailTpl = {TemplateType : 'text'};\r\n\t\t\t\t\t\t$scope.emailBody = '';\r\n\t\t\t\t\t\t$scope.subject = '';\r\n\t\t\t\t\t\t$scope.emailTemplates = [];\r\n\t\t\t\t\t\t$scope.isActionInProgress = true;\r\n\t\t\t\t\t\tgetEmailTemplates(folder.Id).then(function(emailTemplates) {\r\n\t\t\t\t\t\t\tif (!_.isEmpty(emailTemplates)) {\r\n\t\t\t\t\t\t\t\t$scope.emailTemplates = emailTemplates;\r\n\t\t\t\t\t\t\t\t_selectDefaultEmailTemplate();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(!_.has(folderIdToEmailTemplatesMap, folder.Id)) {\r\n\t\t\t\t\t\t\t\tfolderIdToEmailTemplatesMap[folder.Id] = emailTemplates;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t$scope.isActionInProgress = false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tvar _selectTemplate = function(template) {\r\n\t\t\t\t\t\t$scope.isActionInProgress = true;\r\n\t\t\t\t\t\tgetEmailTemplate(template.Id).then(function(emailTemplate) {\r\n\t\t\t\t\t\t\t$scope.emailBody = (angular.isDefined(emailTemplate.Body)) ? emailTemplate.Body : \"\";\r\n\r\n\t\t\t\t\t\t\t$scope.subject = (angular.isDefined(emailTemplate.Subject)) ? emailTemplate.Subject : \"\";\r\n\r\n\t\t\t\t\t\t\t// store original subject and body to detect change\r\n\t\t\t\t\t\t\t$scope.origEmailSubject = $scope.subject;\r\n\t\t\t\t\t\t\t$scope.origEmailBody = $scope.emailBody;\r\n\t\t\t\t\t\t\t$scope.isTemplateMerged = false;\r\n\t\t\t\t\t\t\t$scope.isHtmlTemplate = (emailTemplate.TemplateType.toUpperCase() !== 'TEXT');\r\n\t\t\t\t\t\t\t$scope.isActionInProgress = false;\r\n\t\t\t\t\t\t\tif(!_.has(emailTemplateMap, emailTemplate.Id)) {\r\n\t\t\t\t\t\t\t\temailTemplateMap[emailTemplate.Id] = emailTemplate;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t$scope.uploadExtraAttachments = function() {\r\n\t\t\t\t\t\t$scope.fileIsFromQA = false;\r\n\t\t\t\t\t\t_.map($scope.extraAttachments, function(file) {\r\n\t\t\t\t\t\t\tangular.fromJson(angular.toJson(file)); // Strip the angular internal props i.e. $$hashKey\r\n\t\t\t\t\t\t\tencodeAndUploadFileAttachment(file);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t// This function will be called per file\r\n\t\t\t\t\tfunction encodeAndUploadFileAttachment(file) {\r\n\t\t\t\t\t\tvar attachmentBody;\r\n\t\t\t\t\t\tvar reqObj = {};\r\n\t\t\t\t\t\t$scope.fileUploaded = false;\r\n\r\n\t\t\t\t\t\tif(angular.isUndefined(file.type))\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\treturn; // No need to upload files from Quote Attachments\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (file) {\r\n\t\t\t\t\t\t\tvar fileReader = new FileReader();\r\n\r\n\t\t\t\t\t\t\tfileReader.onloadend = function(e) {\r\n\t\t\t\t\t\t\t\tattachmentBody = this.result.match(/,(.*)$/)[1];\r\n\t\t\t\t\t\t\t\treqObj = {\r\n\t\t\t\t\t\t\t\t\t'parentId': currentProposalId,\r\n\t\t\t\t\t\t\t\t\t'attachmentName': file.name,\r\n\t\t\t\t\t\t\t\t\t'attachmentBody': attachmentBody\r\n\t\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\t\tRemoteService.uploadAttachment(reqObj).then(function(response) {\r\n\t\t\t\t\t\t\t\t\tattachExtraAttachments.push(response);\r\n\t\t\t\t\t\t\t\t\t$scope.fileUploaded = true;\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\tfileReader.onerror = function(e) {\r\n\t\t\t\t\t\t\t\t// vm.filesValid = false;\r\n\t\t\t\t\t\t\t\tconsole.log('file is not valid');\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tfileReader.onabort = function(e) {\r\n\t\t\t\t\t\t\t\tconsole.log('file is not valid');\r\n\t\t\t\t\t\t\t\t// vm.filesValid = false;\r\n\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\tfileReader.readAsDataURL(file); //Read the body of the file\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t$scope.selectedTpl = function(value) {\r\n\t\t\t\t\t\t_selectTemplate(value);\r\n\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t$scope.selectedFldr = function(value) {\r\n\t\t\t\t\t\t_selectFolder(value);\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t$scope.emailTemplateIsSelected = function() {\r\n\t\t\t\t\t\treturn (angular.isDefined($scope.selectedEmailTpl) && angular.isDefined($scope.selectedEmailTpl.Id) && !($scope.isTemplateMerged));\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t$scope.formHasInvalidEmail = false;\r\n\r\n\t\t\t\t\tvar _validEmail = function(value) {\r\n\t\t\t\t\t\tif(!angular.isDefined(value)) return;\r\n\r\n\t\t\t\t\t\tvar re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n\r\n\t\t\t\t\t\tvar emailList = [];\r\n\r\n\t\t\t\t\t\t// remove spaces\r\n\t\t\t\t\t\tvalue = value.split(' ').join('');\r\n\r\n\t\t\t\t\t\tif(value.indexOf(\";\") !== -1) {\r\n\t\t\t\t\t\t\temailList = value.split(';');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\temailList.push(value);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tfor (var i = 0; i < emailList.length; i++) {\r\n\t\t\t\t\t\t\tvar emailAddr = emailList[i];\r\n\t\t\t\t\t\t\tif(!re.test(emailAddr)) {\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tvar _validateEmailField = function(value) {\r\n\t\t\t\t\t\t$scope.formHasInvalidEmail = false;\r\n\r\n\t\t\t\t\t\tif(value === \"\") return;\r\n\r\n\t\t\t\t\t\t$scope.formHasInvalidEmail =  !_validEmail(value);\r\n\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t// returns temporary template id in case of text templates\r\n\t\t\t\t\tfunction getEmailTemplateId(emailObj) {\r\n\t\t\t\t\t\tif (angular.isDefined(emailObj.emailTemplateId) \r\n\t\t\t\t\t\t\t\t&& emailObj.emailTemplateFormat.toUpperCase() == 'TEXT'\r\n\t\t\t\t\t\t\t\t&& isEmailSubOrBodyChanged()) {\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\treturn RemoteService.createTempEmailTemplate(emailObj);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn $q.when(emailObj.emailTemplateId);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tfunction isEmailSubOrBodyChanged() {\r\n\t\t\t\t\t\treturn ($scope.emailBody != $scope.origEmailBody || $scope.subject != $scope.origEmailSubject);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t$scope.emailToOnChange = function() {\r\n\t\t\t\t\t\tif($scope.emailTo === \"\") {\r\n\t\t\t\t\t\t\t$scope.noRecipient__added = true;\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t_validateEmailField($scope.emailTo);\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t$scope.emailCcOnChange = function() {\r\n\t\t\t\t\t\t_validateEmailField($scope.emailCC);\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t$scope.emailBccOnChange = function() {\r\n\t\t\t\t\t\t_validateEmailField($scope.emailBcc);\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tRemoteService.getDefaultContact(currentProposalId).then\r\n\t\t\t\t\t(\r\n\t\t\t\t\t\tfunction(response) {\r\n\t\t\t\t\t\t\tif (response && response.Email) {\r\n\t\t\t\t\t\t\t\t$scope.emailTo += response.Email;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfunction(reason) {\r\n\t\t\t\t\t\t\tconsole.log(reason);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\tif(emailAttachmentsArr.length) {\r\n\t\t\t\t\t\t_.map(emailAttachmentsArr, function(obj, index) {\r\n\t\t\t\t\t\t\temailAttachmentsArr[index] = angular.fromJson(angular.toJson(obj)); // Strip the angular internal props i.e. $$hashKey\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t$scope.getFileTypeIconUrl = function(type) {\r\n\t\t\t\t\t\treturn GlobalService.getFileTypeIconUrl({ type: type });\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t$scope.sendEmail = function() {\r\n\t\t\t\t\t\t// validate all email values\r\n\t\t\t\t\t\t_validateEmailField($scope.emailTo);\r\n\t\t\t\t\t\tif($scope.formHasInvalidEmail) return;\r\n\r\n\t\t\t\t\t\t_validateEmailField($scope.emailCC);\r\n\t\t\t\t\t\tif($scope.formHasInvalidEmail) return;\r\n\r\n\t\t\t\t\t\t_validateEmailField($scope.emailBcc);\r\n\t\t\t\t\t\tif($scope.formHasInvalidEmail) return;\r\n\r\n\t\t\t\t\t\tif($scope.emailTo === '') {\r\n\t\t\t\t\t\t\t$scope.noRecipient__added = true;\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar emailTo = $scope.emailTo.split(';');\r\n\t\t\t\t\t\tvar emailCC = $scope.emailCC !== '' ? $scope.emailCC.split(';') : [];\r\n\t\t\t\t\t\tvar emailBcc = $scope.emailBcc !== '' ? $scope.emailBcc.split(';') : [];\r\n\t\t\t\t\t\tif(attachExtraAttachments.length) {\r\n\t\t\t\t\t\t\t_.map(attachExtraAttachments, function (file) {\r\n\t\t\t\t\t\t\t\temailAttachmentsArr.push(file);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar attachments = [];\r\n\t\t\t\t\t\tif(emailAttachmentsArr.length) {\r\n\t\t\t\t\t\t\t_.map(emailAttachmentsArr, function (file) {\r\n\t\t\t\t\t\t\t\tvar newInst = file;\r\n\r\n\t\t\t\t\t\t\t\t// remove these objects as they will not be recognized by server.\r\n\t\t\t\t\t\t\t\tdelete newInst.contextMenu;\r\n\t\t\t\t\t\t\t\tdelete newInst.editableFieldSettings;\r\n\r\n\t\t\t\t\t\t\t\tattachments.push(newInst);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar emailObj = {\r\n\t\t\t\t\t\t\t'emailTo': emailTo,\r\n\t\t\t\t\t\t\t'emailCc': emailCC,\r\n\t\t\t\t\t\t\t'emailBcc': emailBcc,\r\n\t\t\t\t\t\t\t'emailSubject': $scope.subject,\r\n\t\t\t\t\t\t\t'emailTemplateId': null,\r\n\t\t\t\t\t\t\t'attachmentInfoList': attachments,\r\n\t\t\t\t\t\t\t'proposalId': currentProposalId,\r\n\t\t\t\t\t\t\t'makePresented': $scope.approvalStatus\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\temailObj.emailBody = ($scope.isTemplateMerged && $scope.selectedEmailTpl.TemplateType !== 'text')\r\n\t\t\t\t\t\t\t\t\t\t\t ? $sce.getTrustedHtml($scope.emailBody) : $scope.emailBody;\r\n\r\n\t\t\t\t\t\tif(angular.isDefined($scope.selectedEmailTpl.TemplateType)) {\r\n\t\t\t\t\t\t\temailObj.emailTemplateFormat = $scope.selectedEmailTpl.TemplateType.toUpperCase();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (!$scope.isTemplateMerged) {\r\n\t\t\t\t\t\t\temailObj.emailTemplateId = $scope.selectedEmailTpl.Id;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\temailObj.emailSubject = $scope.subject;\r\n\t\t\t\t\t\t$scope.isActionInProgress = true;\r\n\t\t\t\t\t\tconst dataPromise = getEmailTemplateId(emailObj);\r\n\r\n\t\t\t\t\t\tdataPromise.then((emailTemplateId) => {\r\n\t\t\t\t\t\t\temailObj.emailTemplateId = emailTemplateId;\r\n\t\t\t\t\t\t\tRemoteService.sendEmail(emailObj).then(\r\n\t\t\t\t\t\t\t\tfunction(response) {\r\n\t\t\t\t\t\t\t\t\tif(response) {\r\n\t\t\t\t\t\t\t\t\t\tattachExtraAttachments = [];\r\n\t\t\t\t\t\t\t\t\t\tPageNotificationService.hasPageNotification = true;\r\n\t\t\t\t\t\t\t\t\t\tPageNotificationService.alert = {\r\n\t\t\t\t\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\t\t\t\t\tmessage: $scope.labels.EmailSentNotification,\r\n\t\t\t\t\t\t\t\t\t\t\ttimeout: emailSentNotificationTimeout\r\n\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t// unkown error occurred\r\n\t\t\t\t\t\t\t\t\t\tPageNotificationService.hasPageNotification = true;\r\n\t\t\t\t\t\t\t\t\t\tPageNotificationService.alert = {\r\n\t\t\t\t\t\t\t\t\t\t\ttype: 'danger',\r\n\t\t\t\t\t\t\t\t\t\t\tmessage: $scope.labels.GenericServiceFailureError\r\n\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tdeleteEmailTemplate(emailTemplateId);\r\n\t\t\t\t\t\t\t\t\t$scope.isActionInProgress = false;\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfunction(reason) {\r\n\t\t\t\t\t\t\t\t\tconsole.log('reason: ' + reason);\r\n\t\t\t\t\t\t\t\t\t$scope.isActionInProgress = false;\r\n\t\t\t\t\t\t\t\t}\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t$scope.close();\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t$scope.populateEmailContent = function() {\r\n\r\n\t\t\t\t\t\tvar emailObj = {\r\n\t\t\t\t\t\t\t'emailTemplateId': $scope.selectedEmailTpl.Id,\r\n\t\t\t\t\t\t\t'emailTemplateFormat': $scope.selectedEmailTpl.TemplateType,\r\n\t\t\t\t\t\t\t'proposalId': currentProposalId,\r\n\t\t\t\t\t\t\t'emailBody' : $scope.emailBody,\r\n\t\t\t\t\t\t\t'emailSubject' : $scope.subject\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\t$scope.isActionInProgress = true;\r\n\t\t\t\t\t\tconst dataPromise = getEmailTemplateId(emailObj);\t\t\t\t\t\t\r\n\t\t\t\t\t\tdataPromise.then((emailTemplateId) => {\r\n\t\t\t\t\t\t\temailObj.emailTemplateId = emailTemplateId;\r\n\t\t\t\t\t\t\tRemoteService.populateEmailContent(emailObj).then(\r\n\t\t\t\t\t\t\t\tfunction(response) {\r\n\t\t\t\t\t\t\t\t\tif(!angular.isDefined(response.emailBody) && !angular.isDefined(response.emailSubject)) {\r\n\t\t\t\t\t\t\t\t\t\t// user chose no email template\r\n\t\t\t\t\t\t\t\t\t\t$scope.emailBody = \"\";\r\n\t\t\t\t\t\t\t\t\t\t$scope.subject = \"\";\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t$scope.isTemplateMerged = true;\r\n\t\t\t\t\t\t\t\t\t\t$scope.emailBody = ($scope.selectedEmailTpl.TemplateType == 'HTML')\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? $sce.trustAsHtml(response.emailBody)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: response.emailBody;\r\n\t\t\t\t\t\t\t\t\t\t$scope.subject = response.emailSubject;\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t$scope.origEmailSubject = $scope.subject;\r\n\t\t\t\t\t\t\t\t\t$scope.origEmailBody = $scope.emailBody;\r\n\t\t\t\t\t\t\t\t\tdeleteEmailTemplate(emailTemplateId);\r\n\t\t\t\t\t\t\t\t\t$scope.isActionInProgress = false;\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfunction(reason) {\r\n\t\t\t\t\t\t\t\t\tconsole.log('reason: ' + reason);\r\n\t\t\t\t\t\t\t\t\t$scope.isActionInProgress = false;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tfunction deleteEmailTemplate(emailTemplateId) {\r\n\t\t\t\t\t\t// only delete temporary email template\r\n\t\t\t\t\t\tif (emailTemplateId && emailTemplateId != $scope.selectedEmailTpl.Id) {\r\n\t\t\t\t\t\t\tRemoteService.deleteEmailTemplate(emailTemplateId);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Remove file\r\n\t\t\t\t\t$scope.removeFile = function(file, idx) {\r\n\t\t\t\t\t\t// Remove from the view\r\n\t\t\t\t\t\t_.remove($scope.extraAttachments, function(obj) {\r\n\t\t\t\t\t\t\treturn obj.name === file.name;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t_.remove(attachExtraAttachments, function(obj) {\r\n\t\t\t\t\t\t\treturn obj.Title === file.name;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t// The following is the scope of the select template popup\r\n\t\t\t\t\t$scope.dismiss = function() {\r\n\t\t\t\t\t\tEmailService.wantToEmail = false;\r\n\t\t\t\t\t\tPreviewService.dialogIsOpen = false;\r\n\t\t\t\t\t\t$uibModalInstance.dismiss('cancel');\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t// Dismiss the sub-dialog of quote attachments\r\n\t\t\t\t\t$scope.dismissQuoteDialog = function () {\r\n\t\t\t\t\t\tquoteDialogInstance.dismiss('dismiss');\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t$scope.close = function() {\r\n\t\t\t\t\t\tEmailService.wantToEmail = false;\r\n\t\t\t\t\t\tPreviewService.dialogIsOpen = false;\r\n\t\t\t\t\t\t$uibModalInstance.dismiss('cancel');\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t$scope.openQuoteDialog = function() {\r\n\t\t\t\t\t\t$scope.displayedCollection = [];\r\n\t\t\t\t\t\tRemoteService.getAttachments(currentProposalId).then(function(response) {\r\n\t\t\t\t\t\t\t$scope.rowCollection = response;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t};\r\n\r\n\r\n\t\t\t\t\t$scope.openNADialog = function() {\r\n\r\n\t\t\t\t\t\tquoteDialogInstance = $uibModal.open({\r\n\t\t\t\t\t\t\t                                     backdrop: 'static',\r\n\t\t\t\t\t\t\t                                     animation: true,\r\n\t\t\t\t\t\t\t                                     template: require('./email.listNADialog.tpl.html'),\r\n\t\t\t\t\t\t\t                                     size: tplDialogSize,\r\n\t\t\t\t\t\t\t                                     keyboard: false,\r\n\t\t\t\t\t\t\t                                     scope: $scope\r\n\t\t\t\t\t\t                                     });\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar dialogInstance = $uibModal.open({\r\n\t\t\t\t\tbackdrop: 'static',\r\n\t\t\t\t\tanimation: $scope.animationsEnabled,\r\n\t\t\t\t\tsize: tplDialogSize,\r\n\t\t\t\t\ttemplate: require('./email.tpl.html'),\r\n\t\t\t\t\tkeyboard: false,\r\n\t\t\t\t\tcontrollerAs: 'parentDialog',\r\n\t\t\t\t\tbindToController: true,\r\n\t\t\t\t\tcontroller: emailDialogCtrl\r\n\t\t\t\t});\r\n\r\n\t\t\t};\r\n\r\n\t\t\tvar deregisterWatch1 = $scope.$watch(function() {\r\n\t\t\t\t\treturn EmailService.wantToEmail;\r\n\t\t\t\t},\r\n\t\t\t\tfunction(newVal, oldVal) {\r\n\t\t\t\t\tif (newVal === true) {\r\n\t\t\t\t\t\tvm.wantToEmail = newVal;\r\n\t\t\t\t\t\tvm.openDialog();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t\t$scope.$on('$destroy', function() {\r\n\t\t\t\tderegisterWatch1();\r\n\t\t\t});\r\n\r\n\t\t};\r\n\r\n\t\temailController.$inject = ['$scope',\r\n\t\t\t'$uibModal',\r\n\t\t\t'lodash',\r\n\t\t\t'RemoteService',\r\n\t\t\t'i18nService',\r\n\t\t\t'systemConstants',\r\n\t\t\t'EmailService',\r\n\t\t\t'PageContainerService',\r\n\t\t\t'ProposalsListService',\r\n\t\t\t'PageNotificationService',\r\n\t\t\t'GlobalService',\r\n\t\t\t'PreviewService',\r\n\t\t\t'UtilitiesService'\r\n\t\t];\r\n\r\n\t\treturn {\r\n\t\t\trestrict: 'E',\r\n\t\t\tcontroller: emailController,\r\n\t\t\tcontrollerAs: 'vm',\r\n\t\t\tscope: {},\r\n\t\t\tbindToController: {},\r\n\t\t\ttemplate: '<div></div>'\r\n\t\t};\r\n\t}];\r\n})();\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/common/directives/email/email.directive.js\n// module id = 34\n// module chunks = 1","module.exports = \"<div class='modal-header list-na__header'>\\r\\n\\t<h3 class='modal-title'>{{labels.QuoteAttachments}}</h3>\\r\\n\\t<i class='fa fa-times list-na__close' ng-click='dismissQuoteDialog()' aria-hidden='true'></i>\\r\\n</div>\\r\\n<div class=\\\"modal-body list-na__body\\\">\\r\\n\\t<div class='templates'>\\r\\n\\t\\t<!-- <div class='templates__search'></div> -->\\r\\n\\t\\t<div class='templates__table'>\\r\\n\\t\\t\\t<div>\\r\\n\\t\\t\\t\\t<table st-table=\\\"displayedCollection\\\" st-safe-src='rowCollection' class='table'>\\r\\n\\t\\t\\t\\t\\t<thead>\\r\\n\\t\\t\\t\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t<th colspan=\\\"2\\\" class='searchable'>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class='searchbar'>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"fa fa-search\\\"></i>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<input st-search='' class=\\\"form-control\\\" placeholder=\\\"{{labels.Search}}\\\" type=\\\"text\\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</th>\\r\\n\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t<th st-sort=\\\"Name\\\" class='sortable'>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<span>{{labels.DocumentName}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"fa fa-caret-down\\\" aria-hidden=\\\"true\\\"></i>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"fa fa-caret-up\\\" aria-hidden=\\\"true\\\"></i>\\r\\n\\t\\t\\t\\t\\t\\t\\t</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t<th st-sort=\\\"Name\\\" class='sortable'>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<span>{{labels.DocumentType}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"fa fa-caret-down\\\" aria-hidden=\\\"true\\\"></i>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"fa fa-caret-up\\\" aria-hidden=\\\"true\\\"></i>\\r\\n\\t\\t\\t\\t\\t\\t\\t</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t<th st-sort=\\\"BodyLength\\\" class='sortable'>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<span>{{labels.SizeKB}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"fa fa-caret-down\\\" aria-hidden=\\\"true\\\"></i>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"fa fa-caret-up\\\" aria-hidden=\\\"true\\\"></i>\\r\\n\\t\\t\\t\\t\\t\\t\\t</th>\\r\\n\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t</thead>\\r\\n\\t\\t\\t\\t\\t<tbody>\\r\\n\\t\\t\\t\\t\\t\\t<tr ng-if='displayedCollection.length === 0'>\\r\\n\\t\\t\\t\\t\\t\\t\\t<td>{{labels.NoAttachmentsToDisplay}}</td>\\r\\n\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t<tr st-select-row=\\\"row\\\" st-select-mode=\\\"multi\\\" ng-repeat=\\\"row in displayedCollection\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<td>{{row.Title}}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t<td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<i class='fa fileIcon' ng-class='getFileTypeIconClass(row.ContentType)'></i>\\r\\n\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t<td>{{row.BodyLength/1000}}</td>\\r\\n\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</div>\\r\\n<div class=\\\"modal-footer list-na__footer\\\">\\r\\n\\t<button class=\\\"btn btn-primary\\\" type=\\\"button\\\" ng-click=\\\"addToMerge()\\\">{{labels.AttachToEmail}}</button>\\r\\n</div>\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/common/directives/email/email.listNADialog.tpl.html\n// module id = 35\n// module chunks = 1","module.exports = \"<div class='modal-header dialog-header'>\\r\\n    <h3 class='modal-title'>{{labels.SendEmail}}</h3>\\r\\n    <i class='fa fa-times modal-dismiss-btn' ng-click='dismiss()' aria-hidden='true'></i>\\r\\n</div>\\r\\n<div class='modal-body dialog-body'>\\r\\n    <!-- Email To, From, cc, Bcc, Subject goes here -->\\r\\n    <div class='email__header'>\\r\\n        <!-- Search and list the available templates -->\\r\\n        <form class='form-horizontal'>\\r\\n            <div class='form-group'>\\r\\n                <label for='toAddress' class='col-sm-4 control-label'>{{labels.To}}</label>\\r\\n                <div class='col-sm-7'>\\r\\n                    <input type='text' class='form-control' id='toAddress' ng-model='emailTo' ng-change=\\\"emailToOnChange()\\\">\\r\\n                </div>\\r\\n                <div class='col-sm-2'>\\r\\n                    <a class='links' ng-click='isCCDivOpen = !isCCDivOpen'>{{labels.CC}}</a>\\r\\n                    <a class='links' ng-click='isBCCDivOpen = !isBCCDivOpen'>{{labels.BCC}}</a>\\r\\n                    <span ng-show=\\\"fileUploadSupport && !isMobileIos\\\">\\r\\n                        <i class=\\\"fa fa-paperclip attachMoreFiles\\\"\\r\\n                           ng-model='extraAttachments'\\r\\n                           ngf-change=\\\"uploadExtraAttachments()\\\"\\r\\n                           ngf-select\\r\\n                           ngf-multiple=\\\"true\\\"\\r\\n                           ngf-max-size=\\\"4MB\\\"\\r\\n                           ngf-keep=\\\"'distinct'\\\"\\r\\n                           aria-hidden=\\\"true\\\"\\r\\n                           title='{{labels.BrowseToComputer}}'>\\r\\n                        </i>\\r\\n                    </span>\\r\\n\\r\\n                    <button class='btn btn-link'\\r\\n                        title='{{labels.AddFromQuote}}'\\r\\n                        ng-click='openNADialog()'>\\r\\n                        {{labels.AddFromQuote}}\\r\\n                    </button>\\r\\n                </div>\\r\\n            </div>\\r\\n            <form class='form-horizontal'>\\r\\n                <div class='form-group'>\\r\\n                    <label for='sel1' class='col-sm-4 control-label'>{{labels.SelectEmailFolder}}</label>\\r\\n                    <div class='col-sm-7'>\\r\\n                        <select class='form-control'\\r\\n                            id='sel1'\\r\\n                            ng-model='selectedEmailFolder'\\r\\n                            ng-options='folder.Name for folder in emailFolderList'\\r\\n                            ng-change=\\\"selectedFldr(selectedEmailFolder)\\\"\\r\\n                            ng-disabled=\\\"isActionInProgress\\\"\\r\\n                        >\\r\\n                        </select>\\r\\n                    </div>\\r\\n                </div>\\r\\n\\r\\n                <form class='form-horizontal'>\\r\\n                    <div class='form-group'>\\r\\n                        <label for='sel2' class='col-sm-4 control-label'>{{labels.SelectEmailTemplate}}</label>\\r\\n                        <div class='col-sm-7'>\\r\\n                            <select class='form-control'\\r\\n                                id='sel2'\\r\\n                                ng-model='selectedEmailTpl'\\r\\n                                ng-options='emailTemplate.Name for emailTemplate in emailTemplates'\\r\\n                                ng-change=\\\"selectedTpl(selectedEmailTpl)\\\"\\r\\n                                ng-disabled=\\\"isActionInProgress\\\"\\r\\n                            >\\r\\n                            </select>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                <div ng-if='selectedEmailTpl.TemplateType != \\\"text\\\"' class='form-group'>\\r\\n                    <label for='subjectLine' class='col-sm-4 control-label'>&nbsp;</label>\\r\\n                    <div class='col-sm-7'>\\r\\n                        <span class=\\\"email__warning\\\">{{labels.SubjectLineAndEmailBodyDisabledSelectedTemplate}}</span>\\r\\n                    </div>\\r\\n                </div>\\r\\n                <div class='form-group'>\\r\\n                    <label for='subjectLine' class='col-sm-4 control-label'>{{labels.Subject}}</label>\\r\\n                    <div class='col-sm-7'>\\r\\n                        <input type='text' ng-disabled='selectedEmailTpl.TemplateType != \\\"text\\\"' class='form-control' id='subjectLine' ng-model='subject'>\\r\\n                    </div>\\r\\n                </div>\\r\\n                <div class='form-group' ng-show='isCCDivOpen'>\\r\\n                    <label for='ccAddress' class='col-sm-4 control-label'>{{labels.CC}}</label>\\r\\n                    <div class='col-sm-7'>\\r\\n                        <input type='text' class='form-control' id='ccAddress' ng-model='emailCC' ng-change=\\\"emailCcOnChange()\\\">\\r\\n                    </div>\\r\\n                </div>\\r\\n                <div class='form-group' ng-show='isBCCDivOpen'>\\r\\n                    <label for='bccAddress' class='col-sm-4 control-label'>{{labels.BCC}}</label>\\r\\n                    <div class='col-sm-7'>\\r\\n                        <input type=\\\"text\\\" class='form-control' id='bccAddress' ng-model='emailBcc' ng-change=\\\"emailBccOnChange()\\\">\\r\\n                    </div>\\r\\n                </div>\\r\\n                <div class='form-group'>\\r\\n                    <label for='approval-status' class='col-sm-4 control-label'>{{labels.MarkProposalAsPresented}}</label>\\r\\n                    <div class='col-sm-7'>\\r\\n                        <input type='checkbox' ng-disabled='proposalAlreadyPresented' class='form-control check-control' id='approval-status' ng-model='approvalStatus' aria-label='Mark Proposal as presented'>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </form>\\r\\n        </form>\\r\\n    </div>\\r\\n    <div class='email__body'>\\r\\n        <div ng-if='noRecipient__added' class='email__error'>{{labels.EmailRecipientError}}</div>\\r\\n        <div ng-show='formHasInvalidEmail' class='email__error'>{{labels.InvalidEmail}}</div>\\r\\n        <div class=\\\"form-group\\\">\\r\\n            <div id='emailBody'>\\r\\n                <textarea ng-if=\\\"!isHtmlTemplate\\\"\\r\\n                    class='email__text'\\r\\n                    ng-disabled='selectedEmailTpl.TemplateType != \\\"text\\\"'\\r\\n                    ng-model='$parent.emailBody'>\\r\\n                </textarea>\\r\\n                <div class='email__text' \\r\\n                    ng-if=\\\"isHtmlTemplate\\\"\\r\\n                    ng-bind-html='emailBody'>\\r\\n                </div>                      \\r\\n            </div>  \\r\\n            <div class='modal-footer sel-tpl__footer'>\\r\\n                <button ng-hide='customURL' class='btn btn-primary' type='button' ng-disabled=\\\"isActionInProgress\\\" ng-click='populateEmailContent();'>{{labels.MergeFields}}</button>\\r\\n            </div>\\r\\n            <div class='attachments email__attachments' ng-if='mergedDocuments.length > 0'>\\r\\n                <div class='heading'>{{labels.Attachments}}</div>\\r\\n                <div class='body'>\\r\\n                    <ul class='list'>\\r\\n                        <li ng-repeat='file in mergedDocuments track by $index'>\\r\\n                            <img class=\\\"fileIcon\\\" ng-src=\\\"{{getFileTypeIconUrl(file.ContentType)}}\\\" />\\r\\n                            <span class='fileTitle'>{{file.Title}}</span>\\r\\n                        </li>\\r\\n                    </ul>\\r\\n                </div>\\r\\n            </div>\\r\\n            <div class='attachments email__extraFiles' ng-if='extraAttachments.length > 0'>\\r\\n                <div class='heading'>{{labels.AdditionalDocuments}}</div>\\r\\n                <div class='body'>\\r\\n                    <ul class='list extraList'>\\r\\n                        <li ng-repeat='file in extraAttachments'>\\r\\n                            <img class=\\\"fileIcon\\\" ng-src=\\\"{{getFileTypeIconUrl(file.type)}}\\\" />\\r\\n                            <span class='fileTitle'>{{file.name}}</span>\\r\\n                            <md-progress-linear ng-if='!fileUploaded && !fileIsFromQA' class='upload-progressBar' md-mode=\\\"indeterminate\\\" value=\\\"10\\\"></md-progress-linear>\\r\\n                            <i class=\\\"fa fa-times-circle rm-file-btn\\\" aria-hidden=\\\"true\\\" ng-if='fileUploaded || fileIsFromQA' ng-click='removeFile(file, $index)'></i>\\r\\n                        </li>\\r\\n                    </ul>\\r\\n                </div>\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n<div class='modal-footer sel-tpl__footer'>\\r\\n    <button ng-hide='customURL' class='btn btn-primary' ng-disabled=\\\"isActionInProgress\\\" type='button' ng-click='sendEmail();'>{{labels.Send}}</button>\\r\\n</div>\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/common/directives/email/email.tpl.html\n// module id = 36\n// module chunks = 1","(function() {\r\n\t'use strict';\r\n\tmodule.exports = ['$window',\r\n\t                  '$timeout', function($window, $timeout) {\r\n\t\t\treturn {\r\n\t\t\t\trestrict: 'A',\r\n\t\t\t\tscope: {\r\n\t\t\t\t\ttrigger: \"=focusAndSelect\"\r\n\t\t\t\t},\r\n\t\t\t\tlink: function(scope, element) {\r\n\t\t\t\t\tscope.$watch('trigger', function(value) {\r\n\t\t\t\t\t\tif (value) {\r\n\t\t\t\t\t\t\t$timeout(function() {\r\n\t\t\t\t\t\t\t\t// set focus to the element\r\n\t\t\t\t\t\t\t\tvar elem = element[0];\r\n\t\t\t\t\t\t\t\telem.focus();\r\n\r\n\t\t\t\t\t\t\t\t// highlight/select text\r\n\t\t\t\t\t\t\t\tif (!$window.getSelection().toString()) {\r\n\t\t\t\t\t\t\t\t\t// Required for mobile Safari\r\n\t\t\t\t\t\t\t\t\telem.setSelectionRange(0, elem.value.length);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t}];\r\n})();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/common/directives/focusAndSelect/focusAndSelect.directive.js\n// module id = 37\n// module chunks = 1","(function() {\r\n\t'use strict';\r\n\tmodule.exports = [function() {\r\n\r\n\t\tvar globalHeaderController;\r\n\r\n\t\tglobalHeaderController = function(i18nService, GlobalService, RemoteService) {\r\n\t\t\t//Extracts only menu related infos from all modules config\r\n\t\t\tvar vm = this;\r\n\t\t\tvar currentProposalInfo = {};\r\n\t\t\tvar currentProposalId = GlobalService.currentProposalId;\r\n\t\t\tvar nsPrefix = GlobalService.nameSpacePrefix;\r\n\t\t\tvm.labels = i18nService.CustomLabel;\r\n\r\n\t\t\tRemoteService.getProposalInfo(currentProposalId).then(function(response) {\r\n\t\t\t\tcurrentProposalInfo = response;\r\n\t\t\t\tvar proposalFieldName = currentProposalInfo[nsPrefix + 'Proposal_Name__c'] || '';\r\n\t\t\t\tvm.currentProposalName = vm.labels.ProposalTitle + ' ' +  proposalFieldName;\r\n\t\t\t\tGlobalService.proposalInfo = response;\t\r\n\t\t\t});\r\n\t\t\tif (GlobalService.defaultTemplateName) {\r\n\t\t\t\tRemoteService.getDefaultEmailTemplate().then(function(response) {\r\n\t\t\t\t\tGlobalService.defaultEmailTemplate = response;\r\n\t\t\t\t});\r\n\t\t\t}\t\t\t\r\n\t\t};\r\n\r\n\t\tglobalHeaderController.$inject = ['i18nService' ,'GlobalService', 'RemoteService'];\r\n\r\n\t\treturn {\r\n\t\t\trestrict: 'E',\r\n\t\t\treplace: true,\r\n\t\t\tcontroller: globalHeaderController,\r\n\t\t\tcontrollerAs: 'vm',\r\n\t\t\tscope: {},\r\n\t\t\tbindToController: {},\r\n\t\t\ttemplate: require('./globalHeader.tpl.html')\r\n\t\t};\r\n\r\n\t}];\r\n})();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/common/directives/globalHeader/globalHeader.directive.js\n// module id = 38\n// module chunks = 1","module.exports = \"<div class=\\\"global-header-container layout-row\\\">\\r\\n    <div class='global-header-container__left-block'>\\r\\n    \\t<div class='global-header-container__proposal'>\\r\\n    \\t\\t<span class='container__proposal-name'>{{vm.currentProposalName}}</span>\\r\\n    \\t</div>\\r\\n    </div>    \\r\\n</div>\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/common/directives/globalHeader/globalHeader.tpl.html\n// module id = 39\n// module chunks = 1","(function() {\r\n\t'use strict';\r\n\tmodule.exports = [function() {\r\n\r\n\t\tvar globalSubHeaderController;\r\n\r\n\t\tglobalSubHeaderController = function(i18nService, systemConstants, GlobalService) {\r\n\t\t\t//Extracts only menu related infos from all modules config\r\n\t\t\tvar vm = this;\r\n\t\t\tvar currentContext = GlobalService.currentContext;\r\n\t\t\tvar cartStatus = '';\r\n\t\t\tvar configRequestId = '';\r\n\t\t\tvar productConfigId = '';\r\n\t\t\tvar flow = '';\r\n\t\t\tvar launchState = '';\r\n\t\t\tvar cartBaseUrl = '';\r\n\t\t\tvar prefixOrigin = GlobalService.baseSFurl.replace('apttus-proposal', 'apttus-config2');\r\n\t\t\tvar isCommunitiesUser = systemConstants.docGenCustomSettings.IsCommunitiesUser;\r\n\t\t\tvar proposalRecordUrl = (isCommunitiesUser)\r\n\t\t\t\t\t\t\t\t\t\t? window.location.pathname.split('apex')[0] + GlobalService.currentProposalId // get the community name in the URL.\r\n\t\t\t\t\t\t\t\t\t\t: '/' + GlobalService.currentProposalId;\r\n\t\t\t\r\n\r\n\t\t\tvm.labels = i18nService.CustomLabel;\r\n\t\t\tvm.redirectTo = redirectTo;\r\n\r\n\t\t\tif(currentContext.toLowerCase() === 'cart') {\r\n\t\t\t\tcartStatus = systemConstants.cartStatusParam;\r\n\t\t\t\tconfigRequestId = systemConstants.configRequestParam;\r\n\t\t\t\tproductConfigId = systemConstants.productConfigParam;\r\n\t\t\t\tflow = systemConstants.cartFlowParam;\r\n\t\t\t\tlaunchState = systemConstants.launchStateParam;\r\n\t\t\t\tcartBaseUrl = prefixOrigin + '/apex/Cart' + '?cartStatus=' + cartStatus + '&configRequestId=' + configRequestId + '&id=' + productConfigId + '&flow=' + flow + '&launchState=' + launchState;\r\n\t\t\t}\r\n\r\n\t\t\tvar fromQuotePageLinks = [\r\n\t\t\t\t{\r\n\t\t\t\t\turl: proposalRecordUrl,\r\n\t\t\t\t\ttext: vm.labels.GoToProposal\r\n\t\t\t\t}\r\n\t\t\t];\r\n\r\n\t\t\tvar fromCartPageLinks = [\r\n\t\t\t\t{\r\n\t\t\t\t\turl: cartBaseUrl + '#/cart',\r\n\t\t\t\t\ttext: vm.labels.GoToPricing\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\turl: cartBaseUrl + '#!/catalog',\r\n\t\t\t\t\ttext: vm.labels.AddMoreProducts\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\turl: proposalRecordUrl,\r\n\t\t\t\t\ttext: vm.labels.GoToProposal\r\n\t\t\t\t}\r\n\t\t\t];\r\n\r\n\t\t\tif(currentContext !== 'proposal' && systemConstants.docGenCustomSettings.IsAssetEnabled) {\r\n\t\t\t\tfromCartPageLinks.splice(2,\r\n\t\t\t\t\t\t\t\t\t\t0,\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\turl: cartBaseUrl + '#!/assetsgrid',\r\n\t\t\t\t\t\t\t\t\t\t\ttext: vm.labels.InstalledProducts\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tvm.actionBtns = (currentContext === 'proposal') ? fromQuotePageLinks : fromCartPageLinks;\r\n\r\n\t\t\t/**\r\n\t\t\t * @param url\r\n\t\t\t */\r\n\t\t\tfunction redirectTo(url) {\r\n\t\t\t\tif ((typeof sforce != 'undefined') && sforce && (!!sforce.one)) {\r\n\t\t\t\t\tsforce.one.navigateToURL(url);\r\n\t\t\t\t} else {\r\n\t\t\t\t\twindow.location.href = url;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tglobalSubHeaderController.$inject = ['i18nService', 'systemConstants', 'GlobalService'];\r\n\r\n\t\treturn {\r\n\t\t\trestrict: 'E',\r\n\t\t\treplace: true,\r\n\t\t\tcontroller: globalSubHeaderController,\r\n\t\t\tcontrollerAs: 'vm',\r\n\t\t\tscope: {},\r\n\t\t\tbindToController: {},\r\n\t\t\ttemplate: require('./globalSubHeader.tpl.html')\r\n\t\t};\r\n\r\n\t}];\r\n})();\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/common/directives/globalSubHeader/globalSubHeader.directive.js\n// module id = 40\n// module chunks = 1","module.exports = \"<div class=\\\"global-sub-header-container layout-row\\\">\\r\\n\\t<div class='global-sub-header-container__left-block'>\\r\\n\\t\\t<div class='global-sub-header-container__buttons'>\\r\\n\\t\\t\\t<button class=\\\"btn btn-default btn-action global-sub-header-container__buttons-btn\\\" ng-repeat='btnName in vm.actionBtns' ng-click='vm.redirectTo(btnName.url)'>{{btnName.text}}</button>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</div>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/common/directives/globalSubHeader/globalSubHeader.tpl.html\n// module id = 41\n// module chunks = 1","(function() {\r\n\t'use strict';\r\n\tmodule.exports = [function() {\r\n\r\n\t\tvar pageContainerController;\r\n\r\n\t\tpageContainerController = function($scope) {\r\n\t\t\t//And the code goes like this\t\t\t\r\n\t\t};\r\n\r\n\t\tpageContainerController.$inject = ['$scope'];\r\n\r\n\t\treturn {\r\n\t\t\trestrict: 'E',\r\n\t\t\treplace: true,\r\n\t\t\tcontroller: pageContainerController,\r\n\t\t\tcontrollerAs: 'vm',\r\n\t\t\tscope: {},\r\n\t\t\tbindToController: {},\r\n\t\t\ttemplate: require('./pageContainer.tpl.html')\r\n\t\t};\r\n\r\n\t}];\r\n})();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/common/directives/pageContainer/pageContainer.directive.js\n// module id = 42\n// module chunks = 1","module.exports = \"<div class=\\\"page-container\\\" layout='row' flex layout-margin layout-fill>\\r\\n    <proposals-list class=\\\"proposals-list\\\" flex='30'></proposals-list>\\r\\n    <div layout='row' flex='70' class='page-container__doc'>\\r\\n        <attachments flex='40'></attachments>\\r\\n        <preview flex='60'></preview>\\r\\n    </div>\\r\\n</div>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/common/directives/pageContainer/pageContainer.tpl.html\n// module id = 43\n// module chunks = 1","(function() {\r\n\t'use strict';\r\n\tmodule.exports = [function() {\r\n\r\n\t\tvar pageNotificationController;\r\n\r\n\t\tpageNotificationController = function($scope,\r\n\t\t\t\t\t\t\t\t\t\t\t  GlobalService,\r\n\t\t\t\t\t\t\t\t\t\t\t  PageNotificationService,\r\n\t\t\t\t\t\t\t\t\t\t\t  i18nService,\r\n\t\t\t\t\t\t\t\t\t\t\t  $window) {\r\n\t\t\tvar vm = this;\r\n\t\t\tvar isCommunitiesUser = systemConstants.docGenCustomSettings.IsCommunitiesUser;\r\n\t\t\tvar proposalRecordUrl = (isCommunitiesUser) ? window.location.pathname.split('apex')[0] + GlobalService.currentProposalId : '/' + GlobalService.currentProposalId;\r\n\t\t\tvm.labels = i18nService.CustomLabel;\r\n\t\t\tvm.alert = PageNotificationService.alert;\r\n\r\n\t\t\tvm.closeAlert = function() {\r\n\t\t\t\tvm.hasNotification = false;\r\n\t\t\t\tPageNotificationService.hasPageNotification = false;\r\n\t\t\t\tPageNotificationService.alert = {};\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t * @param url\r\n\t\t\t */\r\n\t\t\tvm.redirectTo = function() {\r\n\t\t\t\tif ((typeof sforce != 'undefined') && sforce && (!!sforce.one)) {\r\n\t\t\t\t\tsforce.one.navigateToURL(proposalRecordUrl);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$window.location.href = proposalRecordUrl;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tvar deregisterWatch1 = $scope.$watch(function() {\r\n\t\t\t\t\treturn PageNotificationService.hasPageNotification;\r\n\t\t\t\t},\r\n\t\t\t\tfunction(newVal, oldVal) {\r\n\t\t\t\t\tif (newVal === true) {\r\n\t\t\t\t\t\tvm.hasNotification = newVal;\r\n\t\t\t\t\t\tvm.alert = PageNotificationService.alert;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (newVal === false) {\r\n\t\t\t\t\t\tvm.closeAlert();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t\t$scope.$on('$destroy', function() {\r\n\t\t\t\tderegisterWatch1();\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\tpageNotificationController.$inject = ['$scope',\r\n\t\t\t\t\t\t\t\t\t\t\t  'GlobalService',\r\n\t\t\t\t\t\t\t\t\t\t\t  'PageNotificationService',\r\n\t\t\t\t\t\t\t\t\t\t\t  'i18nService',\r\n\t\t\t\t\t\t\t\t\t\t\t  '$window'\r\n\t\t\t\t\t\t\t\t\t\t\t ];\r\n\r\n\t\treturn {\r\n\t\t\trestrict: 'E',\r\n\t\t\tcontroller: pageNotificationController,\r\n\t\t\tcontrollerAs: 'vm',\r\n\t\t\tscope: {},\r\n\t\t\tbindToController: {},\r\n\t\t\ttemplate: require('./pageNotification.tpl.html')\r\n\t\t};\r\n\r\n\t}];\r\n})();\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/common/directives/pageNotification/pageNotification.directive.js\n// module id = 44\n// module chunks = 1","module.exports = \"<div uib-alert type='{{vm.alert.type}}' class='alert' ng-if='vm.hasNotification' dismiss-on-timeout='{{vm.alert.timeout}}' close='vm.closeAlert()'>{{vm.alert.message}}\\r\\n\\t<a href=\\\"\\\" ng-if='vm.hasNotification && vm.alert.message == vm.labels.PreviewNotAvailableForFiles' ng-click='vm.redirectTo()'>{{vm.labels.GoToProposal}}</a>\\r\\n</div>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/common/directives/pageNotification/pageNotification.tpl.html\n// module id = 45\n// module chunks = 1","(function() {\r\n\tmodule.exports = [function() {\r\n\t\tvar proposalsListController;\r\n\t\tproposalsListController = function($scope,\r\n\t\t                                   $timeout,\r\n\t\t\t\t\t\t\t\t\t\t\t$sce,\r\n\t\t\t\t\t\t\t\t\t\t\t$filter,\r\n\t\t\t\t\t\t\t\t\t\t\t$uibModal,\r\n\t\t\t\t\t\t\t\t\t\t\t_,\r\n\t\t\t\t\t\t\t\t\t\t\tRemoteService,\r\n\t\t\t\t\t\t\t\t\t\t\ti18nService,\r\n                                            systemConstants,\r\n\t\t\t\t\t\t\t\t\t\t\tProposalsListService,\r\n\t\t\t\t\t\t\t\t\t\t\tPreviewService,\r\n\t\t\t\t\t\t\t\t\t\t\tEmailService,\r\n\t\t\t\t\t\t\t\t\t\t\tPageNotificationService,\r\n\t\t\t\t\t\t\t\t\t\t\tPageContainerService,\r\n\t\t\t\t\t\t\t\t\t\t\tGlobalService) {\r\n\t\t\tvar vm = this;\r\n\t\t\tvar currentProposalId = GlobalService.currentProposalId;\r\n\t\t\tvar proposalType = 'proposal';\r\n\t\t\tvar tplDialogSize = 'lg';\r\n\t\t\tvar nsPrefix = GlobalService.nameSpacePrefix || '';\r\n\r\n\t\t\tvm.labels = i18nService.CustomLabel;\r\n\t\t\tvm.currentProposalList = {};\r\n\t\t\tvm.selectedProposalDocIndex = {};\r\n\t\t\tvm.selectedTemplateId = '';\r\n\t\t\tvm.proposalListTitles = [];\r\n\t\t\tvm.listedResultsLimit = 1;\r\n\r\n\t\t\t// setup maximum length error message\r\n\t\t\tvm.MaximumCharacterLengthMessage = vm.labels.MaximumNumberOfCharacters.replace(\"{0}\", 80);\r\n\t\t\tvm.defaultTemplateSpinnerText = vm.labels.DocumentGenerationInProgress;\r\n\r\n\t\t\tvar customSettings = systemConstants.docGenCustomSettings;\r\n\t\t\tvar mergeTimeout = customSettings.MergeCallTimeoutMillis || 5000;\r\n\t\t\tvar submitDocGenTimeout = 5000;\r\n\r\n\t\t\tvar _serviceFailure = function(reason) {\r\n\t\t\t\t// unkown error occurred\r\n\t\t\t\tPageNotificationService.hasPageNotification = true;\r\n\t\t\t\tPageNotificationService.alert = {\r\n\t\t\t\t\ttype: 'danger',\r\n\t\t\t\t\tmessage: vm.labels.GenericServiceFailureError\r\n\t\t\t\t};\r\n\t\t\t};\r\n\r\n\t\t\tRemoteService.getFastDocGenDetails(currentProposalId).then(function(response) {\r\n\t\t\t\tif(response.isFastDocGen) {\r\n\t\t\t\t\t// flag to disable Create New Proposal button\r\n\t\t\t\t\tvm.isFastDocGen = true;\r\n\r\n\t\t\t\t\tvar docGenerationSpecs = {\r\n\t\t\t\t\t\tselectedTemplateId: response.defaultTemplateId,\r\n\t\t\t\t\t\tcurrentProposalId: currentProposalId,\r\n\t\t\t\t\t\tselectedOPFormat: response.outputFormat,\r\n\t\t\t\t\t\twatermark: response.hasWatermark\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t_generateDoc(docGenerationSpecs, mergeTimeout).then(function(response, state){\r\n\t\t\t\t\t\tif(state === \"success\" || state === \"failure\") {\r\n\t\t\t\t\t\t\tvm.isFastDocGen = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t} else if(GlobalService.currentContext === 'cart') {\r\n\t\t\t\t\tvm.openDialog();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tvar _generateDoc = function(obj, timeout) {\r\n\t\t\t\tvar timeInMs = 0,\r\n\t\t\t\t\ttimeoutFlag = true;\r\n\r\n\t\t\t\ttimeout = (angular.isDefined(timeout) ? timeout : 5000); // default to 3s\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\tthen: function(callback) {\r\n\t\t\t\t\t\tRemoteService.createDocumentCollateInfo().then(function(documentCollateInfoId) {\r\n\t\t\t\t\t\t\tvar generateDocReq = {\r\n\t\t\t\t\t\t\t\t'templateId': obj.selectedTemplateId,\r\n\t\t\t\t\t\t\t\t'proposalId': obj.currentProposalId,\r\n\t\t\t\t\t\t\t\t'pLevel': 'Full access',\r\n\t\t\t\t\t\t\t\t'docFormat': obj.selectedOPFormat,\r\n\t\t\t\t\t\t\t\t'isDraft': obj.watermark,\r\n\t\t\t\t\t\t\t\t'documentCollateInfoId': documentCollateInfoId\r\n\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\t// Timeout the loading circle and close the dialog\r\n\t\t\t\t\t\t\tvar countUp = function() {\r\n\t\t\t\t\t\t\t\ttimeInMs += 500;\r\n\r\n\t\t\t\t\t\t\t\t// if document goes over timeout setting display message to user that the document is being\r\n\t\t\t\t\t\t\t\t// generated and will be available shortly\r\n\t\t\t\t\t\t\t\tif(timeInMs >= timeout) {\r\n\t\t\t\t\t\t\t\t\tif(timeoutFlag !== true) {\r\n\t\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t// perform timout action (display messsage etc)\r\n\t\t\t\t\t\t\t\t\tPageNotificationService.hasPageNotification = true;\r\n\t\t\t\t\t\t\t\t\tPageNotificationService.alert = {\r\n\t\t\t\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\t\t\t\tmessage: vm.labels.MergeCallTimeout\r\n\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\tcallback(null, \"timeout\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t\t$timeout(countUp, 500);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\t$timeout(countUp, 500);\r\n\r\n\t\t\t\t\t\t\tRemoteService.generateDoc(generateDocReq).then(\r\n\t\t\t\t\t\t\t\tfunction(response) {\r\n\t\t\t\t\t\t\t\t\tProposalsListService.populateProposalList();\r\n\t\t\t\t\t\t\t\t\ttimeoutFlag = false;\r\n\t\t\t\t\t\t\t\t\tif (PageNotificationService.hasPageNotification) {\r\n\t\t\t\t\t\t\t\t\t\tPageNotificationService.hasPageNotification = false;\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t// document successfully generated\r\n\t\t\t\t\t\t\t\t\tcallback(response, \"success\");\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfunction(reason) {\r\n\t\t\t\t\t\t\t\t\t// unkown error occurred\r\n\t\t\t\t\t\t\t\t\tPageNotificationService.hasPageNotification = true;\r\n\t\t\t\t\t\t\t\t\tPageNotificationService.alert = {\r\n\t\t\t\t\t\t\t\t\t\ttype: 'warning',\r\n\t\t\t\t\t\t\t\t\t\tmessage: reason.message\r\n\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\tcallback(reason, \"failure\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t};\r\n\r\n\t\t\tvm.openDialog = function() {\r\n\t\t\t\tPreviewService.dialogIsOpen = true;\r\n\r\n\t\t\t\tproposalPopupDialogCtrl.$inject = ['$scope', '$timeout', '$uibModalInstance', 'i18nService'];\r\n\r\n\t\t\t\tfunction proposalPopupDialogCtrl($scope, $timeout, $uibModalInstance, i18nService) {\r\n\r\n\t\t\t\t\t// The following is the scope of the select template popup\r\n\t\t\t\t\t$scope.loading = false;\r\n\t\t\t\t\t$scope.spinnerText = '';\r\n\t\t\t\t\t$scope.outputFormats = ['DOCX','DOC','PDF'];\r\n\t\t\t\t\t$scope.displayCollection = [];\r\n\t\t\t\t\t$scope.customURL = '';\r\n\t\t\t\t\t$scope.tplSelected = false;\r\n\t\t\t\t\t$scope.IsSubmitCallEnabled = customSettings.IsSubmitCallEnabled;\r\n\t\t\t\t\t$scope.labels = i18nService.CustomLabel;\r\n\t\t\t\t\t$scope.selectedOPFormat = '';\r\n\r\n\t\t\t\t\tvar tplDO = {\r\n\t\t\t\t\t\t'proposalId': currentProposalId,\r\n\t\t\t\t\t\t'proposalType': proposalType\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tif (!customSettings.CustomDocGenURL) {\r\n\t\t\t\t\t\tRemoteService.getAvailableTemplates(tplDO).then(function(response) {\r\n\t\t\t\t\t\t\t//params.availableTemplates = response;\r\n\t\t\t\t\t\t\t$scope.rowCollection = response;\r\n\t\t\t\t\t\t\t$scope.displayCollection = [].concat($scope.rowCollection);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar builtUrl = customSettings.CustomDocGenURL + '?' + 'context=' +\r\n\t\t\t\t\t\t\tGlobalService.currentContext + '&name=' +\r\n\t\t\t\t\t\t\tGlobalService.currentProposalName + '&id=' +\r\n\t\t\t\t\t\t\tGlobalService.currentProposalId;\r\n\r\n\t\t\t\t\t\t$scope.customURL = $sce.trustAsResourceUrl(builtUrl);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tRemoteService.getDefaultOutputFormat(currentProposalId).then(function(response) {\r\n\t\t\t\t\t\tif (response) {\r\n\t\t\t\t\t\t\tvar defaultFormat = response[nsPrefix + 'Output_Format__c'];\r\n\t\t\t\t\t\t\t$scope.watermark = response[nsPrefix + 'IncludeWatermark__c'];\r\n\t\t\t\t\t\t\t$scope.allowedOverRideWmark = response[nsPrefix + 'AllowOverrideWatermark__c'];\r\n\t\t\t\t\t\t\t$scope.allowOverRideFormat = response[nsPrefix + 'Allow_Override__c'];\r\n\t\t\t\t\t\t\tif(angular.isDefined(defaultFormat)) {\r\n\t\t\t\t\t\t\t\t$scope.outputFormats.unshift(defaultFormat);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t$scope.outputFormats = _.uniq($scope.outputFormats);\r\n\t\t\t\t\t\t\t$scope.selectedOPFormat = $scope.outputFormats[0];\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t$scope.selectedOPFormat = ProposalsListService.defaultOutputFormat;\r\n\t\t\t\t\t\t\t$scope.allowOverRideFormat = true;\r\n\t\t\t\t\t\t\t$scope.watermark = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t$scope.getters = {\r\n\t\t\t\t\t\ttemplateName: function(value) {\r\n\t\t\t\t\t\t\t//this will sort by the length of the first name string\r\n\t\t\t\t\t\t\treturn value.Name;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t$scope.selectedFormat = function(value) {\r\n\t\t\t\t\t\t$scope.selectedOPFormat = value;\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t$scope.isDraft = function(bool) {\r\n\t\t\t\t\t\t$scope.watermark = bool;\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t$scope.dismiss = function() {\r\n\t\t\t\t\t\t$uibModalInstance.dismiss('cancel');\r\n\t\t\t\t\t\tPreviewService.dialogIsOpen = false;\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t$scope.closeWithCustomTpl = function() {\r\n\t\t\t\t\t\t$uibModalInstance.close(ProposalsListService.populateProposalList());\r\n\t\t\t\t\t\tPreviewService.dialogIsOpen = false;\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t$scope.trustSrc = function(src) {\r\n\t\t\t\t\t\treturn $sce.trustAsResourceUrl(src);\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t$scope.generateDoc = function() {\r\n\t\t\t\t\t\t$scope.rowCollection.filter(function(row) {\r\n\t\t\t\t\t\t\tif (row.isSelected) {\r\n\t\t\t\t\t\t\t\tvm.selectedTemplateId = row.Id;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tvar docGenerationSpecs = {\r\n\t\t\t\t\t\t\tselectedTemplateId: vm.selectedTemplateId,\r\n\t\t\t\t\t\t\tcurrentProposalId: currentProposalId,\r\n\t\t\t\t\t\t\tselectedOPFormat: $scope.selectedOPFormat,\r\n\t\t\t\t\t\t\twatermark: $scope.watermark\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t$scope.loading = true;\r\n\t\t\t\t\t\t$scope.spinnerText = vm.labels.DocumentGenerationInProgress;\r\n\r\n\t\t\t\t\t\t_generateDoc(docGenerationSpecs, mergeTimeout).then(function(response, state){\r\n\t\t\t\t\t\t\tif(state === \"success\") {\r\n\t\t\t\t\t\t\t\t$scope.attachmentInfo = response;\r\n\t\t\t\t\t\t\t\t$scope.dismiss();\r\n\t\t\t\t\t\t\t\t$scope.loading = false;\r\n\t\t\t\t\t\t\t} else if(state === \"timeout\") {\r\n\t\t\t\t\t\t\t\t// perform timout action (display messsage etc)\r\n\t\t\t\t\t\t\t\t$scope.loading = false;\r\n\t\t\t\t\t\t\t\t$scope.dismiss();\r\n\t\t\t\t\t\t\t} else if(state === \"failure\") {\r\n\t\t\t\t\t\t\t\t$scope.loading = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t$scope.submitGenerateDoc = function() {\r\n\t\t\t\t\t\t$scope.rowCollection.filter(function(row) {\r\n\t\t\t\t\t\t\tif (row.isSelected) {\r\n\t\t\t\t\t\t\t\tvm.selectedTemplateId = row.Id;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tvar docGenerationSpecs = {\r\n\t\t\t\t\t\t\ttemplateId: vm.selectedTemplateId,\r\n\t\t\t\t\t\t\tproposalSO: GlobalService.proposalInfo,\r\n\t\t\t\t\t\t\toutputFormat: $scope.selectedOPFormat,\r\n\t\t\t\t\t\t\tincludeWatermark: $scope.watermark\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t$scope.loading = true;\r\n\r\n\t\t\t\t\t\tRemoteService.submitGenerateDoc(docGenerationSpecs).then(\r\n\t\t\t\t\t\t\tfunction(response) {\r\n\t\t\t\t\t\t\t\t// action successfully submitted\r\n\t\t\t\t\t\t\t\t$scope.dismiss();\r\n\t\t\t\t\t\t\t\t$scope.loading = false;\r\n\t\t\t\t\t\t\t\tPageNotificationService.hasPageNotification = true;\r\n\t\t\t\t\t\t\t\tPageNotificationService.alert = {\r\n\t\t\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\t\t\tmessage: $scope.labels.SubmitDocAsyncMessage,\r\n\t\t\t\t\t\t\t\t\ttimeout: submitDocGenTimeout\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfunction(reason) {\r\n\t\t\t\t\t\t\t\t// unkown error occurred\r\n\t\t\t\t\t\t\t\tPageNotificationService.hasPageNotification = true;\r\n\t\t\t\t\t\t\t\tPageNotificationService.alert = {\r\n\t\t\t\t\t\t\t\t\ttype: 'warning',\r\n\t\t\t\t\t\t\t\t\tmessage: reason.message\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t$scope.dismiss();\r\n\t\t\t\t\t\t\t\t$scope.loading = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t$scope.$watch('displayCollection', function(templates) {\r\n\t\t\t\t\t\tvar hasSelectedItem = false;\r\n\t\t\t\t\t\t// get selected row\r\n\t\t\t\t\t\tif(templates) {\r\n\t\t\t\t\t\t\ttemplates.filter(function(r) {\r\n\t\t\t\t\t\t\t\tif (r.isSelected) {\r\n\t\t\t\t\t\t\t\t\t$scope.tplSelected = true;\r\n\t\t\t\t\t\t\t\t\thasSelectedItem = true;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\tif(!hasSelectedItem) $scope.tplSelected = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, true);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar dialogInstance = $uibModal.open({\r\n\t\t\t\t\tbackdrop: 'static',\r\n\t\t\t\t\tanimation: true,\r\n\t\t\t\t\ttemplate: require('./proposalsList.dialog.tpl.html'),\r\n\t\t\t\t\tsize: tplDialogSize,\r\n\t\t\t\t\tbindToController: true,\r\n\t\t\t\t\twindowClass: 'templates-dialog',\r\n\t\t\t\t\tcontroller: proposalPopupDialogCtrl\r\n\t\t\t\t});\r\n\t\t\t};\r\n\r\n\t\t\tvm.selectProposal = function(value, index, forceSelection) {\r\n\t\t\t\t// only perform actions if proposal is not already selected\r\n\t\t\t\tif(!forceSelection && GlobalService.currentSelectedProposalInfo.RecordId === value.RecordId) return;\r\n\r\n\t\t\t\t// Initialize the followings on every selection\r\n\t\t\t\tGlobalService.clearAttachmentsBuckets = false;\r\n\t\t\t\tGlobalService.currentSelectedProposalInfo = value;\r\n\t\t\t\tPreviewService.attemptToMerge = false;\r\n\t\t\t\tProposalsListService.selectionIsACollatedDoc = false;\r\n\t\t\t\tProposalsListService.proposalDoc = {};\r\n\t\t\t\tPreviewService.selectionIsNotPdf = false;\r\n\t\t\t\tEmailService.mergedSourceDocsAttachInfo = [];\r\n\t\t\t\tEmailService.mergedDocInfo = [];\r\n\t\t\t\tPageContainerService.mergeFilesAttachmentInfo = [];\r\n\t\t\t\tvm.selectedProposalDocIndex = index;\r\n\r\n\t\t\t\tif(value && (value.ContentType !== 'application/pdf' && value.ContentType !== 'PDF')) {\r\n\t\t\t\t\tPreviewService.selectionIsNotPdf = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (value && value.isCollated === true) {\r\n\t\t\t\t\tProposalsListService.selectionIsACollatedDoc = true;\r\n\t\t\t\t\tEmailService.mergedDocInfo.push(value);\r\n\t\t\t\t\tRemoteService.getGeneratedDocumentInfo(value.ParentId).then(function(response) {\r\n\t\t\t\t\t\tvar sourceDocs = [];\r\n\t\t\t\t\t\tvar attachments = [];\r\n\r\n\t\t\t\t\t\tEmailService.mergedSourceDocsAttachInfo = response.sourceDocuments;\r\n\r\n\t\t\t\t\t\t// add collated parent document\r\n\t\t\t\t\t\tsourceDocs.push({\r\n\t\t\t\t\t\t\t                name: value.Title,\r\n\t\t\t\t\t\t\t                size: value.BodyLength,\r\n\t\t\t\t\t\t\t                type: value.ContentType,\r\n\t\t\t\t\t\t\t                parentId: value.ParentId,\r\n\t\t\t\t\t\t\t                recordId: value.RecordId,\r\n\t\t\t\t\t\t\t                isCollated: value.isCollated\r\n\t\t\t\t\t\t                });\r\n\r\n\t\t\t\t\t\t_.map(response.sourceDocuments, function(obj) {\r\n\t\t\t\t\t\t\tvar fileObj = {\r\n\t\t\t\t\t\t\t\tlastModified: '',\r\n\t\t\t\t\t\t\t\tlastModifiedDate: {},\r\n\t\t\t\t\t\t\t\tname: obj.Title,\r\n\t\t\t\t\t\t\t\tsize: obj.BodyLength,\r\n\t\t\t\t\t\t\t\ttype: obj.ContentType,\r\n\t\t\t\t\t\t\t\tparentId: obj.ParentId,\r\n\t\t\t\t\t\t\t\trecordId: obj.RecordId,\r\n\t\t\t\t\t\t\t\tisCollated: obj.isCollated,\r\n\t\t\t\t\t\t\t\twebkitRelativePath: ''\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tsourceDocs.push(fileObj);\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t_.map(response.attachments, function(obj) {\r\n\t\t\t\t\t\t\tvar fileObj = {\r\n\t\t\t\t\t\t\t\tlastModified: '',\r\n\t\t\t\t\t\t\t\tlastModifiedDate: {},\r\n\t\t\t\t\t\t\t\tname: obj.Title,\r\n\t\t\t\t\t\t\t\tsize: obj.BodyLength,\r\n\t\t\t\t\t\t\t\ttype: obj.ContentType,\r\n\t\t\t\t\t\t\t\tparentId: obj.ParentId,\r\n\t\t\t\t\t\t\t\trecordId: obj.RecordId,\r\n\t\t\t\t\t\t\t\tisCollated: obj.isCollated,\r\n\t\t\t\t\t\t\t\twebkitRelativePath: ''\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tattachments.push(fileObj);\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tProposalsListService.mergedSourceDocs = sourceDocs;\r\n\t\t\t\t\t\tProposalsListService.attachments = attachments;\r\n\t\t\t\t\t});\r\n\t\t\t\t} else if(value && (!angular.isDefined(value.isCollated) || !value.isCollated)) {\r\n\t\t\t\t\tvar fileObj = {\r\n\t\t\t\t\t\tlastModified: '',\r\n\t\t\t\t\t\tlastModifiedDate: {},\r\n\t\t\t\t\t\tname: value.Title,\r\n\t\t\t\t\t\tsize: value.BodyLength,\r\n\t\t\t\t\t\ttype: value.ContentType,\r\n\t\t\t\t\t\twebkitRelativePath: ''\r\n\t\t\t\t\t};\r\n\t\t\t\t\tvar proposalDocAttachmentInfo = angular.fromJson(angular.toJson(value)); //strip the internal angular props i.e. $$hashKey\r\n\t\t\t\t\tEmailService.mergedSourceDocsAttachInfo.push(proposalDocAttachmentInfo);\r\n\t\t\t\t\tProposalsListService.proposalDoc = fileObj;\r\n\t\t\t\t\tGlobalService.clearAttachmentsBuckets = true; // Empty the current attachments buckets\r\n\t\t\t\t\t// ProposalsListService.selectionIsATpl = true; // TODO: Remove later\r\n\t\t\t\t\tProposalsListService.selectionIsACollatedDoc = false;\r\n\t\t\t\t}\r\n\t\t\t\tif(value) {\r\n\t\t\t\t\tPreviewService.previewPDF(value);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tvm.selectNewProposal = function() {\r\n\t\t\t\tvm.selectProposal(vm.proposalList[0], 0, true);\r\n\t\t\t};\r\n\r\n\t\t\tvm.toggleProposalListLimit = function() {\r\n\t\t\t\tif(vm.listedResultsLimit === 1) {\r\n\t\t\t\t\tvm.listedResultsLimit = undefined;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvm.listedResultsLimit = 1;\r\n\t\t\t\t}\r\n\r\n\t\t\t};\r\n\r\n\t\t\tvm.expandContextMenu = function (event, item, proposalList) {\r\n\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t_.forEach(proposalList, function (value) {\r\n\t\t\t\t\tif (value.contextMenu.expanded) {\r\n\t\t\t\t\tvalue.contextMenu.expanded = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\titem.contextMenu.expanded = true;\r\n\t\t\t}\r\n\r\n\t\t\tfunction activate() {\r\n\t\t\t\tvm.proposalList = ProposalsListService.proposalList;\r\n\r\n\t\t\t\tProposalsListService.populateProposalList();\r\n\t\t\t}\r\n\r\n\t\t\tactivate();\r\n\r\n\t\t\tvar deregisterWatch2 = $scope.$watch(function() {\r\n\t\t\t\t\treturn ProposalsListService.proposalList;\r\n\t\t\t\t},\r\n\t\t\t\tfunction(newVal, oldVal) {\r\n\t\t\t\t\tif (newVal !== oldVal) {\r\n\t\t\t\t\t\tvar renameMethod = function(RecordId) {\r\n\t\t\t\t\t\t\treturn function() {\r\n\t\t\t\t\t\t\t\tvar index = _.findIndex(vm.proposalList, function(proposal) { return proposal.RecordId == RecordId; });\r\n\t\t\t\t\t\t\t\tvm.proposalList[index].editableFieldSettings.editMode = true;\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\tvar onUserRename = function(proposal) {\r\n\t\t\t\t\t\t\treturn function(editEvent) {\r\n\t\t\t\t\t\t\t\tif(editEvent.action === \"accept\") {\r\n\t\t\t\t\t\t\t\t\t// no need to make service call if name unchanged\r\n\t\t\t\t\t\t\t\t\tif(!editEvent.valueChanged) return;\r\n\r\n\t\t\t\t\t\t\t\t\tvar renameRequest = {\r\n\t\t\t\t\t\t\t\t\t\trecordId: proposal.RecordId,\r\n\t\t\t\t\t\t\t\t\t\tname: proposal.Title\r\n\t\t\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\t\t\t// clear any previous error before making service call\r\n\t\t\t\t\t\t\t\t\tPageNotificationService.hasPageNotification = false;\r\n\r\n\t\t\t\t\t\t\t\t\tRemoteService.setDocumentName(renameRequest).then(function(response) {\r\n\t\t\t\t\t\t\t\t\t\tif(response === proposal.Title) {\r\n\t\t\t\t\t\t\t\t\t\t\t// rename successful\r\n\t\t\t\t\t\t\t\t\t\t\tproposal.editableFieldSettings.editMode = false;\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t// re-select proposal to display renamed doc\r\n\t\t\t\t\t\t\t\t\t\t\tvm.selectProposal(proposal, i, true);\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t_serviceFailure();\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}, _serviceFailure);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\tvar onUserDeleteProposal = function(proposal) {\r\n\t\t\t\t\t\t\treturn function() {\r\n\t\t\t\t\t\t\t\t// clear any previous error before making service call\r\n\t\t\t\t\t\t\t\tPageNotificationService.hasPageNotification = false;\r\n\r\n\t\t\t\t\t\t\t\tvar deleteRequest = {\r\n\t\t\t\t\t\t\t\t\trecordId: proposal.RecordId,\r\n\t\t\t\t\t\t\t\t\tproposalId: currentProposalId,\r\n\t\t\t\t\t\t\t\t\tisCollated: (angular.isDefined(proposal.isCollated) ? proposal.isCollated : false)\r\n\t\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\t\tRemoteService.deleteAttachment(deleteRequest).then(function(deletedAttachmentId) {\r\n\t\t\t\t\t\t\t\t\tif(deletedAttachmentId === null) {\r\n\t\t\t\t\t\t\t\t\t\t// unknown error occurred\r\n\t\t\t\t\t\t\t\t\t\t_serviceFailure();\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t// successfully delete, remove from list\r\n\t\t\t\t\t\t\t\t\t\t_.remove(vm.proposalList, {\r\n\t\t\t\t\t\t\t\t\t\t\tRecordId: deletedAttachmentId\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t\t\tif(vm.proposalList.length > 0) {\r\n\t\t\t\t\t\t\t\t\t\t\tvm.selectProposal(vm.proposalList[0], 0, true);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}, _serviceFailure);\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tfor (var i = 0; i < ProposalsListService.proposalList.length; i++) {\r\n\t\t\t\t\t\t\tvar proposal = ProposalsListService.proposalList[i];\t\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t\t// configure editable/rename component\r\n\t\t\t\t\t\t\tproposal.editableFieldSettings = {\r\n\t\t\t\t\t\t\t\teditMode: false,\r\n\t\t\t\t\t\t\t\tonUserAction: onUserRename(proposal)\r\n\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\t// controller code to setup menu settings/data-model\r\n\t\t\t\t\t\t\tproposal.contextMenu = {\r\n\t\t\t\t\t\t\t\tcloseEventsList: [\"touchstart\", \"click\"],\r\n\t\t\t\t\t\t\t\tclassList: [\"context-menu-container\", \"context-menu-switch\"],\r\n\t\t\t\t\t\t\t\tverticalOrientation: \"TopTop\",\r\n\t\t\t\t\t\t\t\thorizontalOrientation: \"LeftRight\",\r\n\t\t\t\t\t\t\t\texpanded: false,\r\n\t\t\t\t\t\t\t\tmenuItems: [{ // array of menu items to appear when context menu is toggled\r\n\t\t\t\t\t\t\t\t\t\tname: \"proposal-menu-item-rename\" + i,\r\n\t\t\t\t\t\t\t\t\t\tdisplayLabel: \"Rename\",\r\n\t\t\t\t\t\t\t\t\t\tonClick: renameMethod(proposal.RecordId)\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t{ // array of menu items to appear when context menu is toggled\r\n\t\t\t\t\t\t\t\t\t\tname: \"proposal-menu-item-delete\" + i,\r\n\t\t\t\t\t\t\t\t\t\tdisplayLabel: \"Delete\",\r\n\t\t\t\t\t\t\t\t\t\tonClick: onUserDeleteProposal(proposal)\r\n\t\t\t\t\t\t\t\t\t}]\r\n\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvm.proposalList = ProposalsListService.proposalList;\r\n\t\t\t\t\t\t_.map(vm.proposalList, function(obj) {\r\n\t\t\t\t\t\t\tif(angular.isDefined(obj.Title)) {\r\n\t\t\t\t\t\t\t\tobj.Title = obj.Title.replace(/\\.[^/.]+$/, \"\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tvm.selectNewProposal();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t\t$scope.$on('$destroy', function() {\r\n\t\t\t\tderegisterWatch2();\r\n\t\t\t});\r\n\r\n\t\t};\r\n\r\n\t\tproposalsListController.$inject = ['$scope',\r\n\t\t                                   '$timeout',\r\n\t\t\t\t\t\t\t\t\t\t\t'$sce',\r\n\t\t\t\t\t\t\t\t\t\t\t'$filter',\r\n\t\t\t\t\t\t\t\t\t\t\t'$uibModal',\r\n\t\t\t\t\t\t\t\t\t\t\t'lodash',\r\n\t\t\t\t\t\t\t\t\t\t\t'RemoteService',\r\n\t\t\t\t\t\t\t\t\t\t\t'i18nService',\r\n\t\t\t\t\t\t\t\t\t\t\t'systemConstants',\r\n\t\t\t\t\t\t\t\t\t\t\t'ProposalsListService',\r\n\t\t\t\t\t\t\t\t\t\t\t'PreviewService',\r\n\t\t\t\t\t\t\t\t\t\t\t'EmailService',\r\n\t\t\t\t\t\t\t\t\t\t\t'PageNotificationService',\r\n\t\t\t\t\t\t\t\t\t\t\t'PageContainerService',\r\n\t\t\t\t\t\t\t\t\t\t\t'GlobalService'\r\n\t\t\t\t\t\t\t\t\t\t];\r\n\r\n\t\treturn {\r\n\t\t\trestrict: 'E',\r\n\t\t\tcontroller: proposalsListController,\r\n\t\t\tcontrollerAs: 'vm',\r\n\t\t\tscope: {},\r\n\t\t\tbindToController: {},\r\n\t\t\ttemplate: require('./proposalsList.tpl.html')\r\n\t\t};\r\n\t}];\r\n})();\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/common/directives/proposalsList/proposalsList.directive.js\n// module id = 46\n// module chunks = 1","module.exports = \"<div ng-show=\\\"loading\\\" class=\\\"slds-spinner_container\\\">\\r\\n    <div class=\\\"slds-spinner slds-spinner_medium slds-spinner_brand minicart-pricing-spinner\\\">\\r\\n        <div class=\\\"slds-spinner__dot-a\\\"></div>\\r\\n        <div class=\\\"slds-spinner__dot-b\\\"></div>\\r\\n    </div>\\r\\n    <span class=\\\"spinner-text\\\">{{spinnerText}}</span>\\r\\n</div>\\r\\n<div class='modal-header sel-tpl__header'>\\r\\n    <h3 class='modal-title'>{{labels.ChooseTemplateTitle}}</h3>\\r\\n    <i class='fa fa-times sel-tpl__close' ng-click='dismiss()' aria-hidden='true'></i>\\r\\n</div>\\r\\n<div class='modal-body sel-tpl__body'>\\r\\n    <div ng-if='customURL'>\\r\\n        <iframe ng-src=\\\"{{customURL}}\\\" class='custompage-content-iframe' height='500px' width=\\\"100%\\\"></iframe>\\r\\n    </div>\\r\\n    <div ng-if='!customURL'>\\r\\n        <!-- Output format and draft selection -->\\r\\n        <div class='output'>\\r\\n            <div class='output__format'>\\r\\n                <div class='form-group'>\\r\\n                    <label for='sel1'>{{labels.SelectOutputFormat}}</label>\\r\\n                    <select class='form-control'\\r\\n                            id='sel1'\\r\\n                            ng-model='selectedOPFormat'\\r\\n                            ng-options='format for format in outputFormats'\\r\\n                            ng-disabled= '!allowOverRideFormat'\\r\\n                            ng-change=\\\"selectedFormat(selectedOPFormat)\\\"\\r\\n                    >                       \\r\\n                    </select>\\r\\n                </div>\\r\\n            </div>\\r\\n            <div class='output__wmark'>\\r\\n                <div class=\\\"checkbox\\\">\\r\\n                    <label>\\r\\n                        <input ng-checked='watermark' ng-model='watermark' ng-disabled='!allowedOverRideWmark' ng-change='isDraft(watermark)' type=\\\"checkbox\\\" value=\\\"\\\" >\\r\\n                        {{labels.IncludeWatermark}}\\r\\n                    </label>\\r\\n                </div>\\r\\n            </div>\\r\\n        </div>\\r\\n        <!-- Search and list the available templates -->\\r\\n        <div class='templates'>\\r\\n            <!-- <div class='templates__search'></div> -->\\r\\n            <div class='templates__table'>\\r\\n                <div>\\r\\n                    <table st-table=\\\"displayCollection\\\" st-safe-src='rowCollection' class='table'>\\r\\n                        <thead>\\r\\n                            <tr>\\r\\n                                <th colspan=\\\"2\\\" class='searchable'>\\r\\n                                    <div class='searchbar'>\\r\\n                                        <i class=\\\"fa fa-search\\\"></i>\\r\\n                                        <input st-search='' class=\\\"form-control\\\" placeholder=\\\"{{labels.Search}}\\\" type=\\\"text\\\" />\\r\\n                                    </div>\\r\\n                                </th>\\r\\n                            </tr>\\r\\n                            <tr>\\r\\n                                <th st-sort=\\\"Name\\\" class='sortable'>\\r\\n                                    <span>{{labels.TemplateNameColumn}}</span>\\r\\n                                    <i class=\\\"fa fa-caret-down\\\" aria-hidden=\\\"true\\\"></i>\\r\\n                                    <i class=\\\"fa fa-caret-up\\\" aria-hidden=\\\"true\\\"></i>\\r\\n                                </th>\\r\\n                                <th st-sort=\\\"description\\\" class='sortable'>\\r\\n                                    <span>{{labels.Description}}</span>\\r\\n                                    <i class=\\\"fa fa-caret-down\\\" aria-hidden=\\\"true\\\"></i>\\r\\n                                    <i class=\\\"fa fa-caret-up\\\" aria-hidden=\\\"true\\\"></i>\\r\\n                                </th>\\r\\n                                <th st-sort=\\\"category\\\" class='sortable'>\\r\\n                                    <span>{{labels.Category}}</span>\\r\\n                                    <i class=\\\"fa fa-caret-down\\\" aria-hidden=\\\"true\\\"></i>\\r\\n                                    <i class=\\\"fa fa-caret-up\\\" aria-hidden=\\\"true\\\"></i>\\r\\n                                </th>\\r\\n                                <th st-sort=\\\"subcategory\\\" class='sortable'>\\r\\n                                    <span>{{labels.SubCategory}}</span>\\r\\n                                    <i class=\\\"fa fa-caret-down\\\" aria-hidden=\\\"true\\\"></i>\\r\\n                                    <i class=\\\"fa fa-caret-up\\\" aria-hidden=\\\"true\\\"></i>\\r\\n                                </th>\\r\\n                            </tr>\\r\\n                        </thead>\\r\\n                        <tbody>\\r\\n                            <tr st-select-row=\\\"row\\\" st-select-mode=\\\"single\\\" ng-repeat=\\\"row in displayCollection\\\">\\r\\n                                <td>{{row.Name}}</td>\\r\\n                                <td>{{row.Apttus__Description__c}}</td>\\r\\n                                <td>{{row.Apttus__Category__c}}</td>\\r\\n                                <td>{{row.Apttus__Subcategory__c}}</td>\\r\\n                            </tr>\\r\\n                        </tbody>\\r\\n                    </table>\\r\\n                </div>\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n<div class='modal-footer sel-tpl__footer'>\\r\\n    <button ng-disabled='!tplSelected' ng-hide='!IsSubmitCallEnabled || customURL' class='btn btn-primary' type='button' ng-click='submitGenerateDoc()'>{{labels.SubmitForGenerate}}</button>\\r\\n    <button ng-disabled='!tplSelected' ng-hide='customURL' class='btn btn-primary' type='button' ng-click='generateDoc()'>{{labels.Generate}}</button>    \\r\\n    <button ng-show='customURL' class='btn btn-primary' type='button' ng-click='closeWithCustomTpl()'>{{labels.Apply}}</button>\\r\\n</div>\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/common/directives/proposalsList/proposalsList.dialog.tpl.html\n// module id = 47\n// module chunks = 1","module.exports = \"<!-- <div class='col-md-3 proposals-list__container'> -->\\r\\n<div ng-show=\\\"vm.isFastDocGen\\\" class=\\\"slds-spinner_container\\\">\\r\\n    <div class=\\\"slds-spinner slds-spinner_large slds-spinner_brand minicart-pricing-spinner\\\">\\r\\n        <div class=\\\"slds-spinner__dot-a\\\"></div>\\r\\n        <div class=\\\"slds-spinner__dot-b\\\"></div>\\r\\n    </div>\\r\\n    <span class=\\\"spinner-text\\\">{{vm.defaultTemplateSpinnerText}}</span>\\r\\n</div>\\r\\n<div flex class='proposals-list__container'>\\r\\n    <div class='proposals-list__header'>\\r\\n        <span class='title proposals-list__title'>{{vm.labels.ProposalsTitle}}</span>\\r\\n        <button class='btn btn-primary' ng-disabled=\\\"vm.isFastDocGen\\\" ng-click='vm.openDialog()'>{{vm.labels.CreateNewProposal}}</button>\\r\\n    </div>\\r\\n    <div class='proposals-list__searchbar'>\\r\\n        <i id=\\\"filter\\\" class=\\\"fa fa-search\\\"></i>\\r\\n        <input id='' type=\\\"text\\\" placeholder=\\\"{{vm.labels.SearchProposals}}\\\" ng-model=\\\"searchText.Title\\\" />\\r\\n    </div>\\r\\n    <div class='proposals-list__list'>\\r\\n        <ul>\\r\\n            <li id=\\\"{{item.RecordId}}\\\" ng-repeat='item in vm.proposalList | filter:searchText | limitTo:vm.listedResultsLimit' ng-click='vm.selectProposal(item, $index)' ng-class=\\\"{'sel': $index == vm.selectedProposalDocIndex}\\\">\\r\\n                <editable-text-field settings=\\\"item.editableFieldSettings\\\"\\r\\n                                     value=\\\"item.Title\\\"\\r\\n                                     max-length=\\\"80\\\"\\r\\n                                     max-length-error-msg=\\\"{{vm.MaximumCharacterLengthMessage}}\\\"></editable-text-field>\\r\\n                <i context-menu\\r\\n                   ng-show=\\\"!item.editableFieldSettings.editMode\\\"\\r\\n                   class=\\\"fa fa-ellipsis-v context-menu-switch\\\"\\r\\n                   aria-hidden='true'\\r\\n                   settings=\\\"item.contextMenu\\\"\\r\\n                   ng-click=\\\"vm.expandContextMenu($event, item, vm.proposalList)\\\"></i>\\r\\n            </li>\\r\\n        </ul>\\r\\n        <span class=\\\"msg\\\" ng-if=\\\"vm.proposalList.length === 0\\\">{{vm.labels.NoProposalDocumentCreated}}</span>\\r\\n        <button ng-if=\\\"vm.proposalList.length > 0\\\" type=\\\"button\\\"\\r\\n                class=\\\"btn btn-link proposal-list-toggle\\\" ng-click=\\\"vm.toggleProposalListLimit()\\\">\\r\\n            {{vm.listedResultsLimit === 1 ? vm.labels.ShowRecentProposals : vm.labels.HideRecentProposals}}\\r\\n        </button>\\r\\n    </div>\\r\\n</div>\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/common/directives/proposalsList/proposalsList.tpl.html\n// module id = 48\n// module chunks = 1","(function() {\r\n\t'use strict';\r\n\tvar previewController = function($http,\r\n\t                                 $sce,\r\n\t                                 $compile,\r\n\t                                 _,\r\n\t                                 RemoteService,\r\n\t                                 i18nService,\r\n\t                                 ProposalsListService,\r\n\t                                 PreviewService,\r\n\t                                 PageContainerService,\r\n\t                                 PageNotificationService,\r\n\t                                 GlobalService,\r\n\t                                 EmailService,\r\n\t                                 UtilitiesService) {\r\n\r\n\r\n\t\treturn {\r\n\t\t\trestrict: 'E',\r\n\t\t\tscope: {},\r\n\t\t\ttemplate: require('./preview.html'),\r\n\t\t\tlink: function($scope, element, attrs) {\r\n\t\t\t\tvar vm = $scope;\r\n\r\n\t\t\t\tvm.loading = false;\r\n\t\t\t\tvm.attemptToMerge = false;\r\n\t\t\t\tvm.selectionIsNotPdf = false;\r\n\t\t\t\tvm.labels = i18nService.CustomLabel;\r\n\t\t\t\tvm.title = GlobalService.currentSelectedProposalInfo.Title;\r\n\t\t\t\tvm.isMobileIos = UtilitiesService.deviceInfo.isMobileIos;\r\n\t\t\t\tvm.isIE = (UtilitiesService.deviceInfo.browser === \"IE\");\r\n\r\n\t\t\t\tvar h = screen.height;\r\n\t\t\t\tvar w = screen.width;\r\n\r\n\t\t\t\tvm.openPdfInNewWindow = function() {\r\n\t\t\t\t\tif(vm.isMobileIos) {\r\n\t\t\t\t\t\twindow.open(vm.url, 'newwindow', 'toolbar=no,location=0,status=no,' +\r\n\t\t\t\t\t\t            'titlebar=no,menubar=no,width=' + h + ', height=' + w);\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvm.mergeDocs = function() {\r\n\t\t\t\t\tvm.loading = true;\r\n\t\t\t\t\tvar currentProposalInfo = GlobalService.currentSelectedProposalInfo;\r\n\t\t\t\t\tvar currentProposalInfoList = [];\r\n\r\n\t\t\t\t\tcurrentProposalInfo = {\r\n\t\t\t\t\t\t'RecordId': currentProposalInfo.RecordId,\r\n\t\t\t\t\t\t'Title': currentProposalInfo.Title,\r\n\t\t\t\t\t\t'isCollated': currentProposalInfo.isCollated\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tcurrentProposalInfoList.push(currentProposalInfo);\r\n\r\n\t\t\t\t\tvar sourceDocsList = _.union(\r\n\t\t\t\t\t\tcurrentProposalInfoList,\r\n\t\t\t\t\t\tPageContainerService.mergeFilesAttachmentInfo\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\tvar attachmentsList = _.union(\r\n\t\t\t\t\t\tPageContainerService.attachFilesAttachmentInfo,\r\n\t\t\t\t\t\tPageContainerService.attachNAFilesAttachmentInfo\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\tRemoteService.createDocumentCollateInfo().then(function(newParentId) {\r\n\t\t\t\t\t\tvar proposalId = newParentId;\r\n\t\t\t\t\t\tvar reqObj = {\r\n\t\t\t\t\t\t\t'addAutoFooter': false,\r\n\t\t\t\t\t\t\t'addWatermark': false,\r\n\t\t\t\t\t\t\t'sourceDocuments': sourceDocsList,\r\n\t\t\t\t\t\t\t'attachments': attachmentsList,\r\n\t\t\t\t\t\t\t'docFileName': 'Q-' + GlobalService.currentProposalId + 'PDFPackage.pdf',\r\n\t\t\t\t\t\t\t'externalLinks': [],\r\n\t\t\t\t\t\t\t'footerText': '',\r\n\t\t\t\t\t\t\t'headerText': '',\r\n\t\t\t\t\t\t\t'parentId': proposalId,\r\n\t\t\t\t\t\t\t'proposalId': GlobalService.currentProposalId,\r\n\t\t\t\t\t\t\t'protectionLevel': '',\r\n\t\t\t\t\t\t\t'removeWatermark': false,\r\n\t\t\t\t\t\t\t'sessionId': '',\r\n\t\t\t\t\t\t\t'sessionUrl': ''\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\tif (PreviewService.selectionIsNotPdf && !PreviewService.goForPDF) {\r\n\t\t\t\t\t\t\tRemoteService.createWordPackage(reqObj).then(\r\n\t\t\t\t\t\t\t\tfunction() {\r\n\t\t\t\t\t\t\t\t\tProposalsListService.populateProposalList();\r\n\t\t\t\t\t\t\t\t\tGlobalService.packageHasCreated = true;\r\n\t\t\t\t\t\t\t\t\tvm.loading = false;\r\n\t\t\t\t\t\t\t\t\tvm.attemptToMerge = false;\r\n\t\t\t\t\t\t\t\t\tPreviewService.goForPDF = false;\r\n\t\t\t\t\t\t\t\t\t// Empty up all the buckets on a merge doc action\r\n\t\t\t\t\t\t\t\t\tPageContainerService.mergeFilesAttachmentInfo = [];\r\n\t\t\t\t\t\t\t\t\tPageContainerService.mergeNAFilesAttachmentInfo = [];\r\n\t\t\t\t\t\t\t\t\tPageContainerService.attachFilesAttachmentInfo = [];\r\n\t\t\t\t\t\t\t\t\tPageContainerService.attachNAFilesAttachmentInfo = [];\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfunction(reason) {\r\n\t\t\t\t\t\t\t\t\t// TODO: feed it to the page error service with appropriate error level\r\n\t\t\t\t\t\t\t\t\tconsole.log(reason);\r\n\t\t\t\t\t\t\t\t\tvm.loading = false;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tRemoteService.createPDFPackage(reqObj).then(\r\n\t\t\t\t\t\t\t\tfunction() {\r\n\t\t\t\t\t\t\t\t\tProposalsListService.populateProposalList();\r\n\t\t\t\t\t\t\t\t\tGlobalService.packageHasCreated = true;\r\n\t\t\t\t\t\t\t\t\tvm.loading = false;\r\n\t\t\t\t\t\t\t\t\tvm.attemptToMerge = false;\r\n\t\t\t\t\t\t\t\t\tPreviewService.goForPDF = false;\r\n\t\t\t\t\t\t\t\t\t// Empty up all the buckets on a merge doc action\r\n\t\t\t\t\t\t\t\t\tPageContainerService.mergeFilesAttachmentInfo = [];\r\n\t\t\t\t\t\t\t\t\tPageContainerService.mergeNAFilesAttachmentInfo = [];\r\n\t\t\t\t\t\t\t\t\tPageContainerService.attachFilesAttachmentInfo = [];\r\n\t\t\t\t\t\t\t\t\tPageContainerService.attachNAFilesAttachmentInfo = [];\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfunction(reason) {\r\n\t\t\t\t\t\t\t\t\t// TODO: feed it to the page error service with appropriate error level\r\n\t\t\t\t\t\t\t\t\tconsole.log(reason);\r\n\t\t\t\t\t\t\t\t\tvm.loading = false;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t});\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvm.embedPdfPreview = function() {\r\n\t\t\t\t\treturn !vm.selectionIsNotPdf && !vm.attemptToMerge && !vm.isMobileIos;\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvm.sendEmail = function() {\r\n\t\t\t\t\tEmailService.wantToEmail = true;\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar deRegisterWatch1 = $scope.$watch(function() {\r\n\t\t\t\t\t                                     return PreviewService.selectedDocUrl;\r\n\t\t\t\t                                     },\r\n\t\t\t\t                                     function(newVal, oldVal) {\r\n\t\t\t\t\t                                     if (newVal !== oldVal) {\r\n\t\t\t\t\t\t                                     $sce.trustAsResourceUrl(PreviewService.selectedDocUrl);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t vm.url = PreviewService.selectedDocUrl;\r\n\t\t\t\t\t\t                                     if(vm.isMobileIos) {\r\n\r\n\t\t\t\t\t\t\t                                     // to stay as language agnostic as possible replace token with anchor markup\r\n\t\t\t\t\t\t\t                                     var htmlContent = vm.labels.PreviewNotSupportedOnDevice.replace(\"{0}\", \"<a target='_blank' href='\" +\r\n\t\t\t\t\t\t\t                                                                                                     (vm.isMobileIos ? \"#\" : vm.url) +\r\n\t\t\t\t\t\t\t                                                                                                     \"' ng-click='openPdfInNewWindow()'>\" +\r\n\t\t\t\t\t\t\t                                                                                                     vm.labels.Here + \"</a>\");\r\n\r\n\t\t\t\t\t\t\t                                     // compile the provided template against the current scope\r\n\t\t\t\t\t\t\t                                     var elmnt = $compile( \"<span>\" + htmlContent + \"</span>\" )( $scope );\r\n\r\n\t\t\t\t\t\t\t                                     // get message container element reference\r\n\t\t\t\t\t\t\t                                     var messageContainerEl = angular.element(element[0].querySelector('.isMobileIos'));\r\n\t\t\t\t\t\t\t                                     angular.element(document.querySelector('.isMobileIos'));\r\n\r\n\t\t\t\t\t\t\t                                     messageContainerEl.html(\"\"); // \"clear\"\r\n\r\n\t\t\t\t\t\t\t                                     messageContainerEl.append( elmnt );\r\n\t\t\t\t\t\t                                     }\r\n\t\t\t\t\t                                     }\r\n\t\t\t\t                                     }\r\n\t\t\t\t);\r\n\r\n\t\t\t\tvar deRegisterWatch2 = $scope.$watch(function() {\r\n\t\t\t\t\t                                     return PreviewService.attemptToMerge;\r\n\t\t\t\t                                     },\r\n\t\t\t\t                                     function(newVal, oldVal) {\r\n\t\t\t\t\t                                     vm.attemptToMerge = PreviewService.attemptToMerge;\r\n\t\t\t\t                                     }\r\n\t\t\t\t);\r\n\r\n\t\t\t\tvar deRegisterWatch3 = $scope.$watch(function() {\r\n\t\t\t\t\t                                     return PreviewService.selectionIsNotPdf;\r\n\t\t\t\t                                     },\r\n\t\t\t\t                                     function(newVal, oldVal) {\r\n\t\t\t\t\t                                     vm.selectionIsNotPdf = PreviewService.selectionIsNotPdf;\r\n\t\t\t\t                                     }\r\n\t\t\t\t);\r\n\r\n\t\t\t\tvar deRegisterWatch4 = $scope.$watch(function() {\r\n\t\t\t\t\t                                     return PreviewService.dialogIsOpen;\r\n\t\t\t\t                                     },\r\n\t\t\t\t                                     function(newVal, oldVal) {\r\n\t\t\t\t\t                                     vm.dialogIsOpen = PreviewService.dialogIsOpen;\r\n\t\t\t\t                                     }\r\n\t\t\t\t);\r\n\r\n\t\t\t\tvar deRegisterWatch5 = $scope.$watch(function() {\r\n\t\t\t\t\t                                     return PreviewService.disableMerge;\r\n\t\t\t\t                                     },\r\n\t\t\t\t                                     function(newVal, oldVal) {\r\n\t\t\t\t\t                                     vm.disableMerge = PreviewService.disableMerge;\r\n\t\t\t\t                                     }\r\n\t\t\t\t);\r\n\r\n\t\t\t\tvar deRegisterWatch6 = $scope.$watch(function() {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn PreviewService.selectedDocPreviewUrl;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfunction(newVal, oldVal) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (newVal !== oldVal) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$sce.trustAsResourceUrl(PreviewService.selectedDocPreviewUrl);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvm.previewUrl = PreviewService.selectedDocPreviewUrl;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t);\r\n\r\n\t\t\t\t$scope.$on('$destroy', function() {\r\n\t\t\t\t\tderegisterWatch1();\r\n\t\t\t\t\tderegisterWatch2();\r\n\t\t\t\t\tdeRegisterWatch3();\r\n\t\t\t\t\tdeRegisterWatch4();\r\n\t\t\t\t\tdeRegisterWatch5();\r\n\t\t\t\t\tdeRegisterWatch6();\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(UtilitiesService.deviceInfo.isMobileIos) {\r\n\t\t\t\t\tvar downloadLnk = element[0].querySelector('.download');\r\n\r\n\t\t\t\t\t// remove download attribute so iPad browser will not attempt to\r\n\t\t\t\t\t// download the file\r\n\t\t\t\t\tdownloadLnk.removeAttribute(\"download\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\r\n\tmodule.exports = ['$http',\r\n\t                  '$sce',\r\n\t                  '$compile',\r\n\t                  'lodash',\r\n\t                  'RemoteService',\r\n\t                  'i18nService',\r\n\t                  'ProposalsListService',\r\n\t                  'PreviewService',\r\n\t                  'PageContainerService',\r\n\t                  'PageNotificationService',\r\n\t                  'GlobalService',\r\n\t                  'EmailService',\r\n\t                  'UtilitiesService', previewController];\r\n})();\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/common/directives/preview/preview.directive.js\n// module id = 49\n// module chunks = 1","module.exports = \"<div layout='column' class='preview__container'>\\r\\n    <div layout='row' class='preview__header'>\\r\\n        <div flex class='title preview__title'>\\r\\n            <span>{{labels.Preview}}</span>\\r\\n            <span>{{title}}</span>\\r\\n        </div>\\r\\n        <div class='preview__action-container'>\\r\\n            <button class='btn btn-default btn-action' type='submit' ng-click='sendEmail();'>\\r\\n                <i class='fa fa-envelope-o'></i>\\r\\n                <span>{{labels.Email}}</span>\\r\\n            </button>\\r\\n            <a class='btn btn-default btn-action download'\\r\\n               target='{{isIE ? \\\"_blank\\\" : \\\"_self\\\" }}'\\r\\n               href='{{ isMobileIos ? \\\"#\\\" : url }}'\\r\\n               download='foo.pdf'\\r\\n               ng-click=\\\"openPdfInNewWindow()\\\">\\r\\n                <i class='fa fa-download'></i>\\r\\n                <span>{{isMobileIos ? labels.View : labels.Download}}</span>\\r\\n            </a>\\r\\n        </div>\\r\\n    </div>\\r\\n    <iframe ng-if='embedPdfPreview()'\\r\\n            ng-hide='dialogIsOpen'\\r\\n            ng-src='{{previewUrl}}'\\r\\n            layout='column' flex class='preview__content'\\r\\n            frameborder='0'\\r\\n            scrolling='no' allowfullscreen=\\\"true\\\">\\r\\n        <p>{{labels.PreviewBrowserNotSupported}}<a href='{{previewUrl}}'>{{labels.Here}}</a></p>\\r\\n    </iframe>\\r\\n    <div ng-if='!embedPdfPreview()' layout='column' flex class='preview__content'>\\r\\n        <div ng-if='selectionIsNotPdf && !isMobileIos' class='preview__nosupport'>\\r\\n            {{labels.PreviewNotSupported}} {{labels.PleaseClick}} <a href='{{url}}'>{{labels.Here}}</a> {{labels.ToDownloadIt}}\\r\\n        </div>\\r\\n        <!-- Merge Documents Button Container -->\\r\\n        <div ng-show='attemptToMerge' class='merge-btn-wrapper'>\\r\\n            <button ng-disabled=\\\"disableMerge\\\" class='btn btn-primary btn-lg merge-btn' ng-click='mergeDocs()'>{{labels.MergeDocuments}}</button>\\r\\n        </div>\\r\\n        <div ng-if='!selectionIsNotPdf && isMobileIos' class='preview__nosupport isMobileIos'>\\r\\n        </div>\\r\\n        <div ng-if='selectionIsNotPdf && isMobileIos' class='preview__nosupport'>\\r\\n            {{labels.PreviewNotSupported}}\\r\\n        </div>\\r\\n    </div>\\r\\n\\r\\n    <md-progress-circular class='spinner' ng-show='loading' md-mode=\\\"indeterminate\\\"></md-progress-circular>\\r\\n</div>\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/common/directives/preview/preview.html\n// module id = 50\n// module chunks = 1","(function() {\r\n    'use strict';\r\n    require('angular');\r\n    module.exports = angular.module('docGenCommonServices', [])\r\n        .service('GlobalService', require('../services/globalService.js'))\r\n        .service('UploadService', require('../services/uploadService.js'))\r\n        .service('UtilitiesService', require('../services/utilitiesService.js'))\r\n        .service('PageContainerService', require('./pageContainer/pageContainer.service.js'))\r\n        .service('ProposalsListService', require('./proposalsList/proposalsList.service.js'))\r\n        .service('PreviewService', require('./preview/preview.service.js'))\r\n        .service('EmailService', require('./email/email.service.js'))\r\n        .service('PageNotificationService', require('./pageNotification/pageNotification.service.js'));\r\n\r\n})();\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/common/directives/docGenCommonServices.module.js\n// module id = 51\n// module chunks = 1","(function() {\r\n    'use strict';\r\n\r\n    var globalService = function(systemConstants, RemoteService) {\r\n\r\n        var baseSFurl = '';\r\n        var currentProposalId = '';\r\n        var currentContext = '';\r\n        var clearAttachmentsBuckets = false;\r\n        var currentSelectedProposalInfo = {};\r\n        var nameSpacePrefix = systemConstants.nameSpacePrefix;\r\n\r\n        require('../assets/images/doc.png');\r\n        require('../assets/images/merged-doc.png');\r\n        require('../assets/images/merged-pdf.png');\r\n        require('../assets/images/pdf.png');\r\n        require('../assets/images/xls.png');\r\n        require('../assets/images/misc-info.png');\r\n\r\n\t    var isAcceptedFileType = function(fileType) {\r\n\t\t    return (fileType == 'application/pdf' ||\r\n\t\t    \t\tfileType == 'PDF' ||\r\n                fileType == 'application/doc' ||\r\n                fileType == 'application/docx' ||\r\n                fileType == 'application/msword' ||\r\n                fileType == 'application/vnd.openxmlformats-officedocument.wordprocessingml.document');\r\n\t    };\r\n\r\n        var getFileTypeIconUrl = function(file) {\r\n            var imgPath = \"\";\r\n            var mergedPrefix = (file.isCollated ? \"merged-\": \"\");\r\n\r\n            if (file.type === 'application/pdf' || file.type === 'PDF') {\r\n                imgPath = \"pdf.png\";\r\n            } else if (file.type === 'application/msword' || file.type === 'application/vnd.openxmlformats-officedocument.wordprocessingml.document') {\r\n                imgPath = \"doc.png\";\r\n            } else {\r\n                imgPath = \"misc-info.png\";\r\n            }\r\n\r\n            return systemConstants.imagesFolderPath + mergedPrefix + imgPath;\r\n        };\r\n\r\n        function getCurrentContext() {\r\n            baseSFurl = window.location.origin;\r\n            currentContext = systemConstants.contextParam;\r\n            currentProposalId = systemConstants.proposalIdParam || getQueryVariable('id');            \r\n        }        \r\n\r\n        function getQueryVariable(variable) {\r\n            var query = window.location.search.substring(1);\r\n            var vars = query.split(\"&\");\r\n            for (var i = 0; i < vars.length; i++) {\r\n                var pair = vars[i].split(\"=\");  \r\n                if (pair[0] == variable) {\r\n                    return pair[1];\r\n                }\r\n            }\r\n            return (false);\r\n        }\r\n\r\n        function activate() {\r\n            getCurrentContext();\r\n        }\r\n\r\n        activate();\r\n\r\n        var service = {\r\n            currentProposalId: currentProposalId,\r\n            currentContext: currentContext,\r\n            clearAttachmentsBuckets: clearAttachmentsBuckets,\r\n            currentSelectedProposalInfo: currentSelectedProposalInfo,\r\n            baseSFurl: baseSFurl,\r\n            nameSpacePrefix: nameSpacePrefix,\r\n            getFileTypeIconUrl: getFileTypeIconUrl,\r\n            isAcceptedFileType: isAcceptedFileType,\r\n            defaultTemplateName: systemConstants.docGenCustomSettings.EmailTemplateForPresentingProposals\r\n        };\r\n\r\n        return service;\r\n    };\r\n\r\n    globalService.$inject = ['systemConstants', 'RemoteService'];\r\n\r\n    module.exports = globalService;\r\n})();\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/common/services/globalService.js\n// module id = 52\n// module chunks = 1","module.exports = __webpack_public_path__ + \"app/common/assets/images/doc.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/common/assets/images/doc.png\n// module id = 53\n// module chunks = 1","module.exports = __webpack_public_path__ + \"app/common/assets/images/merged-doc.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/common/assets/images/merged-doc.png\n// module id = 54\n// module chunks = 1","module.exports = __webpack_public_path__ + \"app/common/assets/images/merged-pdf.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/common/assets/images/merged-pdf.png\n// module id = 55\n// module chunks = 1","module.exports = __webpack_public_path__ + \"app/common/assets/images/pdf.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/common/assets/images/pdf.png\n// module id = 56\n// module chunks = 1","module.exports = __webpack_public_path__ + \"app/common/assets/images/xls.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/common/assets/images/xls.png\n// module id = 57\n// module chunks = 1","module.exports = __webpack_public_path__ + \"app/common/assets/images/misc-info.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/common/assets/images/misc-info.png\n// module id = 58\n// module chunks = 1","(function() {\r\n\t'use strict';\r\n\r\n\tvar maxStringSize = 6000000;    //Maximum String size is 6,000,000 characters\r\n\tvar maxFileSize = 4350000;      //After Base64 Encoding, this is the max file size\r\n\tvar chunkSize = 125000;         //Maximum Javascript Remoting message size is 1,000,000 characters\r\n\r\n\tvar uploadService = function(RemoteService) {\r\n\t\tvar uploadAttachment = function(uploadRequest) {\r\n\t\t\tuploadRequest.onerror = (angular.isDefined(uploadRequest.onerror) ? uploadRequest.onerror : function() {} );\r\n\t\t\tuploadRequest.request = {\r\n\t\t\t\tproposalId: uploadRequest.parentId,\r\n\t\t\t\tattachmentName: uploadRequest.file.name,\r\n\t\t\t    contentType: uploadRequest.file.type\r\n\t\t\t};\r\n\r\n\t\t\tvar fileReader = new FileReader();\r\n\r\n\t\t\tfileReader.onloadend = function(e) {\r\n\t\t\t\tuploadRequest.positionIndex = 0;\r\n\t\t\t\tuploadRequest.attachment = this.result.match(/,(.*)$/)[1];\r\n\r\n\t\t\t\tif(uploadRequest.attachment.length <= maxFileSize) {\r\n\t\t\t\t\tuploadRequest.doneUploading = false;\r\n\r\n\t\t\t\t\tif(uploadRequest.attachment.length < maxStringSize) {\r\n\t\t\t\t\t\tuploadFile(uploadRequest);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuploadRequest.onerror({\r\n\t\t\t\t\t\t\t                      errorCode: -1,\r\n\t\t\t\t\t\t\t                      additionalInfo: {}\r\n\t\t\t\t\t\t                      });\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuploadRequest.onerror({\r\n\t\t\t\t\t\t                      errorCode: -2,\r\n\t\t\t\t\t\t                      additionalInfo: {}\r\n\t\t\t\t\t                      });\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tfileReader.onerror = function(e) {\r\n\t\t\t\tuploadRequest.onerror({\r\n\t\t\t\t\t                      errorCode: -3,\r\n\t\t\t\t\t                      additionalInfo: e\r\n\t\t\t\t                      });\r\n\t\t\t};\r\n\r\n\t\t\tfileReader.onabort = function(e) {\r\n\t\t\t\tuploadRequest.onerror({\r\n\t\t\t\t\t                      errorCode: -4,\r\n\t\t\t\t\t                      additionalInfo: e\r\n\t\t\t\t                      });\r\n\t\t\t};\r\n\r\n\t\t\tfileReader.readAsDataURL(uploadRequest.file); // read the body of the file\r\n\t\t};\r\n\r\n\t\t// Method to send a file to be attached to the Account bound to the page by the standardController\r\n\t\t// Sends parameters: Account Id, Attachment (body), Attachment Name, and the Id of the Attachment if it exists\r\n\t\t// to the controller\r\n\t\tfunction uploadFile(uploadRequest) {\r\n\t\t\tvar attachmentBody = \"\";\r\n\r\n\t\t\tif(uploadRequest.attachment.length <= uploadRequest.positionIndex + chunkSize) {\r\n\t\t\t\tattachmentBody = uploadRequest.attachment.substring(uploadRequest.positionIndex);\r\n\t\t\t\tuploadRequest.doneUploading = true;\r\n\t\t\t} else {\r\n\t\t\t\tattachmentBody = uploadRequest.attachment.substring(uploadRequest.positionIndex,\r\n\t\t\t\t                                                    uploadRequest.positionIndex + chunkSize);\r\n\t\t\t}\r\n\r\n\t\t\tuploadRequest.request.attachmentBody = attachmentBody;\r\n\r\n\t\t\tRemoteService.doUploadAttachment(uploadRequest.request).then(function(result) {\r\n\t\t\t\tif(uploadRequest.doneUploading === true) {\r\n\t\t\t\t\tuploadRequest.oncomplete({\r\n\t\t\t\t\t\tresult: result\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuploadRequest.request.attachmentId = result.RecordId;\r\n\t\t\t\t\tuploadRequest.positionIndex += chunkSize;\r\n\t\t\t\t\tvar eventDetails = {\r\n\t\t\t\t\t\tpercentComplete: uploadRequest.positionIndex / uploadRequest.attachment.length,\r\n\t\t\t\t\t\tresult: result\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tuploadRequest.onchunkcomplete(eventDetails);\r\n\r\n\t\t\t\t\tif(eventDetails.stopUploading) return;\r\n\r\n\t\t\t\t\tuploadFile(uploadRequest);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tuploadAttachment: uploadAttachment\r\n\t\t};\r\n\t};\r\n\r\n\tuploadService.$inject = ['RemoteService'];\r\n\r\n\tmodule.exports = uploadService;\r\n})();\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/common/services/uploadService.js\n// module id = 59\n// module chunks = 1","(function() {\r\n\t'use strict';\r\n\r\n\tvar utilitiesService = function() {\r\n\t\tvar _browser;\r\n\r\n\t\tvar generateUuid = function() {\r\n\t\t\tfunction s4() {\r\n\t\t\t\treturn Math.floor((1 + Math.random()) * 0x10000)\r\n\t\t\t\t           .toString(16)\r\n\t\t\t\t           .substring(1);\r\n\t\t\t}\r\n\t\t\treturn s4() + s4() + '-' + s4() + '-' + s4() + '-' +\r\n\t\t\t\ts4() + '-' + s4() + s4() + s4();\r\n\t\t};\r\n\r\n\t\tvar _isInternetExplorer = function() {\r\n\t\t\tvar rv = false;\r\n\t\t\tvar ua;\r\n\t\t\tvar re;\r\n\r\n\t\t\tif (navigator.appName == 'Microsoft Internet Explorer') {\r\n\t\t\t\tua = navigator.userAgent;\r\n\t\t\t\tre = new RegExp(\"MSIE ([0-9]{1,}[\\.0-9]{0,})\");\r\n\t\t\t\trv = re.test(ua);\r\n\t\t\t}\r\n\t\t\telse if (navigator.appName == 'Netscape') {\r\n\t\t\t\tua = navigator.userAgent;\r\n\t\t\t\tre = new RegExp(\"Trident/.*rv:([0-9]{1,}[\\.0-9]{0,})\");\r\n\t\t\t\trv = re.test(ua);\r\n\t\t\t}\r\n\t\t\treturn rv;\r\n\t\t};\r\n\r\n\t\tif(_isInternetExplorer()) {\r\n\t\t\t_browser = \"IE\";\r\n\t\t}\r\n\r\n\t\tvar isSf1 = false;\r\n\r\n\t\t// salesforce specific detection if is salesforce1\r\n\t\tif((typeof sforce != 'undefined') && (sforce !== null)) { // SF1 mobile\r\n\t\t\tisSf1 = true;\r\n\t\t}\r\n\r\n\t\tvar _isMobileIos = (function() {\r\n\t\t\tvar iDevices = [\r\n\t\t\t\t'iPad Simulator',\r\n\t\t\t\t'iPhone Simulator',\r\n\t\t\t\t'iPod Simulator',\r\n\t\t\t\t'iPad',\r\n\t\t\t\t'iPhone',\r\n\t\t\t\t'iPod'\r\n\t\t\t];\r\n\r\n\t\t\tif (!!navigator.platform) {\r\n\t\t\t\twhile (iDevices.length) {\r\n\t\t\t\t\tif (navigator.platform === iDevices.pop()){ return true; }\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn false;\r\n\t\t})();\r\n\r\n\t\t// Detect file input support\r\n\t\tvar _isFileInputSupported = (function () {\r\n\t\t\t// Handle devices which falsely report support\r\n\t\t\tif (navigator.userAgent.match(/(Android (1.0|1.1|1.5|1.6|2.0|2.1))|(Windows Phone (OS 7|8.0))|(XBLWP)|(ZuneWP)|(w(eb)?OSBrowser)|(webOS)|(Kindle\\/(1.0|2.0|2.5|3.0))/)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t// Create test element\r\n\t\t\tvar el = document.createElement(\"input\");\r\n\t\t\tel.type = \"file\";\r\n\t\t\treturn !el.disabled;\r\n\t\t})();\r\n\r\n\t\tvar service = {\r\n\t\t\tgenerateUuid: generateUuid,\r\n\t\t\tdeviceInfo: {\r\n\t\t\t\tbrowser: _browser,\r\n\t\t\t\tisMobileIos: _isMobileIos,\r\n\t\t\t\tisFileInputSupported: _isFileInputSupported\r\n\t\t\t},\r\n\t\t\tisSf1: isSf1\r\n\t\t};\r\n\r\n\t\treturn service;\r\n\t};\r\n\r\n\tmodule.exports = utilitiesService;\r\n})();\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/common/services/utilitiesService.js\n// module id = 60\n// module chunks = 1","(function() {\r\n    'use strict';\r\n\r\n    var pageContainerService = function($q) {\r\n\r\n        var mergeFilesAttachmentInfo = [];\r\n        var attachFilesAttachmentInfo = [];\r\n        var mergeNAFilesAttachmentInfo = [];\r\n        var attachNAFilesAttachmentInfo = [];\r\n        var generatedDocAttachmentInfo = [];\r\n        var currentWaterMarkNeeded = false;\r\n        var currentOutputFormat = '';\r\n\r\n        var service = {\r\n            generatedDocAttachmentInfo: generatedDocAttachmentInfo,\r\n            mergeFilesAttachmentInfo: mergeFilesAttachmentInfo,\r\n            attachFilesAttachmentInfo: attachFilesAttachmentInfo,\r\n            mergeNAFilesAttachmentInfo: mergeNAFilesAttachmentInfo,\r\n            attachNAFilesAttachmentInfo: attachNAFilesAttachmentInfo,\r\n            currentWaterMarkNeeded: currentWaterMarkNeeded,\r\n            currentOutputFormat: currentOutputFormat\r\n        };\r\n\r\n        return service;\r\n    };\r\n\r\n    pageContainerService.$inject = ['$q'];\r\n\r\n    module.exports = pageContainerService;\r\n})();\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/common/directives/pageContainer/pageContainer.service.js\n// module id = 61\n// module chunks = 1","(function() {\r\n    'use strict';\r\n\r\n    var proposalListService = function($q, $filter, _, RemoteService, GlobalService) {\r\n\t    var service;\r\n        var proposalList = [];\r\n        var currentProposalId = GlobalService.currentProposalId;\r\n        var mergedSourceDocs = [];\r\n        var attachments = [];\r\n        var selectionIsATpl = false;\r\n        var selectionIsACollatedDoc = false;\r\n        var proposalDoc = {};\r\n\r\n        function populateProposalList() {\r\n            RemoteService.getCollatedDocuments(currentProposalId).then(function(response) {\r\n\t            service.proposalList = $filter('reverse')(response);\r\n            });\r\n        }\r\n\r\n        service = {\r\n            proposalList: proposalList,\r\n            populateProposalList: populateProposalList,\r\n            mergedSourceDocs: mergedSourceDocs,\r\n            attachments: attachments,\r\n            selectionIsATpl: selectionIsATpl,\r\n            selectionIsACollatedDoc: selectionIsACollatedDoc,\r\n            proposalDoc: proposalDoc,\r\n            defaultOutputFormat: systemConstants.docGenCustomSettings.DefaultOutputFormat\r\n        };\r\n\r\n        return service;\r\n    };\r\n\r\n    proposalListService.$inject = ['$q', '$filter', 'lodash', 'RemoteService', 'GlobalService'];\r\n\r\n    module.exports = proposalListService;\r\n})();\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/common/directives/proposalsList/proposalsList.service.js\n// module id = 62\n// module chunks = 1","(function() {\r\n    'use strict';\r\n\r\n    var previewService = function($q, $filter, _, RemoteService, GlobalService) {\r\n\r\n        this.selectedDocUrl = '';\r\n        this.selectedDocPreviewUrl = '';\r\n        var service;\r\n        var attemptToMerge = false;\r\n        var selectionIsNotPdf = false;\r\n        var dialogIsOpen = false;\r\n        var goForPDF = false;\r\n\t    var disableMerge = false;\r\n\r\n        function previewPDF(documentObj) {\r\n            RemoteService.getAttachmentURL(documentObj.RecordId).then(function(response) {\r\n\t            service.selectedDocUrl = response;\r\n            });\r\n            RemoteService.getAttachmentPreviewURL(documentObj.RecordId).then(function(response) {\r\n\t            service.selectedDocPreviewUrl = response;\r\n            });\r\n        }\r\n\r\n        service = {\r\n            previewPDF: previewPDF,\r\n            selectedDocUrl: this.selectedDocUrl,\r\n            selectedDocPreviewUrl: this.selectedDocPreviewUrl,\r\n            attemptToMerge: attemptToMerge,\r\n            selectionIsNotPdf: selectionIsNotPdf,\r\n            dialogIsOpen: dialogIsOpen,\r\n            goForPDF: goForPDF,\r\n\t        disableMerge: disableMerge\r\n        };\r\n\r\n        return service;\r\n    };\r\n\r\n    previewService.$inject = ['$q', '$filter', 'lodash', 'RemoteService', 'GlobalService'];\r\n\r\n    module.exports = previewService;\r\n})();\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/common/directives/preview/preview.service.js\n// module id = 63\n// module chunks = 1","(function() {\r\n    'use strict';\r\n\r\n    var emailService = function($q, _, RemoteService) {\r\n\r\n        var wantToEmail = false;\r\n        var mergedSourceDocsAttachInfo = [];\r\n        var mergedDocInfo = [];\r\n\r\n        var service = {\r\n            wantToEmail: wantToEmail,\r\n            mergedSourceDocsAttachInfo : mergedSourceDocsAttachInfo,\r\n            mergedDocInfo: mergedDocInfo\r\n        };\r\n\r\n        return service;\r\n    };\r\n\r\n    emailService.$inject = ['$q', 'lodash', 'RemoteService'];\r\n\r\n    module.exports = emailService;\r\n})();\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/common/directives/email/email.service.js\n// module id = 64\n// module chunks = 1","(function() {\r\n    'use strict';\r\n\r\n    var pageNotificationService = function() {\r\n\r\n        var hasPageNotification = false;\r\n        var alert = {\r\n            type: 'warning',\r\n            message: ''\r\n        };\r\n\r\n        var service = {\r\n            hasPageNotification: hasPageNotification,\r\n            alert: alert\r\n        };\r\n\r\n        return service;\r\n    };\r\n\r\n    pageNotificationService.$inject = [];\r\n\r\n    module.exports = pageNotificationService;\r\n})();\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/common/directives/pageNotification/pageNotification.service.js\n// module id = 65\n// module chunks = 1","(function() {\r\n\t'use strict';\r\n\r\n\tmodule.exports = angular.module('docGen.commonFilters', [])\r\n\t\t.filter('reverse', require('./reverseFilter'));\r\n\r\n})();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/common/filters/docGen.common.filters.module.js\n// module id = 66\n// module chunks = 1","(function() {\r\n    'use strict';\r\n    module.exports = [function() {\r\n\r\n        function reverse (items) {\r\n            return items.slice().reverse();\r\n        }\r\n        return reverse;\r\n    }];\r\n\r\n})();\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/common/filters/reverseFilter.js\n// module id = 67\n// module chunks = 1","(function() {\r\n\t'use strict';\r\n\tmodule.exports = ['$stateProvider', '$urlRouterProvider', function($stateProvider, $urlRouterProvider) {\r\n\t\t// Defaults to product listing page with selected view\r\n\t\t$urlRouterProvider.otherwise('/app/list');\r\n\r\n\t\t$stateProvider.state('app', {\r\n\t\t\t\turl: '/app',\r\n\t\t\t\tabstract: true\r\n\t\t\t})\r\n\t\t\t.state('404', {\r\n\t\t\t\turl: '/file-not-found',\r\n\t\t\t\ttemplate: require('./fileNotfound/404.html')\r\n\t\t\t});\r\n\r\n\t\t/* 5 mins timeout*/\r\n\t\t/*IdleProvider.idle(300);\r\n\r\n\t\tIdleProvider.timeout(5);\r\n\r\n\t\tKeepaliveProvider.interval(10);*/\r\n\t}];\r\n})();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/app.config.js\n// module id = 68\n// module chunks = 1","module.exports = \"<div class=\\\"error-container\\\">\\r\\n    <div class=\\\"error-body\\\">\\r\\n        <p class=\\\"error-tagline\\\"> OOPS! COULD NOT FIND IT</p>\\r\\n        <div class=\\\"error-code\\\">\\r\\n            <span>4</span>\\r\\n            <span class=\\\"green\\\">0</span>\\r\\n            <span>4</span>\\r\\n        </div>\\r\\n        <br>\\r\\n        <div class=\\\"redirection\\\">\\r\\n            <a ui-sref=\\\"app.\\\" class=\\\"btn btn-primary\\\">Back to List</a>\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/fileNotfound/404.html\n// module id = 69\n// module chunks = 1","(function() {\r\n\t'use strict';\r\n\r\n\tvar constants = {\r\n\t\t/*\r\n\t\t * This object contains application wide constants.\r\n\t\t * - Capitalized data type names\r\n\t\t */\r\n\r\n\t\t/* Data types */\r\n\t\t'boolean': 'BOOLEAN',\r\n\t\t'string': 'STRING',\r\n\t\t'datetime': 'DATETIME',\r\n\t\t'date': 'DATE',\r\n\t\t'double': 'DOUBLE',\r\n\t\t'percent': 'PERCENT',\r\n\t\t'currency': 'CURRENCY',\r\n\t\t'picklist': 'PICKLIST',\r\n\t\t'multipicklist': 'MULTIPICKLIST',\r\n\t\t'textarea': 'TEXTAREA',\r\n\t\t'url': 'URL',\r\n\r\n\t\t/* Sorting */\r\n\t\t'ascending': 'ASC',\r\n\t\t'descending': 'DESC'\r\n\r\n\t};\r\n\r\n\tmodule.exports = constants;\r\n\r\n})();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/app.constant.js\n// module id = 70\n// module chunks = 1"],"sourceRoot":""}