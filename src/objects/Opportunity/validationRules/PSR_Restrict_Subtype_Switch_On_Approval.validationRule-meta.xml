<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>PSR_Restrict_Subtype_Switch_On_Approval</fullName>
    <active>true</active>
    <description>PreSales : Sprint 9 : Req:3027</description>
    <errorConditionFormula>AND( 
$RecordType.DeveloperName = &apos;Pre_Sales_Risk_Opportunity&apos;, 
ISPICKVAL( PSR_Pre_Sales_Risk_Opportunity_Type__c ,&apos;Risk Order&apos;),
ISPICKVAL(StageName,&apos;Preparation&apos;),
PSR_Reset_PSRO__c = True,
AND
(ISCHANGED(PSR_Pre_Sales_Risk_Opportunity_Sub_Type__c) ,
ISPICKVAL(PRIORVALUE(PSR_Pre_Sales_Risk_Opportunity_Sub_Type__c),&apos;Risk Order With Risk Shipment&apos;)),
$Profile.Name &lt;&gt; $Label.Data_Loader_Profile_Name 
)</errorConditionFormula>
    <errorMessage>You cannot change the Pre-Sales Risk Opportunity Sub-Type from &quot;Risk Order with Risk Shipment&quot; into &quot;Risk Order Only&quot; once its approved</errorMessage>
</ValidationRule>
