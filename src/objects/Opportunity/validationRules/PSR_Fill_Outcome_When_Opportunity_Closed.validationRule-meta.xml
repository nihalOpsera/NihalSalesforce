<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>PSR_Fill_Outcome_When_Opportunity_Closed</fullName>
    <active>true</active>
    <description>Outcome field should be filled up only before Closing the Opportunity</description>
    <errorConditionFormula>AND( 
NOT(ISPICKVAL(PRIORVALUE(StageName ),&apos;Completed&apos;)), 
OR(   
ISPICKVAL( StageName ,&apos;Preparation&apos;), 
ISPICKVAL( StageName ,&apos;Submitted For Approval&apos;), 
ISPICKVAL( StageName ,&apos;In Execution&apos;)), 
OR( 
$RecordType.DeveloperName = &apos;Pre_Sales_Risk_Opportunity&apos;,
$RecordType.DeveloperName = &apos;Pre_Sales_Risk_Opportunity_read_only&apos;
), 
NOT(ISPICKVAL(PSR_Outcome__c,&apos;&apos;)), 
$Profile.Name &lt;&gt; $Label.Data_Loader_Profile_Name )</errorConditionFormula>
    <errorMessage>The Outcome can only be filled when closing the Pre-Sales Risk Opportunity. If you want to close or cancel this Opportunity, please use the Close / Cancel button in the top right corner.</errorMessage>
</ValidationRule>
