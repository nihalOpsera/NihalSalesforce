<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>WhenOpptyClosedFreezeRecordForSalesUser</fullName>
    <active>true</active>
    <description>REQ855</description>
    <errorConditionFormula>AND( 
  (RecordType.DeveloperName = &apos;Read_Only&apos; || RecordType.DeveloperName = &apos;Read_Only_Indirect&apos;), 
  AND(
    $Profile.Name &lt;&gt; $Label.System_Admin_Profile,
    $Profile.Name &lt;&gt; $Label.Global_Process_Admin_Profile ,
    $Profile.Name &lt;&gt; $Label.Accenture_Admin ,
    $Profile.Name &lt;&gt; $Label.Nokia_Admin_Profile, 
    $Profile.Name &lt;&gt; $Label.SDC_Admin,
$Profile.Name &lt;&gt; $Label.Data_Loader_Profile_Name ,
	IF($User.Email &lt;&gt; $Setup.AllowReopenOpptyAndAccountChange__c.Email__c ,true,IF($Setup.AllowReopenOpptyAndAccountChange__c.Allow_Reopening_of_Closed_opportunity__c = True,False,true)))
, 
  ( 
    OR( 
    ISCHANGED( Name), 
    ISCHANGED( StageName), 
    ISCHANGED( CloseDate ), 
    ISCHANGED( CurrencyIsoCode ), 
    ISCHANGED( Phase_Status__c)
    ) 
  ) 
)</errorConditionFormula>
    <errorMessage>Edit blocked as Record type is read-only.</errorMessage>
</ValidationRule>
