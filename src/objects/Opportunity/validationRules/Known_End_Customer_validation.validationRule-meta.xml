<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>Known_End_Customer_validation</fullName>
    <active>true</active>
    <errorConditionFormula>AND($Profile.Name != &quot;Data Loader Profile&quot;,
$Profile.Name != &quot;PRM Partner Community User Login&quot;,
RecordType.DeveloperName == &apos;Indirect_Record_Type&apos;,
	NOT(
		OR(
			AND(ISNEW(),Lead_ID__c != null),
			AND(count_offer__c  == 1 , PRIORVALUE(count_offer__c) == 0, Lead_ID__c != null)
		)
	),
ISPICKVAL(End_Customer_Information__c,&quot;Known End Customer&quot;),
OR(ISBLANK(End_Customer_LE__c),
NOT(ISBLANK(TEXT(Multiple_or_Unknown_EC_Activity_Sector__c))),
NOT(ISBLANK(TEXT(Multiple_or_Unknown_EC_Country__c))),
NOT(ISBLANK(TEXT(Multiple_or_Unknown_EC_Market_Segment__c)))
)
)</errorConditionFormula>
    <errorDisplayField>End_Customer_Information__c</errorDisplayField>
    <errorMessage>&quot;End Customer Legal Entity&quot; is mandatory when &quot;Known End Customer&quot; is selected.</errorMessage>
</ValidationRule>
