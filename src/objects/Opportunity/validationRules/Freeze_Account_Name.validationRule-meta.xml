<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>Freeze_Account_Name</fullName>
    <active>true</active>
    <description>Req 636, 2256: Account Name and End Customer shoudnt be changed after &quot;Develop Opportunity&quot; Sales Phase 
End Customer removed from VR Jun 21. SF Ticket 15899</description>
    <errorConditionFormula>AND ( 
            SWx_Upsell_Proposal__c == Null, 
            AND( 
            $Profile.Name &lt;&gt; $Label.System_Admin_Profile, 
            $Profile.Name &lt;&gt; $Label.Global_Process_Admin_Profile , 
            $Profile.Name &lt;&gt; $Label.Nokia_Admin_Profile, 
            $Profile.Name &lt;&gt; $Label.Data_Loader_Profile_Name , 
            IF($User.Email &lt;&gt; $Setup.AllowReopenOpptyAndAccountChange__c.Email__c ,true,IF($Setup.AllowReopenOpptyAndAccountChange__c.Allow_Accountname_and_EndCustomer_change__c = True,False,true))) 
            , 
            NOT(ISPICKVAL(StageName, &quot;Identify Opportunity&quot;)), 

            ISCHANGED( AccountId ) , 

            OR( 
            $Profile.Name = &apos;Nokia Sales Profile&apos;, 
            $Profile.Name = &apos;Sales Ops Profile&apos;, 
            $Profile.Name = &apos;Non-Sales User Profile&apos; 
            ) ,
            NOT(ISCHANGED(RecordTypeId)),
            NOT(RecordType.DeveloperName = &quot;Pre_opportunity&quot;)
            )</errorConditionFormula>
    <errorMessage>Account Name cannot be changed after G2</errorMessage>
</ValidationRule>
