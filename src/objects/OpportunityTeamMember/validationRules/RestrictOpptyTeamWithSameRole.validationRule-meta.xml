<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>RestrictOpptyTeamWithSameRole</fullName>
    <active>false</active>
    <description>New validation rule to restrict user from inserting Oppty team member  with same Team role and Additional Team role. With Winter 18 release, we have migrated the Opportunity team role to Multi line edit page, and hence field dependency doesn&apos;t work.</description>
    <errorConditionFormula>AND(
$Profile.Name&lt;&gt;$Label.Data_Loader_Profile_Name,
!ISPICKVAL(TeamMemberRole, &quot;&quot;),
OR(IF(INCLUDES(Additional_Team_Role__c,&apos;Account Manager&apos;),&apos;Account Manager&apos;,&apos;&apos;)==TEXT(TeamMemberRole),IF(INCLUDES(Additional_Team_Role__c,&apos;Account Logistics Manager&apos;),&apos;Account Logistics Manager&apos;,&apos;&apos;)==TEXT(TeamMemberRole),IF(INCLUDES(Additional_Team_Role__c,&apos;Bid Manager&apos;),&apos;Bid Manager&apos;,&apos;&apos;)==TEXT(TeamMemberRole),IF(INCLUDES(Additional_Team_Role__c,&apos;Business Development&apos;),&apos;Business Development&apos;,&apos;&apos;)==TEXT(TeamMemberRole),IF(INCLUDES(Additional_Team_Role__c,&apos;CDM/Project Execution Owner&apos;),&apos;CDM/Project Execution Owner&apos;,&apos;&apos;)==TEXT(TeamMemberRole),IF(INCLUDES(Additional_Team_Role__c,&apos;CT Head&apos;),&apos;CT Head&apos;,&apos;&apos;)==TEXT(TeamMemberRole),IF(INCLUDES(Additional_Team_Role__c,&apos;Customer Business Controller&apos;),&apos;Customer Business Controller&apos;,&apos;&apos;)==TEXT(TeamMemberRole),IF(INCLUDES(Additional_Team_Role__c,&apos;Customer Delivery Manager&apos;),&apos;Customer Delivery Manager&apos;,&apos;&apos;)==TEXT(TeamMemberRole),IF(INCLUDES(Additional_Team_Role__c,&apos;Customer Quality Manager&apos;),&apos;Customer Quality Manager&apos;,&apos;&apos;)==TEXT(TeamMemberRole),IF(INCLUDES(Additional_Team_Role__c,&apos;Customer Supply Manager&apos;),&apos;Customer Supply Manager&apos;,&apos;&apos;)==TEXT(TeamMemberRole),IF(INCLUDES(Additional_Team_Role__c,&apos;E2E Solution Manager&apos;),&apos;E2E Solution Manager&apos;,&apos;&apos;)==TEXT(TeamMemberRole),IF(INCLUDES(Additional_Team_Role__c,&apos;G3 Facilitator&apos;),&apos;G3 Facilitator&apos;,&apos;&apos;)==TEXT(TeamMemberRole),IF(INCLUDES(Additional_Team_Role__c,&apos;Global Sales Support SPOC&apos;),&apos;Global Sales Support SPOC&apos;,&apos;&apos;) == TEXT(TeamMemberRole),IF(INCLUDES(Additional_Team_Role__c,&apos;Head of Sales&apos;),&apos;Head of Sales&apos;,&apos;&apos;)==TEXT(TeamMemberRole),IF(INCLUDES(Additional_Team_Role__c,&apos;LOA Facilitator&apos;),&apos;LOA Facilitator&apos;,&apos;&apos;)==TEXT(TeamMemberRole),IF(INCLUDES(Additional_Team_Role__c,&apos;Marketing Manager&apos;),&apos;Marketing Manager&apos;,&apos;&apos;)==TEXT(TeamMemberRole),IF(INCLUDES(Additional_Team_Role__c,&apos;Offer Controller&apos;), &apos;Offer Controller&apos;,&apos;&apos;)==TEXT(TeamMemberRole),IF(INCLUDES(Additional_Team_Role__c,&apos;Partner&apos;),&apos;Partner&apos;,&apos;&apos;)==TEXT(TeamMemberRole),IF(INCLUDES(Additional_Team_Role__c,&apos;Partner Sales Manager&apos;), &apos;Partner Sales Manager&apos;,&apos;&apos;)==TEXT(TeamMemberRole),IF(INCLUDES(Additional_Team_Role__c ,&apos;Pricing Manager&apos;),&apos;Pricing Manager&apos;,&apos;&apos;)==TEXT(TeamMemberRole),IF(INCLUDES(Additional_Team_Role__c ,&apos;Project Contract Manager&apos;),&apos;Project Contract Manager&apos;,&apos;&apos;)==TEXT(TeamMemberRole),IF(INCLUDES(Additional_Team_Role__c ,&apos;Project Execution Owner&apos;),&apos;Project Execution Owner&apos;,&apos;&apos;)==TEXT(TeamMemberRole),IF(INCLUDES(Additional_Team_Role__c ,&apos;E2E Pricing Manager&apos;),&apos;E2E Pricing Manager&apos;,&apos;&apos;)==TEXT(TeamMemberRole),IF(INCLUDES(Additional_Team_Role__c ,&apos;Project Procurement Manager&apos;),&apos;Project Procurement Manager&apos;,&apos;&apos;)==TEXT(TeamMemberRole),IF(INCLUDES(Additional_Team_Role__c ,&apos;Sales Operations Support&apos;),&apos;Sales Operations Support&apos;,&apos;&apos;)==TEXT(TeamMemberRole),IF(INCLUDES(Additional_Team_Role__c ,&apos;Services Solution Manager&apos;),&apos;Services Solution Manager&apos;,&apos;&apos;)==TEXT(TeamMemberRole),IF(INCLUDES(Additional_Team_Role__c ,&apos;Services Solution Specialist&apos;),&apos;Services Solution Specialist&apos;,&apos;&apos;)==TEXT(TeamMemberRole),IF(INCLUDES(Additional_Team_Role__c ,&apos;Solution Manager&apos;),&apos;Solution Manager&apos;,&apos;&apos;)==TEXT(TeamMemberRole),IF(INCLUDES(Additional_Team_Role__c ,&apos;Lead Solution Manager&apos;),&apos;Lead Solution Manager&apos;,&apos;&apos;)==TEXT(TeamMemberRole),IF(INCLUDES(Additional_Team_Role__c ,&apos;Solution Specialist&apos;),&apos;Solution Specialist&apos;,&apos;&apos;)==TEXT(TeamMemberRole),IF(INCLUDES(Additional_Team_Role__c ,&apos;Supply Chain Product Manager&apos;),&apos;Supply Chain Product Manager&apos;,&apos;&apos;)==TEXT(TeamMemberRole),IF(INCLUDES(Additional_Team_Role__c,&apos;Technical Config Consultant&apos;),&apos;Technical Config Consultant&apos;,&apos;&apos;)==TEXT(TeamMemberRole),IF(INCLUDES(Additional_Team_Role__c,&apos;Commercial Deal Manager&apos;),&apos;Commercial Deal Manager&apos;,&apos;&apos;)==TEXT(TeamMemberRole))
)</errorConditionFormula>
    <errorMessage>Team role and Additional Team role can not be same.</errorMessage>
</ValidationRule>
