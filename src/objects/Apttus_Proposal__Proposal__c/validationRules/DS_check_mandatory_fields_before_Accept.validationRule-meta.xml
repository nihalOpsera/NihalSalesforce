<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>DS_check_mandatory_fields_before_Accept</fullName>
    <active>true</active>
    <description>A DS Quote/Proposal cannot be accepted without having PO Number, PO date and - only in case of Project mode - Nokia Customer Document ID fields filled.</description>
    <errorConditionFormula>AND(
				Quote_Type__c = &apos;Direct DS&apos;,
				ISPICKVAL(Apttus_Proposal__Approval_Stage__c, &apos;Accepted&apos;),
				ISCHANGED(Apttus_Proposal__Approval_Stage__c),
				OR(
								ISBLANK(Apttus_QPConfig__PONumber__c),
								ISBLANK(Apttus_QPConfig__PODate__c),
								IF(
												ISPICKVAL(Contract_Type_Name__c, &apos;Project&apos;),
												ISBLANK(Nokia_Customer_Document_ID__c),
												False
								)
				)
)</errorConditionFormula>
    <errorMessage>Mandatory fields are missing (PO Number, PO Date or Nokia Customer Document ID)</errorMessage>
</ValidationRule>
