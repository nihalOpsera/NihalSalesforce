<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>CH_ValidateDifferentCountryOnCLI</fullName>
    <active>true</active>
    <description>Prevent creating/editing assets with NEA record type that have the field CH_ContractLineItem__c populated when the country of the CLI is different from the country of the asset address</description>
    <errorConditionFormula>$RecordType.Name = &quot;Network Element Asset&quot; &amp;&amp; 
CH_ContractLineItem__c!=null &amp;&amp; 
(LOWER(Address__r.Country) != LOWER(CH_ContractLineItem__r.CH_CountryISOName__c))&amp;&amp;( NOT(ISBLANK( Address__c ) ))</errorConditionFormula>
    <errorMessage>Country in the Contract Line Item needs to match the country in the Asset Address.</errorMessage>
</ValidationRule>
