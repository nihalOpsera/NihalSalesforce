<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>change_status_based_on_subclassification</fullName>
    <active>false</active>
    <errorConditionFormula>AND( 
AND( 
$Profile.Name &lt;&gt; &quot;Data Loader Profile&quot;, 
$Profile.Name &lt;&gt; &quot;Integration API Only Profile&quot; 
), 
NOT(ISBLANK(TEXT(Sub_Classification__c ))) , 
OR(
AND(
ISPICKVAL(Sub_Classification__c , &apos;Umbrella (Offer Based)&apos;),
NOT(OR(
ISPICKVAL(Status__c, &apos;Draft&apos;),
ISPICKVAL(Status__c, &apos;In Registration&apos;),
ISPICKVAL(Status__c, &apos;Registered&apos;),
ISPICKVAL(Status__c, &apos;Closed-consumed&apos;),
ISPICKVAL(Status__c, &apos;Closed-cancelled&apos;)
) )
),
AND(
ISPICKVAL(Sub_Classification__c , &apos;Quote-based&apos;),
NOT(OR(
ISPICKVAL(Status__c, &apos;Draft&apos;),
ISPICKVAL(Status__c, &apos;In Registration&apos;),
ISPICKVAL(Status__c, &apos;Registered&apos;),
ISPICKVAL(Status__c, &apos;Closed-validated&apos;),
ISPICKVAL(Status__c, &apos;Closed-cancelled&apos;),
ISPICKVAL(Status__c, &apos;Closed-rejected&apos;)
) )
)
)
)</errorConditionFormula>
    <errorMessage>Please change the status based on your Sub Classification</errorMessage>
</ValidationRule>
