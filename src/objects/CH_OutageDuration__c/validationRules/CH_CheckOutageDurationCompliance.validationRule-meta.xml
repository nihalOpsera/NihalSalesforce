<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>CH_CheckOutageDurationCompliance</fullName>
    <active>true</active>
    <description>Checks if the sum of distinct ODRs and total outage duration on Case are equal
 when start/end date on ODR is changed manually</description>
    <errorConditionFormula>AND(
OR(ISCHANGED(CH_DurationStartDate__c), ISCHANGED(CH_DurationEndDate__c )), 
NOT(ISNEW()), 
FLOOR(CH_SupportTicket__r.CH_TotalOutageDuration__c) != FLOOR(  CH_SupportTicket__r.Outage_Duration_Check__c),
ISPICKVAL(CH_SupportTicket__r.CH_Stage__c,&apos;Close&apos;)
)</errorConditionFormula>
    <errorDisplayField>CH_AttributableParty__c</errorDisplayField>
    <errorMessage>Total Outage duration on Case must equal outage duration coverage by distinct Outage Duration Records</errorMessage>
</ValidationRule>
