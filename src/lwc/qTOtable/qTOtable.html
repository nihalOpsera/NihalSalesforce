<!--
  @description       : 
  @author            : Lovel Panchal
  @group             : 
  @last modified on  : 11-18-2020
  @last modified by  : Lovel Panchal
  Modifications Log 
  Ver   Date         Author          Modification
  1.0   11-06-2020   Lovel Panchal   Initial Version
-->

<template> 
    <lightning-card>
        <div class="slds-text-heading_large" style="margin-top:-30px;margin-bottom:10px;border-bottom: 1px solid #ccc; text-align:center">Associate {name}</div>
        <!-- DSI-2340 Checkbox to filter which quote lines to show for association START -->
        <div class="slds-var-p-around_small slds-grid slds-gutters_small" if:true={isQuoteLineAssociation}>
            <!--<lightning-input type="checkbox" variant="label-inline" name="header_associations" label="Header Associations" onchange={handleAssociateQuoteLineFilterChange}></lightning-input>
            <lightning-input type="checkbox" variant="label-inline" name="sold_to_party" label="Sold to Party" checked aria-checked="true" onchange={handleAssociateQuoteLineFilterChange}></lightning-input> 
            -->
            <lightning-input type="radio" name="association" value="header_associations" label="Associated Header Quote Lines" onchange={handleAssociateQuoteLineFilterChange}></lightning-input>
            <lightning-input type="radio" name="association" value="sold_to_party" label="Sold To Party Quote Lines" onchange={handleAssociateQuoteLineFilterChange}></lightning-input>
            
            <lightning-input type="radio" name="association" value="all" label="All" onchange={handleAssociateQuoteLineFilterChange}></lightning-input>
        
        </div>
        <template if:true={showTable}>
            <!-- DSI-2340 Checkbox to filter which quote lines to show for association END -->
            <c-paginator records={data} 
                        total-records={data.length} 
                        show-search-box="true" 
                        onpaginatorchange={handlePaginatorChange} 
                        pre-selected-rows={preSelectedRows}>
            </c-paginator>
            <lightning-datatable key-field="Id" 
                                data={recordsToDisplay} 
                                selected-rows={SelectedFilterdRows}
                                columns={columns}
                                show-row-number-column
                                row-number-offset={rowNumberOffset}
                                suppress-bottom-bar>
            </lightning-datatable>
            <div class="slds-box slds-theme_shade" if:true={inProgress}>
                <p><strong>Association In Process </strong> This may take some time. Please refresh to get check status <button class="slds-button slds-button_icon slds-button_icon-border" title="Refresh"  onclick={refreshQuote}>
                    <svg class="slds-button__icon" aria-hidden="true">
                        <use xlink:href="/_slds/icons/utility-sprite/svg/symbols.svg?cache=9.28.0#refresh"></use>
                    </svg>
                </button></p>
            </div>
            <br />
           <div if:false={inProgress}>
                <div class="slds-align_absolute-center"><br />
                                     <lightning-button label="Save" onclick={handleSaveClick}></lightning-button> 
                </div>            
                <div if:true={showSpinner}  class="slds-spinner_inline spinner-padding slds-align_absolute-center" style="top: 23.8%;position: fixed;z-index: 99999;left: 0%;height: 511px;background: #ccc;border: 1px solid;width: 100%;opacity: 0.5;">
                    <lightning-spinner variant="brand" 
                                        alternative-text="Loading Data"     
                                        size="medium">
                    </lightning-spinner>
                </div>
            </div>
        </template>
        <div class="slds-box slds-theme_shade" if:false={showTable}>
            <p><strong>No {name} to Associate for Customer Document</strong></p>
        </div>
    </lightning-card>
</template>